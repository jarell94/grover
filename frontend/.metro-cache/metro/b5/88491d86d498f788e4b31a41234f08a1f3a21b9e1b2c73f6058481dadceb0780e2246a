{"dependencies":[{"name":"@sentry/core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":290,"index":290}}],"key":"/o+dASQcHF2bB25icdsM0E4TExc=","exportNames":["*"],"imports":1}},{"name":"../debug-build.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":291},"end":{"line":2,"column":48,"index":339}}],"key":"rfhktnzi6PvZxT1xtyHWbBktN/w=","exportNames":["*"],"imports":1}},{"name":"./instrument.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":340},"end":{"line":3,"column":63,"index":403}}],"key":"/faGONMhKrqQj2KSLxxwco89Hvc=","exportNames":["*"],"imports":1}},{"name":"./utils.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":404},"end":{"line":4,"column":115,"index":519}}],"key":"NIaSEHO1E48gsZc7jH9Ex1xTHgE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"_sendStandaloneLcpSpan\", {\n    enumerable: true,\n    get: function () {\n      return _sendStandaloneLcpSpan;\n    }\n  });\n  Object.defineProperty(exports, \"trackLcpAsStandaloneSpan\", {\n    enumerable: true,\n    get: function () {\n      return trackLcpAsStandaloneSpan;\n    }\n  });\n  var _sentryCore = require(_dependencyMap[0], \"@sentry/core\");\n  var _debugBuildJs = require(_dependencyMap[1], \"../debug-build.js\");\n  var _instrumentJs = require(_dependencyMap[2], \"./instrument.js\");\n  var _utilsJs = require(_dependencyMap[3], \"./utils.js\");\n  /**\n   * Starts tracking the Largest Contentful Paint on the current page and collects the value once\n   *\n   * - the page visibility is hidden\n   * - a navigation span is started (to stop LCP measurement for SPA soft navigations)\n   *\n   * Once either of these events triggers, the LCP value is sent as a standalone span and we stop\n   * measuring LCP for subsequent routes.\n   */\n  function trackLcpAsStandaloneSpan(client) {\n    let standaloneLcpValue = 0;\n    let standaloneLcpEntry;\n    if (!(0, _utilsJs.supportsWebVital)('largest-contentful-paint')) {\n      return;\n    }\n    const cleanupLcpHandler = (0, _instrumentJs.addLcpInstrumentationHandler)(({\n      metric\n    }) => {\n      const entry = metric.entries[metric.entries.length - 1];\n      if (!entry) {\n        return;\n      }\n      standaloneLcpValue = metric.value;\n      standaloneLcpEntry = entry;\n    }, true);\n    (0, _utilsJs.listenForWebVitalReportEvents)(client, (reportEvent, pageloadSpanId) => {\n      _sendStandaloneLcpSpan(standaloneLcpValue, standaloneLcpEntry, pageloadSpanId, reportEvent);\n      cleanupLcpHandler();\n    });\n  }\n\n  /**\n   * Exported only for testing!\n   */\n  function _sendStandaloneLcpSpan(lcpValue, entry, pageloadSpanId, reportEvent) {\n    _debugBuildJs.DEBUG_BUILD && _sentryCore.debug.log(`Sending LCP span (${lcpValue})`);\n    const startTime = (0, _utilsJs.msToSec)(((0, _sentryCore.browserPerformanceTimeOrigin)() || 0) + (entry?.startTime || 0));\n    const routeName = (0, _sentryCore.getCurrentScope)().getScopeData().transactionName;\n    const name = entry ? (0, _sentryCore.htmlTreeAsString)(entry.element) : 'Largest contentful paint';\n    const attributes = {\n      [_sentryCore.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]: 'auto.http.browser.lcp',\n      [_sentryCore.SEMANTIC_ATTRIBUTE_SENTRY_OP]: 'ui.webvital.lcp',\n      [_sentryCore.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME]: 0,\n      // LCP is a point-in-time metric\n      // attach the pageload span id to the LCP span so that we can link them in the UI\n      'sentry.pageload.span_id': pageloadSpanId,\n      // describes what triggered the web vital to be reported\n      'sentry.report_event': reportEvent\n    };\n    if (entry) {\n      entry.element && (attributes['lcp.element'] = (0, _sentryCore.htmlTreeAsString)(entry.element));\n      entry.id && (attributes['lcp.id'] = entry.id);\n\n      // Trim URL to the first 200 characters.\n      entry.url && (attributes['lcp.url'] = entry.url.trim().slice(0, 200));\n\n      // loadTime is the time of LCP that's related to receiving the LCP element response..\n      entry.loadTime != null && (attributes['lcp.loadTime'] = entry.loadTime);\n\n      // renderTime is loadTime + rendering time\n      // it's 0 if the LCP element is loaded from a 3rd party origin that doesn't send the\n      // `Timing-Allow-Origin` header.\n      entry.renderTime != null && (attributes['lcp.renderTime'] = entry.renderTime);\n      entry.size != null && (attributes['lcp.size'] = entry.size);\n    }\n    const span = (0, _utilsJs.startStandaloneWebVitalSpan)({\n      name,\n      transaction: routeName,\n      attributes,\n      startTime\n    });\n    if (span) {\n      span.addEvent('lcp', {\n        [_sentryCore.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT]: 'millisecond',\n        [_sentryCore.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE]: lcpValue\n      });\n\n      // LCP is a point-in-time metric, so we end the span immediately\n      span.end(startTime);\n    }\n  }\n});","lineCount":104,"map":[[7,2,100,0,"Object"],[7,8,100,0],[7,9,100,0,"defineProperty"],[7,23,100,0],[7,24,100,0,"exports"],[7,31,100,0],[8,4,100,0,"enumerable"],[8,14,100,0],[9,4,100,0,"get"],[9,7,100,0],[9,18,100,0,"get"],[9,19,100,0],[10,6,100,0],[10,13,100,9,"_sendStandaloneLcpSpan"],[10,35,100,31],[11,4,100,31],[12,2,100,31],[13,2,100,0,"Object"],[13,8,100,0],[13,9,100,0,"defineProperty"],[13,23,100,0],[13,24,100,0,"exports"],[13,31,100,0],[14,4,100,0,"enumerable"],[14,14,100,0],[15,4,100,0,"get"],[15,7,100,0],[15,18,100,0,"get"],[15,19,100,0],[16,6,100,0],[16,13,100,33,"trackLcpAsStandaloneSpan"],[16,37,100,57],[17,4,100,57],[18,2,100,57],[19,2,1,0],[19,6,1,0,"_sentryCore"],[19,17,1,0],[19,20,1,0,"require"],[19,27,1,0],[19,28,1,0,"_dependencyMap"],[19,42,1,0],[20,2,2,0],[20,6,2,0,"_debugBuildJs"],[20,19,2,0],[20,22,2,0,"require"],[20,29,2,0],[20,30,2,0,"_dependencyMap"],[20,44,2,0],[21,2,3,0],[21,6,3,0,"_instrumentJs"],[21,19,3,0],[21,22,3,0,"require"],[21,29,3,0],[21,30,3,0,"_dependencyMap"],[21,44,3,0],[22,2,4,0],[22,6,4,0,"_utilsJs"],[22,14,4,0],[22,17,4,0,"require"],[22,24,4,0],[22,25,4,0,"_dependencyMap"],[22,39,4,0],[23,2,6,0],[24,0,7,0],[25,0,8,0],[26,0,9,0],[27,0,10,0],[28,0,11,0],[29,0,12,0],[30,0,13,0],[31,0,14,0],[32,2,15,0],[32,11,15,9,"trackLcpAsStandaloneSpan"],[32,35,15,33,"trackLcpAsStandaloneSpan"],[32,36,15,34,"client"],[32,42,15,40],[32,44,15,42],[33,4,16,2],[33,8,16,6,"standaloneLcpValue"],[33,26,16,24],[33,29,16,27],[33,30,16,28],[34,4,17,2],[34,8,17,6,"standaloneLcpEntry"],[34,26,17,24],[35,4,19,2],[35,8,19,6],[35,9,19,7],[35,13,19,7,"supportsWebVital"],[35,21,19,23],[35,22,19,23,"supportsWebVital"],[35,38,19,23],[35,40,19,24],[35,66,19,50],[35,67,19,51],[35,69,19,53],[36,6,20,4],[37,4,21,2],[38,4,23,2],[38,10,23,8,"cleanupLcpHandler"],[38,27,23,25],[38,30,23,28],[38,34,23,28,"addLcpInstrumentationHandler"],[38,47,23,56],[38,48,23,56,"addLcpInstrumentationHandler"],[38,76,23,56],[38,78,23,57],[38,79,23,58],[39,6,23,60,"metric"],[40,4,23,67],[40,5,23,68],[40,10,23,73],[41,6,24,4],[41,12,24,10,"entry"],[41,17,24,15],[41,20,24,18,"metric"],[41,26,24,24],[41,27,24,25,"entries"],[41,34,24,32],[41,35,24,33,"metric"],[41,41,24,39],[41,42,24,40,"entries"],[41,49,24,47],[41,50,24,48,"length"],[41,56,24,54],[41,59,24,57],[41,60,24,58],[41,61,24,59],[42,6,25,4],[42,10,25,8],[42,11,25,9,"entry"],[42,16,25,14],[42,18,25,16],[43,8,26,6],[44,6,27,4],[45,6,28,4,"standaloneLcpValue"],[45,24,28,22],[45,27,28,25,"metric"],[45,33,28,31],[45,34,28,32,"value"],[45,39,28,37],[46,6,29,4,"standaloneLcpEntry"],[46,24,29,22],[46,27,29,25,"entry"],[46,32,29,30],[47,4,30,2],[47,5,30,3],[47,7,30,5],[47,11,30,9],[47,12,30,10],[48,4,32,2],[48,8,32,2,"listenForWebVitalReportEvents"],[48,16,32,31],[48,17,32,31,"listenForWebVitalReportEvents"],[48,46,32,31],[48,48,32,32,"client"],[48,54,32,38],[48,56,32,40],[48,57,32,41,"reportEvent"],[48,68,32,52],[48,70,32,54,"pageloadSpanId"],[48,84,32,68],[48,89,32,73],[49,6,33,4,"_sendStandaloneLcpSpan"],[49,28,33,26],[49,29,33,27,"standaloneLcpValue"],[49,47,33,45],[49,49,33,47,"standaloneLcpEntry"],[49,67,33,65],[49,69,33,67,"pageloadSpanId"],[49,83,33,81],[49,85,33,83,"reportEvent"],[49,96,33,94],[49,97,33,95],[50,6,34,4,"cleanupLcpHandler"],[50,23,34,21],[50,24,34,22],[50,25,34,23],[51,4,35,2],[51,5,35,3],[51,6,35,4],[52,2,36,0],[54,2,38,0],[55,0,39,0],[56,0,40,0],[57,2,41,0],[57,11,41,9,"_sendStandaloneLcpSpan"],[57,33,41,31,"_sendStandaloneLcpSpan"],[57,34,42,2,"lcpValue"],[57,42,42,10],[57,44,43,2,"entry"],[57,49,43,7],[57,51,44,2,"pageloadSpanId"],[57,65,44,16],[57,67,45,2,"reportEvent"],[57,78,45,13],[57,80,46,2],[58,4,47,2,"DEBUG_BUILD"],[58,17,47,13],[58,18,47,13,"DEBUG_BUILD"],[58,29,47,13],[58,33,47,17,"debug"],[58,44,47,22],[58,45,47,22,"debug"],[58,50,47,22],[58,51,47,23,"log"],[58,54,47,26],[58,55,47,27],[58,76,47,48,"lcpValue"],[58,84,47,56],[58,87,47,59],[58,88,47,60],[59,4,49,2],[59,10,49,8,"startTime"],[59,19,49,17],[59,22,49,20],[59,26,49,20,"msToSec"],[59,34,49,27],[59,35,49,27,"msToSec"],[59,42,49,27],[59,44,49,28],[59,45,49,29],[59,49,49,29,"browserPerformanceTimeOrigin"],[59,60,49,57],[59,61,49,57,"browserPerformanceTimeOrigin"],[59,89,49,57],[59,91,49,58],[59,92,49,59],[59,96,49,63],[59,97,49,64],[59,102,49,69,"entry"],[59,107,49,74],[59,109,49,76,"startTime"],[59,118,49,85],[59,122,49,89],[59,123,49,90],[59,124,49,91],[59,125,49,92],[60,4,50,2],[60,10,50,8,"routeName"],[60,19,50,17],[60,22,50,20],[60,26,50,20,"getCurrentScope"],[60,37,50,35],[60,38,50,35,"getCurrentScope"],[60,53,50,35],[60,55,50,36],[60,56,50,37],[60,57,50,38,"getScopeData"],[60,69,50,50],[60,70,50,51],[60,71,50,52],[60,72,50,53,"transactionName"],[60,87,50,68],[61,4,52,2],[61,10,52,8,"name"],[61,14,52,12],[61,17,52,15,"entry"],[61,22,52,20],[61,25,52,23],[61,29,52,23,"htmlTreeAsString"],[61,40,52,39],[61,41,52,39,"htmlTreeAsString"],[61,57,52,39],[61,59,52,40,"entry"],[61,64,52,45],[61,65,52,46,"element"],[61,72,52,53],[61,73,52,54],[61,76,52,57],[61,102,52,83],[62,4,54,2],[62,10,54,8,"attributes"],[62,20,54,18],[62,23,54,21],[63,6,55,4],[63,7,55,5,"SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN"],[63,18,55,37],[63,19,55,37,"SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN"],[63,51,55,37],[63,54,55,40],[63,77,55,63],[64,6,56,4],[64,7,56,5,"SEMANTIC_ATTRIBUTE_SENTRY_OP"],[64,18,56,33],[64,19,56,33,"SEMANTIC_ATTRIBUTE_SENTRY_OP"],[64,47,56,33],[64,50,56,36],[64,67,56,53],[65,6,57,4],[65,7,57,5,"SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME"],[65,18,57,38],[65,19,57,38,"SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME"],[65,52,57,38],[65,55,57,41],[65,56,57,42],[66,6,57,44],[67,6,58,4],[68,6,59,4],[68,31,59,29],[68,33,59,31,"pageloadSpanId"],[68,47,59,45],[69,6,60,4],[70,6,61,4],[70,27,61,25],[70,29,61,27,"reportEvent"],[71,4,62,2],[71,5,62,3],[72,4,64,2],[72,8,64,6,"entry"],[72,13,64,11],[72,15,64,13],[73,6,65,4,"entry"],[73,11,65,9],[73,12,65,10,"element"],[73,19,65,17],[73,24,65,22,"attributes"],[73,34,65,32],[73,35,65,33],[73,48,65,46],[73,49,65,47],[73,52,65,50],[73,56,65,50,"htmlTreeAsString"],[73,67,65,66],[73,68,65,66,"htmlTreeAsString"],[73,84,65,66],[73,86,65,67,"entry"],[73,91,65,72],[73,92,65,73,"element"],[73,99,65,80],[73,100,65,81],[73,101,65,82],[74,6,66,4,"entry"],[74,11,66,9],[74,12,66,10,"id"],[74,14,66,12],[74,19,66,17,"attributes"],[74,29,66,27],[74,30,66,28],[74,38,66,36],[74,39,66,37],[74,42,66,40,"entry"],[74,47,66,45],[74,48,66,46,"id"],[74,50,66,48],[74,51,66,49],[76,6,68,4],[77,6,69,4,"entry"],[77,11,69,9],[77,12,69,10,"url"],[77,15,69,13],[77,20,69,18,"attributes"],[77,30,69,28],[77,31,69,29],[77,40,69,38],[77,41,69,39],[77,44,69,42,"entry"],[77,49,69,47],[77,50,69,48,"url"],[77,53,69,51],[77,54,69,52,"trim"],[77,58,69,56],[77,59,69,57],[77,60,69,58],[77,61,69,59,"slice"],[77,66,69,64],[77,67,69,65],[77,68,69,66],[77,70,69,68],[77,73,69,71],[77,74,69,72],[77,75,69,73],[79,6,71,4],[80,6,72,4,"entry"],[80,11,72,9],[80,12,72,10,"loadTime"],[80,20,72,18],[80,24,72,22],[80,28,72,26],[80,33,72,31,"attributes"],[80,43,72,41],[80,44,72,42],[80,58,72,56],[80,59,72,57],[80,62,72,60,"entry"],[80,67,72,65],[80,68,72,66,"loadTime"],[80,76,72,74],[80,77,72,75],[82,6,74,4],[83,6,75,4],[84,6,76,4],[85,6,77,4,"entry"],[85,11,77,9],[85,12,77,10,"renderTime"],[85,22,77,20],[85,26,77,24],[85,30,77,28],[85,35,77,33,"attributes"],[85,45,77,43],[85,46,77,44],[85,62,77,60],[85,63,77,61],[85,66,77,64,"entry"],[85,71,77,69],[85,72,77,70,"renderTime"],[85,82,77,80],[85,83,77,81],[86,6,79,4,"entry"],[86,11,79,9],[86,12,79,10,"size"],[86,16,79,14],[86,20,79,18],[86,24,79,22],[86,29,79,27,"attributes"],[86,39,79,37],[86,40,79,38],[86,50,79,48],[86,51,79,49],[86,54,79,52,"entry"],[86,59,79,57],[86,60,79,58,"size"],[86,64,79,62],[86,65,79,63],[87,4,80,2],[88,4,82,2],[88,10,82,8,"span"],[88,14,82,12],[88,17,82,15],[88,21,82,15,"startStandaloneWebVitalSpan"],[88,29,82,42],[88,30,82,42,"startStandaloneWebVitalSpan"],[88,57,82,42],[88,59,82,43],[89,6,83,4,"name"],[89,10,83,8],[90,6,84,4,"transaction"],[90,17,84,15],[90,19,84,17,"routeName"],[90,28,84,26],[91,6,85,4,"attributes"],[91,16,85,14],[92,6,86,4,"startTime"],[93,4,87,2],[93,5,87,3],[93,6,87,4],[94,4,89,2],[94,8,89,6,"span"],[94,12,89,10],[94,14,89,12],[95,6,90,4,"span"],[95,10,90,8],[95,11,90,9,"addEvent"],[95,19,90,17],[95,20,90,18],[95,25,90,23],[95,27,90,25],[96,8,91,6],[96,9,91,7,"SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT"],[96,20,91,49],[96,21,91,49,"SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT"],[96,63,91,49],[96,66,91,52],[96,79,91,65],[97,8,92,6],[97,9,92,7,"SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE"],[97,20,92,50],[97,21,92,50,"SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE"],[97,64,92,50],[97,67,92,53,"lcpValue"],[98,6,93,4],[98,7,93,5],[98,8,93,6],[100,6,95,4],[101,6,96,4,"span"],[101,10,96,8],[101,11,96,9,"end"],[101,14,96,12],[101,15,96,13,"startTime"],[101,24,96,22],[101,25,96,23],[102,4,97,2],[103,2,98,0],[104,0,98,1],[104,3]],"functionMap":{"names":["<global>","trackLcpAsStandaloneSpan","addLcpInstrumentationHandler$argument_0","listenForWebVitalReportEvents$argument_1","_sendStandaloneLcpSpan"],"mappings":"AAA;ACc;yDCQ;GDO;wCEE;GFG;CDC;AIK;CJyD"},"hasCjsExports":false},"type":"js/module"}]}