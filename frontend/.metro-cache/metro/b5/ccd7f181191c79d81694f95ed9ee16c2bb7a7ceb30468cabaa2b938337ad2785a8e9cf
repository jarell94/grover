{"dependencies":[{"name":"@sentry/core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":106,"index":106}}],"key":"/o+dASQcHF2bB25icdsM0E4TExc=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"applySourceContextToFrame\", {\n    enumerable: true,\n    get: function () {\n      return applySourceContextToFrame;\n    }\n  });\n  Object.defineProperty(exports, \"contextLinesIntegration\", {\n    enumerable: true,\n    get: function () {\n      return contextLinesIntegration;\n    }\n  });\n  var _sentryCore = require(_dependencyMap[0], \"@sentry/core\");\n  const WINDOW = _sentryCore.GLOBAL_OBJ;\n  const DEFAULT_LINES_OF_CONTEXT = 7;\n  const INTEGRATION_NAME = 'ContextLines';\n  const _contextLinesIntegration = (options = {}) => {\n    const contextLines = options.frameContextLines != null ? options.frameContextLines : DEFAULT_LINES_OF_CONTEXT;\n    return {\n      name: INTEGRATION_NAME,\n      processEvent(event) {\n        return addSourceContext(event, contextLines);\n      }\n    };\n  };\n\n  /**\n   * Collects source context lines around the lines of stackframes pointing to JS embedded in\n   * the current page's HTML.\n   *\n   * This integration DOES NOT work for stack frames pointing to JS files that are loaded by the browser.\n   * For frames pointing to files, context lines are added during ingestion and symbolication\n   * by attempting to download the JS files to the Sentry backend.\n   *\n   * Use this integration if you have inline JS code in HTML pages that can't be accessed\n   * by our backend (e.g. due to a login-protected page).\n   */\n  const contextLinesIntegration = (0, _sentryCore.defineIntegration)(_contextLinesIntegration);\n\n  /**\n   * Processes an event and adds context lines.\n   */\n  function addSourceContext(event, contextLines) {\n    const doc = WINDOW.document;\n    const htmlFilename = WINDOW.location && (0, _sentryCore.stripUrlQueryAndFragment)(WINDOW.location.href);\n    if (!doc || !htmlFilename) {\n      return event;\n    }\n    const exceptions = event.exception?.values;\n    if (!exceptions?.length) {\n      return event;\n    }\n    const html = doc.documentElement.innerHTML;\n    if (!html) {\n      return event;\n    }\n    const htmlLines = ['<!DOCTYPE html>', '<html>', ...html.split('\\n'), '</html>'];\n    exceptions.forEach(exception => {\n      const stacktrace = exception.stacktrace;\n      if (stacktrace?.frames) {\n        stacktrace.frames = stacktrace.frames.map(frame => applySourceContextToFrame(frame, htmlLines, htmlFilename, contextLines));\n      }\n    });\n    return event;\n  }\n\n  /**\n   * Only exported for testing\n   */\n  function applySourceContextToFrame(frame, htmlLines, htmlFilename, linesOfContext) {\n    if (frame.filename !== htmlFilename || !frame.lineno || !htmlLines.length) {\n      return frame;\n    }\n    (0, _sentryCore.addContextToFrame)(htmlLines, frame, linesOfContext);\n    return frame;\n  }\n});","lineCount":83,"map":[[7,2,85,0,"Object"],[7,8,85,0],[7,9,85,0,"defineProperty"],[7,23,85,0],[7,24,85,0,"exports"],[7,31,85,0],[8,4,85,0,"enumerable"],[8,14,85,0],[9,4,85,0,"get"],[9,7,85,0],[9,18,85,0,"get"],[9,19,85,0],[10,6,85,0],[10,13,85,9,"applySourceContextToFrame"],[10,38,85,34],[11,4,85,34],[12,2,85,34],[13,2,85,0,"Object"],[13,8,85,0],[13,9,85,0,"defineProperty"],[13,23,85,0],[13,24,85,0,"exports"],[13,31,85,0],[14,4,85,0,"enumerable"],[14,14,85,0],[15,4,85,0,"get"],[15,7,85,0],[15,18,85,0,"get"],[15,19,85,0],[16,6,85,0],[16,13,85,36,"contextLinesIntegration"],[16,36,85,59],[17,4,85,59],[18,2,85,59],[19,2,1,0],[19,6,1,0,"_sentryCore"],[19,17,1,0],[19,20,1,0,"require"],[19,27,1,0],[19,28,1,0,"_dependencyMap"],[19,42,1,0],[20,2,3,0],[20,8,3,6,"WINDOW"],[20,14,3,12],[20,17,3,15,"GLOBAL_OBJ"],[20,28,3,25],[20,29,3,25,"GLOBAL_OBJ"],[20,39,3,25],[21,2,5,0],[21,8,5,6,"DEFAULT_LINES_OF_CONTEXT"],[21,32,5,30],[21,35,5,33],[21,36,5,34],[22,2,7,0],[22,8,7,6,"INTEGRATION_NAME"],[22,24,7,22],[22,27,7,25],[22,41,7,39],[23,2,9,0],[23,8,9,6,"_contextLinesIntegration"],[23,32,9,30],[23,35,9,34,"_contextLinesIntegration"],[23,36,9,35,"options"],[23,43,9,42],[23,46,9,45],[23,47,9,46],[23,48,9,47],[23,53,9,52],[24,4,10,2],[24,10,10,8,"contextLines"],[24,22,10,20],[24,25,10,23,"options"],[24,32,10,30],[24,33,10,31,"frameContextLines"],[24,50,10,48],[24,54,10,52],[24,58,10,56],[24,61,10,59,"options"],[24,68,10,66],[24,69,10,67,"frameContextLines"],[24,86,10,84],[24,89,10,87,"DEFAULT_LINES_OF_CONTEXT"],[24,113,10,111],[25,4,12,2],[25,11,12,9],[26,6,13,4,"name"],[26,10,13,8],[26,12,13,10,"INTEGRATION_NAME"],[26,28,13,26],[27,6,14,4,"processEvent"],[27,18,14,16,"processEvent"],[27,19,14,17,"event"],[27,24,14,22],[27,26,14,24],[28,8,15,6],[28,15,15,13,"addSourceContext"],[28,31,15,29],[28,32,15,30,"event"],[28,37,15,35],[28,39,15,37,"contextLines"],[28,51,15,49],[28,52,15,50],[29,6,16,4],[30,4,17,2],[30,5,17,3],[31,2,18,0],[31,3,18,2],[33,2,20,0],[34,0,21,0],[35,0,22,0],[36,0,23,0],[37,0,24,0],[38,0,25,0],[39,0,26,0],[40,0,27,0],[41,0,28,0],[42,0,29,0],[43,0,30,0],[44,2,31,0],[44,8,31,6,"contextLinesIntegration"],[44,31,31,29],[44,34,31,32],[44,38,31,32,"defineIntegration"],[44,49,31,49],[44,50,31,49,"defineIntegration"],[44,67,31,49],[44,69,31,50,"_contextLinesIntegration"],[44,93,31,74],[44,94,31,75],[46,2,33,0],[47,0,34,0],[48,0,35,0],[49,2,36,0],[49,11,36,9,"addSourceContext"],[49,27,36,25,"addSourceContext"],[49,28,36,26,"event"],[49,33,36,31],[49,35,36,33,"contextLines"],[49,47,36,45],[49,49,36,47],[50,4,37,2],[50,10,37,8,"doc"],[50,13,37,11],[50,16,37,14,"WINDOW"],[50,22,37,20],[50,23,37,21,"document"],[50,31,37,29],[51,4,38,2],[51,10,38,8,"htmlFilename"],[51,22,38,20],[51,25,38,23,"WINDOW"],[51,31,38,29],[51,32,38,30,"location"],[51,40,38,38],[51,44,38,42],[51,48,38,42,"stripUrlQueryAndFragment"],[51,59,38,66],[51,60,38,66,"stripUrlQueryAndFragment"],[51,84,38,66],[51,86,38,67,"WINDOW"],[51,92,38,73],[51,93,38,74,"location"],[51,101,38,82],[51,102,38,83,"href"],[51,106,38,87],[51,107,38,88],[52,4,39,2],[52,8,39,6],[52,9,39,7,"doc"],[52,12,39,10],[52,16,39,14],[52,17,39,15,"htmlFilename"],[52,29,39,27],[52,31,39,29],[53,6,40,4],[53,13,40,11,"event"],[53,18,40,16],[54,4,41,2],[55,4,43,2],[55,10,43,8,"exceptions"],[55,20,43,18],[55,23,43,21,"event"],[55,28,43,26],[55,29,43,27,"exception"],[55,38,43,36],[55,40,43,38,"values"],[55,46,43,44],[56,4,44,2],[56,8,44,6],[56,9,44,7,"exceptions"],[56,19,44,17],[56,21,44,19,"length"],[56,27,44,25],[56,29,44,27],[57,6,45,4],[57,13,45,11,"event"],[57,18,45,16],[58,4,46,2],[59,4,48,2],[59,10,48,8,"html"],[59,14,48,12],[59,17,48,15,"doc"],[59,20,48,18],[59,21,48,19,"documentElement"],[59,36,48,34],[59,37,48,35,"innerHTML"],[59,46,48,44],[60,4,49,2],[60,8,49,6],[60,9,49,7,"html"],[60,13,49,11],[60,15,49,13],[61,6,50,4],[61,13,50,11,"event"],[61,18,50,16],[62,4,51,2],[63,4,53,2],[63,10,53,8,"htmlLines"],[63,19,53,17],[63,22,53,20],[63,23,53,21],[63,40,53,38],[63,42,53,40],[63,50,53,48],[63,52,53,50],[63,55,53,53,"html"],[63,59,53,57],[63,60,53,58,"split"],[63,65,53,63],[63,66,53,64],[63,70,53,68],[63,71,53,69],[63,73,53,71],[63,82,53,80],[63,83,53,81],[64,4,55,2,"exceptions"],[64,14,55,12],[64,15,55,13,"forEach"],[64,22,55,20],[64,23,55,21,"exception"],[64,32,55,30],[64,36,55,34],[65,6,56,4],[65,12,56,10,"stacktrace"],[65,22,56,20],[65,25,56,23,"exception"],[65,34,56,32],[65,35,56,33,"stacktrace"],[65,45,56,43],[66,6,57,4],[66,10,57,8,"stacktrace"],[66,20,57,18],[66,22,57,20,"frames"],[66,28,57,26],[66,30,57,28],[67,8,58,6,"stacktrace"],[67,18,58,16],[67,19,58,17,"frames"],[67,25,58,23],[67,28,58,26,"stacktrace"],[67,38,58,36],[67,39,58,37,"frames"],[67,45,58,43],[67,46,58,44,"map"],[67,49,58,47],[67,50,58,48,"frame"],[67,55,58,53],[67,59,59,8,"applySourceContextToFrame"],[67,84,59,33],[67,85,59,34,"frame"],[67,90,59,39],[67,92,59,41,"htmlLines"],[67,101,59,50],[67,103,59,52,"htmlFilename"],[67,115,59,64],[67,117,59,66,"contextLines"],[67,129,59,78],[67,130,60,6],[67,131,60,7],[68,6,61,4],[69,4,62,2],[69,5,62,3],[69,6,62,4],[70,4,64,2],[70,11,64,9,"event"],[70,16,64,14],[71,2,65,0],[73,2,67,0],[74,0,68,0],[75,0,69,0],[76,2,70,0],[76,11,70,9,"applySourceContextToFrame"],[76,36,70,34,"applySourceContextToFrame"],[76,37,71,2,"frame"],[76,42,71,7],[76,44,72,2,"htmlLines"],[76,53,72,11],[76,55,73,2,"htmlFilename"],[76,67,73,14],[76,69,74,2,"linesOfContext"],[76,83,74,16],[76,85,75,2],[77,4,76,2],[77,8,76,6,"frame"],[77,13,76,11],[77,14,76,12,"filename"],[77,22,76,20],[77,27,76,25,"htmlFilename"],[77,39,76,37],[77,43,76,41],[77,44,76,42,"frame"],[77,49,76,47],[77,50,76,48,"lineno"],[77,56,76,54],[77,60,76,58],[77,61,76,59,"htmlLines"],[77,70,76,68],[77,71,76,69,"length"],[77,77,76,75],[77,79,76,77],[78,6,77,4],[78,13,77,11,"frame"],[78,18,77,16],[79,4,78,2],[80,4,80,2],[80,8,80,2,"addContextToFrame"],[80,19,80,19],[80,20,80,19,"addContextToFrame"],[80,37,80,19],[80,39,80,20,"htmlLines"],[80,48,80,29],[80,50,80,31,"frame"],[80,55,80,36],[80,57,80,38,"linesOfContext"],[80,71,80,52],[80,72,80,53],[81,4,82,2],[81,11,82,9,"frame"],[81,16,82,14],[82,2,83,0],[83,0,83,1],[83,3]],"functionMap":{"names":["<global>","_contextLinesIntegration","processEvent","addSourceContext","exceptions.forEach$argument_0","stacktrace.frames.map$argument_0","applySourceContextToFrame"],"mappings":"AAA;kCCQ;ICK;KDE;CDE;AGkB;qBCmB;gDCG;+EDC;GDG;CHG;AMK;CNa"},"hasCjsExports":false},"type":"js/module"}]}