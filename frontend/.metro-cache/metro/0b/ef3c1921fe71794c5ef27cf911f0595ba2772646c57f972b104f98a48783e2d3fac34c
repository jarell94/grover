{"dependencies":[{"name":"@sentry/core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":75,"index":75}}],"key":"/o+dASQcHF2bB25icdsM0E4TExc=","exportNames":["*"],"imports":1}},{"name":"@sentry-internal/browser-utils","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":76},"end":{"line":2,"column":73,"index":149}}],"key":"NhwjGxy6N7nYR3SR4JfgASTvmbA=","exportNames":["*"],"imports":1}},{"name":"../debug-build.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":150},"end":{"line":3,"column":48,"index":198}}],"key":"rfhktnzi6PvZxT1xtyHWbBktN/w=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"INTEGRATION_NAME\", {\n    enumerable: true,\n    get: function () {\n      return INTEGRATION_NAME;\n    }\n  });\n  Object.defineProperty(exports, \"isSpotlightInteraction\", {\n    enumerable: true,\n    get: function () {\n      return isSpotlightInteraction;\n    }\n  });\n  Object.defineProperty(exports, \"spotlightBrowserIntegration\", {\n    enumerable: true,\n    get: function () {\n      return spotlightBrowserIntegration;\n    }\n  });\n  var _sentryCore = require(_dependencyMap[0], \"@sentry/core\");\n  var _sentryInternalBrowserUtils = require(_dependencyMap[1], \"@sentry-internal/browser-utils\");\n  var _debugBuildJs = require(_dependencyMap[2], \"../debug-build.js\");\n  const INTEGRATION_NAME = 'SpotlightBrowser';\n  const _spotlightIntegration = (options = {}) => {\n    const sidecarUrl = options.sidecarUrl || 'http://localhost:8969/stream';\n    return {\n      name: INTEGRATION_NAME,\n      setup: () => {\n        _debugBuildJs.DEBUG_BUILD && _sentryCore.debug.log('Using Sidecar URL', sidecarUrl);\n      },\n      // We don't want to send interaction transactions/root spans created from\n      // clicks within Spotlight to Sentry. Neither do we want them to be sent to\n      // spotlight.\n      processEvent: event => isSpotlightInteraction(event) ? null : event,\n      afterAllSetup: client => {\n        setupSidecarForwarding(client, sidecarUrl);\n      }\n    };\n  };\n  function setupSidecarForwarding(client, sidecarUrl) {\n    const makeFetch = (0, _sentryInternalBrowserUtils.getNativeImplementation)('fetch');\n    let failCount = 0;\n    client.on('beforeEnvelope', envelope => {\n      if (failCount > 3) {\n        _sentryCore.debug.warn('[Spotlight] Disabled Sentry -> Spotlight integration due to too many failed requests:', failCount);\n        return;\n      }\n      makeFetch(sidecarUrl, {\n        method: 'POST',\n        body: (0, _sentryCore.serializeEnvelope)(envelope),\n        headers: {\n          'Content-Type': 'application/x-sentry-envelope'\n        },\n        mode: 'cors'\n      }).then(res => {\n        if (res.status >= 200 && res.status < 400) {\n          // Reset failed requests counter on success\n          failCount = 0;\n        }\n      }, err => {\n        failCount++;\n        _sentryCore.debug.error(\"Sentry SDK can't connect to Sidecar is it running? See: https://spotlightjs.com/sidecar/npx/\", err);\n      });\n    });\n  }\n\n  /**\n   * Use this integration to send errors and transactions to Spotlight.\n   *\n   * Learn more about spotlight at https://spotlightjs.com\n   */\n  const spotlightBrowserIntegration = (0, _sentryCore.defineIntegration)(_spotlightIntegration);\n\n  /**\n   * Flags if the event is a transaction created from an interaction with the spotlight UI.\n   */\n  function isSpotlightInteraction(event) {\n    return Boolean(event.type === 'transaction' && event.spans && event.contexts?.trace && event.contexts.trace.op === 'ui.action.click' && event.spans.some(({\n      description\n    }) => description?.includes('#sentry-spotlight')));\n  }\n});","lineCount":87,"map":[[7,2,80,0,"Object"],[7,8,80,0],[7,9,80,0,"defineProperty"],[7,23,80,0],[7,24,80,0,"exports"],[7,31,80,0],[8,4,80,0,"enumerable"],[8,14,80,0],[9,4,80,0,"get"],[9,7,80,0],[9,18,80,0,"get"],[9,19,80,0],[10,6,80,0],[10,13,80,9,"INTEGRATION_NAME"],[10,29,80,25],[11,4,80,25],[12,2,80,25],[13,2,80,0,"Object"],[13,8,80,0],[13,9,80,0,"defineProperty"],[13,23,80,0],[13,24,80,0,"exports"],[13,31,80,0],[14,4,80,0,"enumerable"],[14,14,80,0],[15,4,80,0,"get"],[15,7,80,0],[15,18,80,0,"get"],[15,19,80,0],[16,6,80,0],[16,13,80,27,"isSpotlightInteraction"],[16,35,80,49],[17,4,80,49],[18,2,80,49],[19,2,80,0,"Object"],[19,8,80,0],[19,9,80,0,"defineProperty"],[19,23,80,0],[19,24,80,0,"exports"],[19,31,80,0],[20,4,80,0,"enumerable"],[20,14,80,0],[21,4,80,0,"get"],[21,7,80,0],[21,18,80,0,"get"],[21,19,80,0],[22,6,80,0],[22,13,80,51,"spotlightBrowserIntegration"],[22,40,80,78],[23,4,80,78],[24,2,80,78],[25,2,1,0],[25,6,1,0,"_sentryCore"],[25,17,1,0],[25,20,1,0,"require"],[25,27,1,0],[25,28,1,0,"_dependencyMap"],[25,42,1,0],[26,2,2,0],[26,6,2,0,"_sentryInternalBrowserUtils"],[26,33,2,0],[26,36,2,0,"require"],[26,43,2,0],[26,44,2,0,"_dependencyMap"],[26,58,2,0],[27,2,3,0],[27,6,3,0,"_debugBuildJs"],[27,19,3,0],[27,22,3,0,"require"],[27,29,3,0],[27,30,3,0,"_dependencyMap"],[27,44,3,0],[28,2,5,0],[28,8,5,6,"INTEGRATION_NAME"],[28,24,5,22],[28,27,5,25],[28,45,5,43],[29,2,7,0],[29,8,7,6,"_spotlightIntegration"],[29,29,7,27],[29,32,7,31,"_spotlightIntegration"],[29,33,7,32,"options"],[29,40,7,39],[29,43,7,42],[29,44,7,43],[29,45,7,44],[29,50,7,49],[30,4,8,2],[30,10,8,8,"sidecarUrl"],[30,20,8,18],[30,23,8,21,"options"],[30,30,8,28],[30,31,8,29,"sidecarUrl"],[30,41,8,39],[30,45,8,43],[30,75,8,73],[31,4,10,2],[31,11,10,9],[32,6,11,4,"name"],[32,10,11,8],[32,12,11,10,"INTEGRATION_NAME"],[32,28,11,26],[33,6,12,4,"setup"],[33,11,12,9],[33,13,12,11,"setup"],[33,14,12,11],[33,19,12,17],[34,8,13,6,"DEBUG_BUILD"],[34,21,13,17],[34,22,13,17,"DEBUG_BUILD"],[34,33,13,17],[34,37,13,21,"debug"],[34,48,13,26],[34,49,13,26,"debug"],[34,54,13,26],[34,55,13,27,"log"],[34,58,13,30],[34,59,13,31],[34,78,13,50],[34,80,13,52,"sidecarUrl"],[34,90,13,62],[34,91,13,63],[35,6,14,4],[35,7,14,5],[36,6,15,4],[37,6,16,4],[38,6,17,4],[39,6,18,4,"processEvent"],[39,18,18,16],[39,20,18,18,"event"],[39,25,18,23],[39,29,18,28,"isSpotlightInteraction"],[39,51,18,50],[39,52,18,51,"event"],[39,57,18,56],[39,58,18,57],[39,61,18,60],[39,65,18,64],[39,68,18,67,"event"],[39,73,18,73],[40,6,19,4,"afterAllSetup"],[40,19,19,17],[40,21,19,20,"client"],[40,27,19,26],[40,31,19,31],[41,8,20,6,"setupSidecarForwarding"],[41,30,20,28],[41,31,20,29,"client"],[41,37,20,35],[41,39,20,37,"sidecarUrl"],[41,49,20,47],[41,50,20,48],[42,6,21,4],[43,4,22,2],[43,5,22,3],[44,2,23,0],[44,3,23,2],[45,2,25,0],[45,11,25,9,"setupSidecarForwarding"],[45,33,25,31,"setupSidecarForwarding"],[45,34,25,32,"client"],[45,40,25,38],[45,42,25,40,"sidecarUrl"],[45,52,25,50],[45,54,25,52],[46,4,26,2],[46,10,26,8,"makeFetch"],[46,19,26,17],[46,22,26,20],[46,26,26,20,"getNativeImplementation"],[46,53,26,43],[46,54,26,43,"getNativeImplementation"],[46,77,26,43],[46,79,26,44],[46,86,26,51],[46,87,26,52],[47,4,27,2],[47,8,27,6,"failCount"],[47,17,27,15],[47,20,27,18],[47,21,27,19],[48,4,29,2,"client"],[48,10,29,8],[48,11,29,9,"on"],[48,13,29,11],[48,14,29,12],[48,30,29,28],[48,32,29,31,"envelope"],[48,40,29,39],[48,44,29,44],[49,6,30,4],[49,10,30,8,"failCount"],[49,19,30,17],[49,22,30,20],[49,23,30,21],[49,25,30,23],[50,8,31,6,"debug"],[50,19,31,11],[50,20,31,11,"debug"],[50,25,31,11],[50,26,31,12,"warn"],[50,30,31,16],[50,31,31,17],[50,118,31,104],[50,120,31,106,"failCount"],[50,129,31,115],[50,130,31,116],[51,8,32,6],[52,6,33,4],[53,6,35,4,"makeFetch"],[53,15,35,13],[53,16,35,14,"sidecarUrl"],[53,26,35,24],[53,28,35,26],[54,8,36,6,"method"],[54,14,36,12],[54,16,36,14],[54,22,36,20],[55,8,37,6,"body"],[55,12,37,10],[55,14,37,12],[55,18,37,12,"serializeEnvelope"],[55,29,37,29],[55,30,37,29,"serializeEnvelope"],[55,47,37,29],[55,49,37,30,"envelope"],[55,57,37,38],[55,58,37,39],[56,8,38,6,"headers"],[56,15,38,13],[56,17,38,15],[57,10,39,8],[57,24,39,22],[57,26,39,24],[58,8,40,6],[58,9,40,7],[59,8,41,6,"mode"],[59,12,41,10],[59,14,41,12],[60,6,42,4],[60,7,42,5],[60,8,42,6],[60,9,42,7,"then"],[60,13,42,11],[60,14,43,6,"res"],[60,17,43,9],[60,21,43,13],[61,8,44,8],[61,12,44,12,"res"],[61,15,44,15],[61,16,44,16,"status"],[61,22,44,22],[61,26,44,26],[61,29,44,29],[61,33,44,33,"res"],[61,36,44,36],[61,37,44,37,"status"],[61,43,44,43],[61,46,44,46],[61,49,44,49],[61,51,44,51],[62,10,45,10],[63,10,46,10,"failCount"],[63,19,46,19],[63,22,46,22],[63,23,46,23],[64,8,47,8],[65,6,48,6],[65,7,48,7],[65,9,49,6,"err"],[65,12,49,9],[65,16,49,13],[66,8,50,8,"failCount"],[66,17,50,17],[66,19,50,19],[67,8,51,8,"debug"],[67,19,51,13],[67,20,51,13,"debug"],[67,25,51,13],[67,26,51,14,"error"],[67,31,51,19],[67,32,52,10],[67,126,52,104],[67,128,53,10,"err"],[67,131,54,8],[67,132,54,9],[68,6,55,6],[68,7,56,4],[68,8,56,5],[69,4,57,2],[69,5,57,3],[69,6,57,4],[70,2,58,0],[72,2,60,0],[73,0,61,0],[74,0,62,0],[75,0,63,0],[76,0,64,0],[77,2,65,0],[77,8,65,6,"spotlightBrowserIntegration"],[77,35,65,33],[77,38,65,36],[77,42,65,36,"defineIntegration"],[77,53,65,53],[77,54,65,53,"defineIntegration"],[77,71,65,53],[77,73,65,54,"_spotlightIntegration"],[77,94,65,75],[77,95,65,76],[79,2,67,0],[80,0,68,0],[81,0,69,0],[82,2,70,0],[82,11,70,9,"isSpotlightInteraction"],[82,33,70,31,"isSpotlightInteraction"],[82,34,70,32,"event"],[82,39,70,37],[82,41,70,39],[83,4,71,2],[83,11,71,9,"Boolean"],[83,18,71,16],[83,19,72,4,"event"],[83,24,72,9],[83,25,72,10,"type"],[83,29,72,14],[83,34,72,19],[83,47,72,32],[83,51,73,6,"event"],[83,56,73,11],[83,57,73,12,"spans"],[83,62,73,17],[83,66,74,6,"event"],[83,71,74,11],[83,72,74,12,"contexts"],[83,80,74,20],[83,82,74,22,"trace"],[83,87,74,27],[83,91,75,6,"event"],[83,96,75,11],[83,97,75,12,"contexts"],[83,105,75,20],[83,106,75,21,"trace"],[83,111,75,26],[83,112,75,27,"op"],[83,114,75,29],[83,119,75,34],[83,136,75,51],[83,140,76,6,"event"],[83,145,76,11],[83,146,76,12,"spans"],[83,151,76,17],[83,152,76,18,"some"],[83,156,76,22],[83,157,76,23],[83,158,76,24],[84,6,76,26,"description"],[85,4,76,38],[85,5,76,39],[85,10,76,44,"description"],[85,21,76,55],[85,23,76,57,"includes"],[85,31,76,65],[85,32,76,66],[85,51,76,85],[85,52,76,86],[85,53,77,2],[85,54,77,3],[86,2,78,0],[87,0,78,1],[87,3]],"functionMap":{"names":["<global>","_spotlightIntegration","setup","processEvent","afterAllSetup","setupSidecarForwarding","client.on$argument_1","makeFetch.then$argument_0","makeFetch.then$argument_1","isSpotlightInteraction","event.spans.some$argument_0"],"mappings":"AAA;+BCM;WCK;KDE;kBEI,uDF;mBGC;KHE;CDE;AKE;8BCI;MCc;ODK;MEC;OFM;GDE;CLC;ASY;uBCM,+DD;CTE"},"hasCjsExports":false},"type":"js/module"}]}