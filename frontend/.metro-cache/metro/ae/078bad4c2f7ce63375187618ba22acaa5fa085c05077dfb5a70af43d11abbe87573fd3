{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"getClientIPAddress\", {\n    enumerable: true,\n    get: function () {\n      return getClientIPAddress;\n    }\n  });\n  Object.defineProperty(exports, \"ipHeaderNames\", {\n    enumerable: true,\n    get: function () {\n      return ipHeaderNames;\n    }\n  });\n  // Vendored / modified from @sergiodxa/remix-utils\n\n  // https://github.com/sergiodxa/remix-utils/blob/02af80e12829a53696bfa8f3c2363975cf59f55e/src/server/get-client-ip-address.ts\n  // MIT License\n\n  // Copyright (c) 2021 Sergio Xalambr√≠\n\n  // Permission is hereby granted, free of charge, to any person obtaining a copy\n  // of this software and associated documentation files (the \"Software\"), to deal\n  // in the Software without restriction, including without limitation the rights\n  // to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n  // copies of the Software, and to permit persons to whom the Software is\n  // furnished to do so, subject to the following conditions:\n\n  // The above copyright notice and this permission notice shall be included in all\n  // copies or substantial portions of the Software.\n\n  // THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n  // IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n  // FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n  // AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n  // LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n  // OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n  // SOFTWARE.\n\n  // The headers to check, in priority order\n  const ipHeaderNames = ['X-Client-IP', 'X-Forwarded-For', 'Fly-Client-IP', 'CF-Connecting-IP', 'Fastly-Client-Ip', 'True-Client-Ip', 'X-Real-IP', 'X-Cluster-Client-IP', 'X-Forwarded', 'Forwarded-For', 'Forwarded', 'X-Vercel-Forwarded-For'];\n\n  /**\n   * Get the IP address of the client sending a request.\n   *\n   * It receives a Request headers object and use it to get the\n   * IP address from one of the following headers in order.\n   *\n   * If the IP address is valid, it will be returned. Otherwise, null will be\n   * returned.\n   *\n   * If the header values contains more than one IP address, the first valid one\n   * will be returned.\n   */\n  function getClientIPAddress(headers) {\n    // This will end up being Array<string | string[] | undefined | null> because of the various possible values a header\n    // can take\n    const headerValues = ipHeaderNames.map(headerName => {\n      const rawValue = headers[headerName];\n      const value = Array.isArray(rawValue) ? rawValue.join(';') : rawValue;\n      if (headerName === 'Forwarded') {\n        return parseForwardedHeader(value);\n      }\n      return value?.split(',').map(v => v.trim());\n    });\n\n    // Flatten the array and filter out any falsy entries\n    const flattenedHeaderValues = headerValues.reduce((acc, val) => {\n      if (!val) {\n        return acc;\n      }\n      return acc.concat(val);\n    }, []);\n\n    // Find the first value which is a valid IP address, if any\n    const ipAddress = flattenedHeaderValues.find(ip => ip !== null && isIP(ip));\n    return ipAddress || null;\n  }\n  function parseForwardedHeader(value) {\n    if (!value) {\n      return null;\n    }\n    for (const part of value.split(';')) {\n      if (part.startsWith('for=')) {\n        return part.slice(4);\n      }\n    }\n    return null;\n  }\n\n  //\n  /**\n   * Custom method instead of importing this from `net` package, as this only exists in node\n   * Accepts:\n   * 127.0.0.1\n   * 192.168.1.1\n   * 192.168.1.255\n   * 255.255.255.255\n   * 10.1.1.1\n   * 0.0.0.0\n   * 2b01:cb19:8350:ed00:d0dd:fa5b:de31:8be5\n   *\n   * Rejects:\n   * 1.1.1.01\n   * 30.168.1.255.1\n   * 127.1\n   * 192.168.1.256\n   * -1.2.3.4\n   * 1.1.1.1.\n   * 3...3\n   * 192.168.1.099\n   */\n  function isIP(str) {\n    const regex = /(?:^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$)|(?:^(?:(?:[a-fA-F\\d]{1,4}:){7}(?:[a-fA-F\\d]{1,4}|:)|(?:[a-fA-F\\d]{1,4}:){6}(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|:[a-fA-F\\d]{1,4}|:)|(?:[a-fA-F\\d]{1,4}:){5}(?::(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|(?::[a-fA-F\\d]{1,4}){1,2}|:)|(?:[a-fA-F\\d]{1,4}:){4}(?:(?::[a-fA-F\\d]{1,4}){0,1}:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|(?::[a-fA-F\\d]{1,4}){1,3}|:)|(?:[a-fA-F\\d]{1,4}:){3}(?:(?::[a-fA-F\\d]{1,4}){0,2}:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|(?::[a-fA-F\\d]{1,4}){1,4}|:)|(?:[a-fA-F\\d]{1,4}:){2}(?:(?::[a-fA-F\\d]{1,4}){0,3}:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|(?::[a-fA-F\\d]{1,4}){1,5}|:)|(?:[a-fA-F\\d]{1,4}:){1}(?:(?::[a-fA-F\\d]{1,4}){0,4}:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|(?::[a-fA-F\\d]{1,4}){1,6}|:)|(?::(?:(?::[a-fA-F\\d]{1,4}){0,5}:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|(?::[a-fA-F\\d]{1,4}){1,7}|:)))(?:%[0-9a-zA-Z]{1,})?$)/;\n    return regex.test(str);\n  }\n});","lineCount":121,"map":[[7,2,125,0,"Object"],[7,8,125,0],[7,9,125,0,"defineProperty"],[7,23,125,0],[7,24,125,0,"exports"],[7,31,125,0],[8,4,125,0,"enumerable"],[8,14,125,0],[9,4,125,0,"get"],[9,7,125,0],[9,18,125,0,"get"],[9,19,125,0],[10,6,125,0],[10,13,125,9,"getClientIPAddress"],[10,31,125,27],[11,4,125,27],[12,2,125,27],[13,2,125,0,"Object"],[13,8,125,0],[13,9,125,0,"defineProperty"],[13,23,125,0],[13,24,125,0,"exports"],[13,31,125,0],[14,4,125,0,"enumerable"],[14,14,125,0],[15,4,125,0,"get"],[15,7,125,0],[15,18,125,0,"get"],[15,19,125,0],[16,6,125,0],[16,13,125,29,"ipHeaderNames"],[16,26,125,42],[17,4,125,42],[18,2,125,42],[19,2,1,0],[21,2,3,0],[22,2,4,0],[24,2,6,0],[26,2,8,0],[27,2,9,0],[28,2,10,0],[29,2,11,0],[30,2,12,0],[31,2,13,0],[33,2,15,0],[34,2,16,0],[36,2,18,0],[37,2,19,0],[38,2,20,0],[39,2,21,0],[40,2,22,0],[41,2,23,0],[42,2,24,0],[44,2,26,0],[45,2,27,0],[45,8,27,6,"ipHeaderNames"],[45,21,27,19],[45,24,27,22],[45,25,28,2],[45,38,28,15],[45,40,29,2],[45,57,29,19],[45,59,30,2],[45,74,30,17],[45,76,31,2],[45,94,31,20],[45,96,32,2],[45,114,32,20],[45,116,33,2],[45,132,33,18],[45,134,34,2],[45,145,34,13],[45,147,35,2],[45,168,35,23],[45,170,36,2],[45,183,36,15],[45,185,37,2],[45,200,37,17],[45,202,38,2],[45,213,38,13],[45,215,39,2],[45,239,39,26],[45,240,40,1],[47,2,42,0],[48,0,43,0],[49,0,44,0],[50,0,45,0],[51,0,46,0],[52,0,47,0],[53,0,48,0],[54,0,49,0],[55,0,50,0],[56,0,51,0],[57,0,52,0],[58,0,53,0],[59,2,54,0],[59,11,54,9,"getClientIPAddress"],[59,29,54,27,"getClientIPAddress"],[59,30,54,28,"headers"],[59,37,54,35],[59,39,54,37],[60,4,55,2],[61,4,56,2],[62,4,57,2],[62,10,57,8,"headerValues"],[62,22,57,20],[62,25,57,23,"ipHeaderNames"],[62,38,57,36],[62,39,57,37,"map"],[62,42,57,40],[62,43,57,42,"headerName"],[62,53,57,52],[62,57,57,57],[63,6,58,4],[63,12,58,10,"rawValue"],[63,20,58,18],[63,23,58,21,"headers"],[63,30,58,28],[63,31,58,29,"headerName"],[63,41,58,39],[63,42,58,40],[64,6,59,4],[64,12,59,10,"value"],[64,17,59,15],[64,20,59,18,"Array"],[64,25,59,23],[64,26,59,24,"isArray"],[64,33,59,31],[64,34,59,32,"rawValue"],[64,42,59,40],[64,43,59,41],[64,46,59,44,"rawValue"],[64,54,59,52],[64,55,59,53,"join"],[64,59,59,57],[64,60,59,58],[64,63,59,61],[64,64,59,62],[64,67,59,65,"rawValue"],[64,75,59,73],[65,6,61,4],[65,10,61,8,"headerName"],[65,20,61,18],[65,25,61,23],[65,36,61,34],[65,38,61,36],[66,8,62,6],[66,15,62,13,"parseForwardedHeader"],[66,35,62,33],[66,36,62,34,"value"],[66,41,62,39],[66,42,62,40],[67,6,63,4],[68,6,65,4],[68,13,65,11,"value"],[68,18,65,16],[68,20,65,18,"split"],[68,25,65,23],[68,26,65,24],[68,29,65,27],[68,30,65,28],[68,31,65,29,"map"],[68,34,65,32],[68,35,65,34,"v"],[68,36,65,35],[68,40,65,40,"v"],[68,41,65,41],[68,42,65,42,"trim"],[68,46,65,46],[68,47,65,47],[68,48,65,48],[68,49,65,49],[69,4,66,2],[69,5,66,3],[69,6,66,4],[71,4,68,2],[72,4,69,2],[72,10,69,8,"flattenedHeaderValues"],[72,31,69,29],[72,34,69,32,"headerValues"],[72,46,69,44],[72,47,69,45,"reduce"],[72,53,69,51],[72,54,69,52],[72,55,69,53,"acc"],[72,58,69,56],[72,60,69,58,"val"],[72,63,69,61],[72,68,69,66],[73,6,70,4],[73,10,70,8],[73,11,70,9,"val"],[73,14,70,12],[73,16,70,14],[74,8,71,6],[74,15,71,13,"acc"],[74,18,71,16],[75,6,72,4],[76,6,74,4],[76,13,74,11,"acc"],[76,16,74,14],[76,17,74,15,"concat"],[76,23,74,21],[76,24,74,22,"val"],[76,27,74,25],[76,28,74,26],[77,4,75,2],[77,5,75,3],[77,7,75,5],[77,9,75,7],[77,10,75,8],[79,4,77,2],[80,4,78,2],[80,10,78,8,"ipAddress"],[80,19,78,17],[80,22,78,20,"flattenedHeaderValues"],[80,43,78,41],[80,44,78,42,"find"],[80,48,78,46],[80,49,78,47,"ip"],[80,51,78,49],[80,55,78,53,"ip"],[80,57,78,55],[80,62,78,60],[80,66,78,64],[80,70,78,68,"isIP"],[80,74,78,72],[80,75,78,73,"ip"],[80,77,78,75],[80,78,78,76],[80,79,78,77],[81,4,80,2],[81,11,80,9,"ipAddress"],[81,20,80,18],[81,24,80,22],[81,28,80,26],[82,2,81,0],[83,2,83,0],[83,11,83,9,"parseForwardedHeader"],[83,31,83,29,"parseForwardedHeader"],[83,32,83,30,"value"],[83,37,83,35],[83,39,83,37],[84,4,84,2],[84,8,84,6],[84,9,84,7,"value"],[84,14,84,12],[84,16,84,14],[85,6,85,4],[85,13,85,11],[85,17,85,15],[86,4,86,2],[87,4,88,2],[87,9,88,7],[87,15,88,13,"part"],[87,19,88,17],[87,23,88,21,"value"],[87,28,88,26],[87,29,88,27,"split"],[87,34,88,32],[87,35,88,33],[87,38,88,36],[87,39,88,37],[87,41,88,39],[88,6,89,4],[88,10,89,8,"part"],[88,14,89,12],[88,15,89,13,"startsWith"],[88,25,89,23],[88,26,89,24],[88,32,89,30],[88,33,89,31],[88,35,89,33],[89,8,90,6],[89,15,90,13,"part"],[89,19,90,17],[89,20,90,18,"slice"],[89,25,90,23],[89,26,90,24],[89,27,90,25],[89,28,90,26],[90,6,91,4],[91,4,92,2],[92,4,94,2],[92,11,94,9],[92,15,94,13],[93,2,95,0],[95,2,97,0],[96,2,98,0],[97,0,99,0],[98,0,100,0],[99,0,101,0],[100,0,102,0],[101,0,103,0],[102,0,104,0],[103,0,105,0],[104,0,106,0],[105,0,107,0],[106,0,108,0],[107,0,109,0],[108,0,110,0],[109,0,111,0],[110,0,112,0],[111,0,113,0],[112,0,114,0],[113,0,115,0],[114,0,116,0],[115,0,117,0],[116,0,118,0],[117,2,119,0],[117,11,119,9,"isIP"],[117,15,119,13,"isIP"],[117,16,119,14,"str"],[117,19,119,17],[117,21,119,19],[118,4,120,2],[118,10,120,8,"regex"],[118,15,120,13],[118,18,121,4],[118,1269,121,1255],[119,4,122,2],[119,11,122,9,"regex"],[119,16,122,14],[119,17,122,15,"test"],[119,21,122,19],[119,22,122,20,"str"],[119,25,122,23],[119,26,122,24],[120,2,123,0],[121,0,123,1],[121,3]],"functionMap":{"names":["<global>","getClientIPAddress","ipHeaderNames.map$argument_0","value.split.map$argument_0","headerValues.reduce$argument_0","flattenedHeaderValues.find$argument_0","parseForwardedHeader","isIP"],"mappings":"AAA;ACqD;yCCG;iCCQ,eD;GDC;oDGG;GHM;+CIG,6BJ;CDG;AME;CNY;AOwB;CPI"},"hasCjsExports":false},"type":"js/module"}]}