{"dependencies":[{"name":"../exports.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":38,"index":38}}],"key":"PyiI6yM07W7J+gN2cHiTPsTCV4c=","exportNames":["*"],"imports":1}},{"name":"./debug-logger.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":39},"end":{"line":2,"column":42,"index":81}}],"key":"VSeoyyJzODV++e70LcO1jVtvSwg=","exportNames":["*"],"imports":1}},{"name":"./vercelWaitUntil.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":82},"end":{"line":3,"column":55,"index":137}}],"key":"QcqZQa+BFoXcXKBFyK0lJIV28tE=","exportNames":["*"],"imports":1}},{"name":"./worldwide.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":138},"end":{"line":4,"column":44,"index":182}}],"key":"LZlrQCVO4H3zUFIdbw1eEy4GKGE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"flushIfServerless\", {\n    enumerable: true,\n    get: function () {\n      return flushIfServerless;\n    }\n  });\n  var _exportsJs = require(_dependencyMap[0], \"../exports.js\");\n  var _debugLoggerJs = require(_dependencyMap[1], \"./debug-logger.js\");\n  var _vercelWaitUntilJs = require(_dependencyMap[2], \"./vercelWaitUntil.js\");\n  var _worldwideJs = require(_dependencyMap[3], \"./worldwide.js\");\n  async function flushWithTimeout(timeout) {\n    try {\n      _debugLoggerJs.debug.log('Flushing events...');\n      await (0, _exportsJs.flush)(timeout);\n      _debugLoggerJs.debug.log('Done flushing events');\n    } catch (e) {\n      _debugLoggerJs.debug.log('Error while flushing events:\\n', e);\n    }\n  }\n\n  /**\n   *  Flushes the event queue with a timeout in serverless environments to ensure that events are sent to Sentry before the\n   *  serverless function execution ends.\n   *\n   * The function is async, but in environments that support a `waitUntil` mechanism, it will run synchronously.\n   *\n   * This function is aware of the following serverless platforms:\n   * - Cloudflare: If a Cloudflare context is provided, it will use `ctx.waitUntil()` to flush events (keeps the `this` context of `ctx`).\n   *               If a `cloudflareWaitUntil` function is provided, it will use that to flush events (looses the `this` context of `ctx`).\n   * - Vercel: It detects the Vercel environment and uses Vercel's `waitUntil` function.\n   * - Other Serverless (AWS Lambda, Google Cloud, etc.): It detects the environment via environment variables\n   *   and uses a regular `await flush()`.\n   *\n   *  @internal This function is supposed for internal Sentry SDK usage only.\n   *  @hidden\n   */\n  async function flushIfServerless(params = {}) {\n    const {\n      timeout = 2000\n    } = params;\n    if ('cloudflareWaitUntil' in params && typeof params?.cloudflareWaitUntil === 'function') {\n      params.cloudflareWaitUntil(flushWithTimeout(timeout));\n      return;\n    }\n    if ('cloudflareCtx' in params && typeof params.cloudflareCtx?.waitUntil === 'function') {\n      params.cloudflareCtx.waitUntil(flushWithTimeout(timeout));\n      return;\n    }\n\n    // @ts-expect-error This is not typed\n    if (_worldwideJs.GLOBAL_OBJ[Symbol.for('@vercel/request-context')]) {\n      // Vercel has a waitUntil equivalent that works without execution context\n      (0, _vercelWaitUntilJs.vercelWaitUntil)(flushWithTimeout(timeout));\n      return;\n    }\n    if (typeof process === 'undefined') {\n      return;\n    }\n    const isServerless = !!process.env.FUNCTIONS_WORKER_RUNTIME ||\n    // Azure Functions\n    !!process.env.LAMBDA_TASK_ROOT ||\n    // AWS Lambda\n    !!process.env.K_SERVICE ||\n    // Google Cloud Run\n    !!process.env.CF_PAGES ||\n    // Cloudflare Pages\n    !!process.env.VERCEL || !!process.env.NETLIFY;\n    if (isServerless) {\n      // Use regular flush for environments without a generic waitUntil mechanism\n      await flushWithTimeout(timeout);\n    }\n  }\n});","lineCount":79,"map":[[7,2,74,0,"Object"],[7,8,74,0],[7,9,74,0,"defineProperty"],[7,23,74,0],[7,24,74,0,"exports"],[7,31,74,0],[8,4,74,0,"enumerable"],[8,14,74,0],[9,4,74,0,"get"],[9,7,74,0],[9,18,74,0,"get"],[9,19,74,0],[10,6,74,0],[10,13,74,9,"flushIfServerless"],[10,30,74,26],[11,4,74,26],[12,2,74,26],[13,2,1,0],[13,6,1,0,"_exportsJs"],[13,16,1,0],[13,19,1,0,"require"],[13,26,1,0],[13,27,1,0,"_dependencyMap"],[13,41,1,0],[14,2,2,0],[14,6,2,0,"_debugLoggerJs"],[14,20,2,0],[14,23,2,0,"require"],[14,30,2,0],[14,31,2,0,"_dependencyMap"],[14,45,2,0],[15,2,3,0],[15,6,3,0,"_vercelWaitUntilJs"],[15,24,3,0],[15,27,3,0,"require"],[15,34,3,0],[15,35,3,0,"_dependencyMap"],[15,49,3,0],[16,2,4,0],[16,6,4,0,"_worldwideJs"],[16,18,4,0],[16,21,4,0,"require"],[16,28,4,0],[16,29,4,0,"_dependencyMap"],[16,43,4,0],[17,2,6,0],[17,17,6,15,"flushWithTimeout"],[17,33,6,31,"flushWithTimeout"],[17,34,6,32,"timeout"],[17,41,6,39],[17,43,6,41],[18,4,7,2],[18,8,7,6],[19,6,8,4,"debug"],[19,20,8,9],[19,21,8,9,"debug"],[19,26,8,9],[19,27,8,10,"log"],[19,30,8,13],[19,31,8,14],[19,51,8,34],[19,52,8,35],[20,6,9,4],[20,12,9,10],[20,16,9,10,"flush"],[20,26,9,15],[20,27,9,15,"flush"],[20,32,9,15],[20,34,9,16,"timeout"],[20,41,9,23],[20,42,9,24],[21,6,10,4,"debug"],[21,20,10,9],[21,21,10,9,"debug"],[21,26,10,9],[21,27,10,10,"log"],[21,30,10,13],[21,31,10,14],[21,53,10,36],[21,54,10,37],[22,4,11,2],[22,5,11,3],[22,6,11,4],[22,13,11,11,"e"],[22,14,11,12],[22,16,11,14],[23,6,12,4,"debug"],[23,20,12,9],[23,21,12,9,"debug"],[23,26,12,9],[23,27,12,10,"log"],[23,30,12,13],[23,31,12,14],[23,63,12,46],[23,65,12,48,"e"],[23,66,12,49],[23,67,12,50],[24,4,13,2],[25,2,14,0],[27,2,16,0],[28,0,17,0],[29,0,18,0],[30,0,19,0],[31,0,20,0],[32,0,21,0],[33,0,22,0],[34,0,23,0],[35,0,24,0],[36,0,25,0],[37,0,26,0],[38,0,27,0],[39,0,28,0],[40,0,29,0],[41,0,30,0],[42,0,31,0],[43,2,32,0],[43,17,32,15,"flushIfServerless"],[43,34,32,32,"flushIfServerless"],[43,35,33,2,"params"],[43,41,33,8],[43,44,35,3],[43,45,35,4],[43,46,35,5],[43,48,36,2],[44,4,37,2],[44,10,37,8],[45,6,37,10,"timeout"],[45,13,37,17],[45,16,37,20],[46,4,37,25],[46,5,37,26],[46,8,37,29,"params"],[46,14,37,35],[47,4,39,2],[47,8,39,6],[47,29,39,27],[47,33,39,31,"params"],[47,39,39,37],[47,43,39,41],[47,50,39,48,"params"],[47,56,39,54],[47,58,39,56,"cloudflareWaitUntil"],[47,77,39,75],[47,82,39,80],[47,92,39,90],[47,94,39,92],[48,6,40,4,"params"],[48,12,40,10],[48,13,40,11,"cloudflareWaitUntil"],[48,32,40,30],[48,33,40,31,"flushWithTimeout"],[48,49,40,47],[48,50,40,48,"timeout"],[48,57,40,55],[48,58,40,56],[48,59,40,57],[49,6,41,4],[50,4,42,2],[51,4,44,2],[51,8,44,6],[51,23,44,21],[51,27,44,25,"params"],[51,33,44,31],[51,37,44,35],[51,44,44,42,"params"],[51,50,44,48],[51,51,44,49,"cloudflareCtx"],[51,64,44,62],[51,66,44,64,"waitUntil"],[51,75,44,73],[51,80,44,78],[51,90,44,88],[51,92,44,90],[52,6,45,4,"params"],[52,12,45,10],[52,13,45,11,"cloudflareCtx"],[52,26,45,24],[52,27,45,25,"waitUntil"],[52,36,45,34],[52,37,45,35,"flushWithTimeout"],[52,53,45,51],[52,54,45,52,"timeout"],[52,61,45,59],[52,62,45,60],[52,63,45,61],[53,6,46,4],[54,4,47,2],[56,4,49,2],[57,4,50,2],[57,8,50,6,"GLOBAL_OBJ"],[57,20,50,16],[57,21,50,16,"GLOBAL_OBJ"],[57,31,50,16],[57,32,50,17,"Symbol"],[57,38,50,23],[57,39,50,24,"for"],[57,42,50,27],[57,43,50,28],[57,68,50,53],[57,69,50,54],[57,70,50,55],[57,72,50,57],[58,6,51,4],[59,6,52,4],[59,10,52,4,"vercelWaitUntil"],[59,28,52,19],[59,29,52,19,"vercelWaitUntil"],[59,44,52,19],[59,46,52,20,"flushWithTimeout"],[59,62,52,36],[59,63,52,37,"timeout"],[59,70,52,44],[59,71,52,45],[59,72,52,46],[60,6,53,4],[61,4,54,2],[62,4,56,2],[62,8,56,6],[62,15,56,13,"process"],[62,22,56,20],[62,27,56,25],[62,38,56,36],[62,40,56,38],[63,6,57,4],[64,4,58,2],[65,4,60,2],[65,10,60,8,"isServerless"],[65,22,60,20],[65,25,61,4],[65,26,61,5],[65,27,61,6,"process"],[65,34,61,13],[65,35,61,14,"env"],[65,38,61,17],[65,39,61,18,"FUNCTIONS_WORKER_RUNTIME"],[65,63,61,42],[66,4,61,46],[67,4,62,4],[67,5,62,5],[67,6,62,6,"process"],[67,13,62,13],[67,14,62,14,"env"],[67,17,62,17],[67,18,62,18,"LAMBDA_TASK_ROOT"],[67,34,62,34],[68,4,62,38],[69,4,63,4],[69,5,63,5],[69,6,63,6,"process"],[69,13,63,13],[69,14,63,14,"env"],[69,17,63,17],[69,18,63,18,"K_SERVICE"],[69,27,63,27],[70,4,63,31],[71,4,64,4],[71,5,64,5],[71,6,64,6,"process"],[71,13,64,13],[71,14,64,14,"env"],[71,17,64,17],[71,18,64,18,"CF_PAGES"],[71,26,64,26],[72,4,64,30],[73,4,65,4],[73,5,65,5],[73,6,65,6,"process"],[73,13,65,13],[73,14,65,14,"env"],[73,17,65,17],[73,18,65,18,"VERCEL"],[73,24,65,24],[73,28,66,4],[73,29,66,5],[73,30,66,6,"process"],[73,37,66,13],[73,38,66,14,"env"],[73,41,66,17],[73,42,66,18,"NETLIFY"],[73,49,66,25],[74,4,68,2],[74,8,68,6,"isServerless"],[74,20,68,18],[74,22,68,20],[75,6,69,4],[76,6,70,4],[76,12,70,10,"flushWithTimeout"],[76,28,70,26],[76,29,70,27,"timeout"],[76,36,70,34],[76,37,70,35],[77,4,71,2],[78,2,72,0],[79,0,72,1],[79,3]],"functionMap":{"names":["<global>","flushWithTimeout","flushIfServerless"],"mappings":"AAA;ACK;CDQ;AEkB;CFwC"},"hasCjsExports":false},"type":"js/module"}]}