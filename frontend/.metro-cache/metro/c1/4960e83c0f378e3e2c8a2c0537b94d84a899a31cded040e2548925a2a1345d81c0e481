{"dependencies":[{"name":"../currentScopes.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":48,"index":48}}],"key":"4IMzW1L9FGOQbFYVibN4P3pVG0E=","exportNames":["*"],"imports":1}},{"name":"../logs/exports.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":49},"end":{"line":2,"column":58,"index":107}}],"key":"e9mZfgJAW1SnzuJmRZTP1hXfJRI=","exportNames":["*"],"imports":1}},{"name":"../logs/utils.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":108},"end":{"line":3,"column":53,"index":161}}],"key":"3TuO3m4wqb0GrUH8cAB24R9iovg=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"createConsolaReporter\", {\n    enumerable: true,\n    get: function () {\n      return createConsolaReporter;\n    }\n  });\n  var _currentScopesJs = require(_dependencyMap[0], \"../currentScopes.js\");\n  var _logsExportsJs = require(_dependencyMap[1], \"../logs/exports.js\");\n  var _logsUtilsJs = require(_dependencyMap[2], \"../logs/utils.js\");\n  /**\n   * Options for the Sentry Consola reporter.\n   */\n\n  const DEFAULT_CAPTURED_LEVELS = ['trace', 'debug', 'info', 'warn', 'error', 'fatal'];\n\n  /**\n   * Creates a new Sentry reporter for Consola that forwards logs to Sentry. Requires the `enableLogs` option to be enabled.\n   *\n   * **Note: This integration supports Consola v3.x only.** The reporter interface and log object structure\n   * may differ in other versions of Consola.\n   *\n   * @param options - Configuration options for the reporter.\n   * @returns A Consola reporter that can be added to consola instances.\n   *\n   * @example\n   * ```ts\n   * import * as Sentry from '@sentry/node';\n   * import { consola } from 'consola';\n   *\n   * Sentry.init({\n   *   enableLogs: true,\n   * });\n   *\n   * const sentryReporter = Sentry.createConsolaReporter({\n   *   // Optional: filter levels to capture\n   *   levels: ['error', 'warn', 'info'],\n   * });\n   *\n   * consola.addReporter(sentryReporter);\n   *\n   * // Now consola logs will be captured by Sentry\n   * consola.info('This will be sent to Sentry');\n   * consola.error('This error will also be sent to Sentry');\n   * ```\n   */\n  function createConsolaReporter(options = {}) {\n    const levels = new Set(options.levels ?? DEFAULT_CAPTURED_LEVELS);\n    const providedClient = options.client;\n    return {\n      log(logObj) {\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        const {\n          type,\n          level,\n          message: consolaMessage,\n          args,\n          tag,\n          date: _date,\n          ...attributes\n        } = logObj;\n\n        // Get client - use provided client or current client\n        const client = providedClient || (0, _currentScopesJs.getClient)();\n        if (!client) {\n          return;\n        }\n\n        // Determine the log severity level\n        const logSeverityLevel = getLogSeverityLevel(type, level);\n\n        // Early exit if this level should not be captured\n        if (!levels.has(logSeverityLevel)) {\n          return;\n        }\n        const {\n          normalizeDepth = 3,\n          normalizeMaxBreadth = 1000\n        } = client.getOptions();\n\n        // Format the log message using the same approach as consola's basic reporter\n        const messageParts = [];\n        if (consolaMessage) {\n          messageParts.push(consolaMessage);\n        }\n        if (args && args.length > 0) {\n          messageParts.push((0, _logsUtilsJs.formatConsoleArgs)(args, normalizeDepth, normalizeMaxBreadth));\n        }\n        const message = messageParts.join(' ');\n\n        // Build attributes\n        attributes['sentry.origin'] = 'auto.logging.consola';\n        if (tag) {\n          attributes['consola.tag'] = tag;\n        }\n        if (type) {\n          attributes['consola.type'] = type;\n        }\n\n        // Only add level if it's a valid number (not null/undefined)\n        if (level != null && typeof level === 'number') {\n          attributes['consola.level'] = level;\n        }\n        (0, _logsExportsJs._INTERNAL_captureLog)({\n          level: logSeverityLevel,\n          message,\n          attributes\n        });\n      }\n    };\n  }\n\n  // Mapping from consola log types to Sentry log severity levels\n  const CONSOLA_TYPE_TO_LOG_SEVERITY_LEVEL_MAP = {\n    // Consola built-in types\n    silent: 'trace',\n    fatal: 'fatal',\n    error: 'error',\n    warn: 'warn',\n    log: 'info',\n    info: 'info',\n    success: 'info',\n    fail: 'error',\n    ready: 'info',\n    start: 'info',\n    box: 'info',\n    debug: 'debug',\n    trace: 'trace',\n    verbose: 'debug',\n    // Custom types that might exist\n    critical: 'fatal',\n    notice: 'info'\n  };\n\n  // Mapping from consola log levels (numbers) to Sentry log severity levels\n  const CONSOLA_LEVEL_TO_LOG_SEVERITY_LEVEL_MAP = {\n    0: 'fatal',\n    // Fatal and Error\n    1: 'warn',\n    // Warnings\n    2: 'info',\n    // Normal logs\n    3: 'info',\n    // Informational logs, success, fail, ready, start, ...\n    4: 'debug',\n    // Debug logs\n    5: 'trace' // Trace logs\n  };\n\n  /**\n   * Determines the log severity level from Consola type and level.\n   *\n   * @param type - The Consola log type (e.g., 'error', 'warn', 'info')\n   * @param level - The Consola numeric log level (0-5) or null for some types like 'verbose'\n   * @returns The corresponding Sentry log severity level\n   */\n  function getLogSeverityLevel(type, level) {\n    // Handle special case for verbose logs (level can be null with infinite level in Consola)\n    if (type === 'verbose') {\n      return 'debug';\n    }\n\n    // Handle silent logs - these should be at trace level\n    if (type === 'silent') {\n      return 'trace';\n    }\n\n    // First try to map by type (more specific)\n    if (type) {\n      const mappedLevel = CONSOLA_TYPE_TO_LOG_SEVERITY_LEVEL_MAP[type];\n      if (mappedLevel) {\n        return mappedLevel;\n      }\n    }\n\n    // Fallback to level mapping (handle null level)\n    if (typeof level === 'number') {\n      const mappedLevel = CONSOLA_LEVEL_TO_LOG_SEVERITY_LEVEL_MAP[level];\n      if (mappedLevel) {\n        return mappedLevel;\n      }\n    }\n\n    // Default fallback\n    return 'info';\n  }\n});","lineCount":192,"map":[[7,2,171,0,"Object"],[7,8,171,0],[7,9,171,0,"defineProperty"],[7,23,171,0],[7,24,171,0,"exports"],[7,31,171,0],[8,4,171,0,"enumerable"],[8,14,171,0],[9,4,171,0,"get"],[9,7,171,0],[9,18,171,0,"get"],[9,19,171,0],[10,6,171,0],[10,13,171,9,"createConsolaReporter"],[10,34,171,30],[11,4,171,30],[12,2,171,30],[13,2,1,0],[13,6,1,0,"_currentScopesJs"],[13,22,1,0],[13,25,1,0,"require"],[13,32,1,0],[13,33,1,0,"_dependencyMap"],[13,47,1,0],[14,2,2,0],[14,6,2,0,"_logsExportsJs"],[14,20,2,0],[14,23,2,0,"require"],[14,30,2,0],[14,31,2,0,"_dependencyMap"],[14,45,2,0],[15,2,3,0],[15,6,3,0,"_logsUtilsJs"],[15,18,3,0],[15,21,3,0,"require"],[15,28,3,0],[15,29,3,0,"_dependencyMap"],[15,43,3,0],[16,2,5,0],[17,0,6,0],[18,0,7,0],[20,2,9,0],[20,8,9,6,"DEFAULT_CAPTURED_LEVELS"],[20,31,9,29],[20,34,9,32],[20,35,9,33],[20,42,9,40],[20,44,9,42],[20,51,9,49],[20,53,9,51],[20,59,9,57],[20,61,9,59],[20,67,9,65],[20,69,9,67],[20,76,9,74],[20,78,9,76],[20,85,9,83],[20,86,9,84],[22,2,11,0],[23,0,12,0],[24,0,13,0],[25,0,14,0],[26,0,15,0],[27,0,16,0],[28,0,17,0],[29,0,18,0],[30,0,19,0],[31,0,20,0],[32,0,21,0],[33,0,22,0],[34,0,23,0],[35,0,24,0],[36,0,25,0],[37,0,26,0],[38,0,27,0],[39,0,28,0],[40,0,29,0],[41,0,30,0],[42,0,31,0],[43,0,32,0],[44,0,33,0],[45,0,34,0],[46,0,35,0],[47,0,36,0],[48,0,37,0],[49,0,38,0],[50,0,39,0],[51,0,40,0],[52,2,41,0],[52,11,41,9,"createConsolaReporter"],[52,32,41,30,"createConsolaReporter"],[52,33,41,31,"options"],[52,40,41,38],[52,43,41,41],[52,44,41,42],[52,45,41,43],[52,47,41,45],[53,4,42,2],[53,10,42,8,"levels"],[53,16,42,14],[53,19,42,17],[53,23,42,21,"Set"],[53,26,42,24],[53,27,42,25,"options"],[53,34,42,32],[53,35,42,33,"levels"],[53,41,42,39],[53,45,42,43,"DEFAULT_CAPTURED_LEVELS"],[53,68,42,66],[53,69,42,67],[54,4,43,2],[54,10,43,8,"providedClient"],[54,24,43,22],[54,27,43,25,"options"],[54,34,43,32],[54,35,43,33,"client"],[54,41,43,39],[55,4,45,2],[55,11,45,9],[56,6,46,4,"log"],[56,9,46,7,"log"],[56,10,46,8,"logObj"],[56,16,46,14],[56,18,46,16],[57,8,47,6],[58,8,48,6],[58,14,48,12],[59,10,48,14,"type"],[59,14,48,18],[60,10,48,20,"level"],[60,15,48,25],[61,10,48,27,"message"],[61,17,48,34],[61,19,48,36,"consolaMessage"],[61,33,48,50],[62,10,48,52,"args"],[62,14,48,56],[63,10,48,58,"tag"],[63,13,48,61],[64,10,48,63,"date"],[64,14,48,67],[64,16,48,69,"_date"],[64,21,48,74],[65,10,48,76],[65,13,48,79,"attributes"],[66,8,48,90],[66,9,48,91],[66,12,48,94,"logObj"],[66,18,48,100],[68,8,50,6],[69,8,51,6],[69,14,51,12,"client"],[69,20,51,18],[69,23,51,21,"providedClient"],[69,37,51,35],[69,41,51,39],[69,45,51,39,"getClient"],[69,61,51,48],[69,62,51,48,"getClient"],[69,71,51,48],[69,73,51,49],[69,74,51,50],[70,8,52,6],[70,12,52,10],[70,13,52,11,"client"],[70,19,52,17],[70,21,52,19],[71,10,53,8],[72,8,54,6],[74,8,56,6],[75,8,57,6],[75,14,57,12,"logSeverityLevel"],[75,30,57,28],[75,33,57,31,"getLogSeverityLevel"],[75,52,57,50],[75,53,57,51,"type"],[75,57,57,55],[75,59,57,57,"level"],[75,64,57,62],[75,65,57,63],[77,8,59,6],[78,8,60,6],[78,12,60,10],[78,13,60,11,"levels"],[78,19,60,17],[78,20,60,18,"has"],[78,23,60,21],[78,24,60,22,"logSeverityLevel"],[78,40,60,38],[78,41,60,39],[78,43,60,41],[79,10,61,8],[80,8,62,6],[81,8,64,6],[81,14,64,12],[82,10,64,14,"normalizeDepth"],[82,24,64,28],[82,27,64,31],[82,28,64,32],[83,10,64,34,"normalizeMaxBreadth"],[83,29,64,53],[83,32,64,56],[84,8,64,61],[84,9,64,62],[84,12,64,65,"client"],[84,18,64,71],[84,19,64,72,"getOptions"],[84,29,64,82],[84,30,64,83],[84,31,64,84],[86,8,66,6],[87,8,67,6],[87,14,67,12,"messageParts"],[87,26,67,24],[87,29,67,27],[87,31,67,29],[88,8,68,6],[88,12,68,10,"consolaMessage"],[88,26,68,24],[88,28,68,26],[89,10,69,8,"messageParts"],[89,22,69,20],[89,23,69,21,"push"],[89,27,69,25],[89,28,69,26,"consolaMessage"],[89,42,69,40],[89,43,69,41],[90,8,70,6],[91,8,71,6],[91,12,71,10,"args"],[91,16,71,14],[91,20,71,18,"args"],[91,24,71,22],[91,25,71,23,"length"],[91,31,71,29],[91,34,71,32],[91,35,71,33],[91,37,71,35],[92,10,72,8,"messageParts"],[92,22,72,20],[92,23,72,21,"push"],[92,27,72,25],[92,28,72,26],[92,32,72,26,"formatConsoleArgs"],[92,44,72,43],[92,45,72,43,"formatConsoleArgs"],[92,62,72,43],[92,64,72,44,"args"],[92,68,72,48],[92,70,72,50,"normalizeDepth"],[92,84,72,64],[92,86,72,66,"normalizeMaxBreadth"],[92,105,72,85],[92,106,72,86],[92,107,72,87],[93,8,73,6],[94,8,74,6],[94,14,74,12,"message"],[94,21,74,19],[94,24,74,22,"messageParts"],[94,36,74,34],[94,37,74,35,"join"],[94,41,74,39],[94,42,74,40],[94,45,74,43],[94,46,74,44],[96,8,76,6],[97,8,77,6,"attributes"],[97,18,77,16],[97,19,77,17],[97,34,77,32],[97,35,77,33],[97,38,77,36],[97,60,77,58],[98,8,79,6],[98,12,79,10,"tag"],[98,15,79,13],[98,17,79,15],[99,10,80,8,"attributes"],[99,20,80,18],[99,21,80,19],[99,34,80,32],[99,35,80,33],[99,38,80,36,"tag"],[99,41,80,39],[100,8,81,6],[101,8,83,6],[101,12,83,10,"type"],[101,16,83,14],[101,18,83,16],[102,10,84,8,"attributes"],[102,20,84,18],[102,21,84,19],[102,35,84,33],[102,36,84,34],[102,39,84,37,"type"],[102,43,84,41],[103,8,85,6],[105,8,87,6],[106,8,88,6],[106,12,88,10,"level"],[106,17,88,15],[106,21,88,19],[106,25,88,23],[106,29,88,27],[106,36,88,34,"level"],[106,41,88,39],[106,46,88,44],[106,54,88,52],[106,56,88,54],[107,10,89,8,"attributes"],[107,20,89,18],[107,21,89,19],[107,36,89,34],[107,37,89,35],[107,40,89,38,"level"],[107,45,89,43],[108,8,90,6],[109,8,92,6],[109,12,92,6,"_INTERNAL_captureLog"],[109,26,92,26],[109,27,92,26,"_INTERNAL_captureLog"],[109,47,92,26],[109,49,92,27],[110,10,93,8,"level"],[110,15,93,13],[110,17,93,15,"logSeverityLevel"],[110,33,93,31],[111,10,94,8,"message"],[111,17,94,15],[112,10,95,8,"attributes"],[113,8,96,6],[113,9,96,7],[113,10,96,8],[114,6,97,4],[115,4,98,2],[115,5,98,3],[116,2,99,0],[118,2,101,0],[119,2,102,0],[119,8,102,6,"CONSOLA_TYPE_TO_LOG_SEVERITY_LEVEL_MAP"],[119,46,102,44],[119,49,102,47],[120,4,103,2],[121,4,104,2,"silent"],[121,10,104,8],[121,12,104,10],[121,19,104,17],[122,4,105,2,"fatal"],[122,9,105,7],[122,11,105,9],[122,18,105,16],[123,4,106,2,"error"],[123,9,106,7],[123,11,106,9],[123,18,106,16],[124,4,107,2,"warn"],[124,8,107,6],[124,10,107,8],[124,16,107,14],[125,4,108,2,"log"],[125,7,108,5],[125,9,108,7],[125,15,108,13],[126,4,109,2,"info"],[126,8,109,6],[126,10,109,8],[126,16,109,14],[127,4,110,2,"success"],[127,11,110,9],[127,13,110,11],[127,19,110,17],[128,4,111,2,"fail"],[128,8,111,6],[128,10,111,8],[128,17,111,15],[129,4,112,2,"ready"],[129,9,112,7],[129,11,112,9],[129,17,112,15],[130,4,113,2,"start"],[130,9,113,7],[130,11,113,9],[130,17,113,15],[131,4,114,2,"box"],[131,7,114,5],[131,9,114,7],[131,15,114,13],[132,4,115,2,"debug"],[132,9,115,7],[132,11,115,9],[132,18,115,16],[133,4,116,2,"trace"],[133,9,116,7],[133,11,116,9],[133,18,116,16],[134,4,117,2,"verbose"],[134,11,117,9],[134,13,117,11],[134,20,117,18],[135,4,118,2],[136,4,119,2,"critical"],[136,12,119,10],[136,14,119,12],[136,21,119,19],[137,4,120,2,"notice"],[137,10,120,8],[137,12,120,10],[138,2,121,0],[138,3,121,1],[140,2,123,0],[141,2,124,0],[141,8,124,6,"CONSOLA_LEVEL_TO_LOG_SEVERITY_LEVEL_MAP"],[141,47,124,45],[141,50,124,48],[142,4,125,2],[142,5,125,3],[142,7,125,5],[142,14,125,12],[143,4,125,14],[144,4,126,2],[144,5,126,3],[144,7,126,5],[144,13,126,11],[145,4,126,13],[146,4,127,2],[146,5,127,3],[146,7,127,5],[146,13,127,11],[147,4,127,13],[148,4,128,2],[148,5,128,3],[148,7,128,5],[148,13,128,11],[149,4,128,13],[150,4,129,2],[150,5,129,3],[150,7,129,5],[150,14,129,12],[151,4,129,14],[152,4,130,2],[152,5,130,3],[152,7,130,5],[152,14,130,12],[152,15,130,14],[153,2,131,0],[153,3,131,1],[155,2,133,0],[156,0,134,0],[157,0,135,0],[158,0,136,0],[159,0,137,0],[160,0,138,0],[161,0,139,0],[162,2,140,0],[162,11,140,9,"getLogSeverityLevel"],[162,30,140,28,"getLogSeverityLevel"],[162,31,140,29,"type"],[162,35,140,33],[162,37,140,35,"level"],[162,42,140,40],[162,44,140,42],[163,4,141,2],[164,4,142,2],[164,8,142,6,"type"],[164,12,142,10],[164,17,142,15],[164,26,142,24],[164,28,142,26],[165,6,143,4],[165,13,143,11],[165,20,143,18],[166,4,144,2],[168,4,146,2],[169,4,147,2],[169,8,147,6,"type"],[169,12,147,10],[169,17,147,15],[169,25,147,23],[169,27,147,25],[170,6,148,4],[170,13,148,11],[170,20,148,18],[171,4,149,2],[173,4,151,2],[174,4,152,2],[174,8,152,6,"type"],[174,12,152,10],[174,14,152,12],[175,6,153,4],[175,12,153,10,"mappedLevel"],[175,23,153,21],[175,26,153,24,"CONSOLA_TYPE_TO_LOG_SEVERITY_LEVEL_MAP"],[175,64,153,62],[175,65,153,63,"type"],[175,69,153,67],[175,70,153,68],[176,6,154,4],[176,10,154,8,"mappedLevel"],[176,21,154,19],[176,23,154,21],[177,8,155,6],[177,15,155,13,"mappedLevel"],[177,26,155,24],[178,6,156,4],[179,4,157,2],[181,4,159,2],[182,4,160,2],[182,8,160,6],[182,15,160,13,"level"],[182,20,160,18],[182,25,160,23],[182,33,160,31],[182,35,160,33],[183,6,161,4],[183,12,161,10,"mappedLevel"],[183,23,161,21],[183,26,161,24,"CONSOLA_LEVEL_TO_LOG_SEVERITY_LEVEL_MAP"],[183,65,161,63],[183,66,161,64,"level"],[183,71,161,69],[183,72,161,70],[184,6,162,4],[184,10,162,8,"mappedLevel"],[184,21,162,19],[184,23,162,21],[185,8,163,6],[185,15,163,13,"mappedLevel"],[185,26,163,24],[186,6,164,4],[187,4,165,2],[189,4,167,2],[190,4,168,2],[190,11,168,9],[190,17,168,15],[191,2,169,0],[192,0,169,1],[192,3]],"functionMap":{"names":["<global>","createConsolaReporter","log","getLogSeverityLevel"],"mappings":"AAA;ACwC;ICK;KDmD;CDE;AGyC;CH6B"},"hasCjsExports":false},"type":"js/module"}]}