{"dependencies":[{"name":"@sentry/core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":71,"index":71}}],"key":"/o+dASQcHF2bB25icdsM0E4TExc=","exportNames":["*"],"imports":1}},{"name":"../debug-build.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":72},"end":{"line":2,"column":48,"index":120}}],"key":"rfhktnzi6PvZxT1xtyHWbBktN/w=","exportNames":["*"],"imports":1}},{"name":"../helpers.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":121},"end":{"line":3,"column":39,"index":160}}],"key":"xGB1RU1bemGAHq3E44EIR7oSA2c=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"INTEGRATION_NAME\", {\n    enumerable: true,\n    get: function () {\n      return INTEGRATION_NAME;\n    }\n  });\n  Object.defineProperty(exports, \"registerWebWorker\", {\n    enumerable: true,\n    get: function () {\n      return registerWebWorker;\n    }\n  });\n  Object.defineProperty(exports, \"webWorkerIntegration\", {\n    enumerable: true,\n    get: function () {\n      return webWorkerIntegration;\n    }\n  });\n  var _sentryCore = require(_dependencyMap[0], \"@sentry/core\");\n  var _debugBuildJs = require(_dependencyMap[1], \"../debug-build.js\");\n  var _helpersJs = require(_dependencyMap[2], \"../helpers.js\");\n  const INTEGRATION_NAME = 'WebWorker';\n\n  /**\n   * Use this integration to set up Sentry with web workers.\n   *\n   * IMPORTANT: This integration must be added **before** you start listening to\n   * any messages from the worker. Otherwise, your message handlers will receive\n   * messages from the Sentry SDK which you need to ignore.\n   *\n   * This integration only has an effect, if you call `Sentry.registerWebWorker(self)`\n   * from within the worker(s) you're adding to the integration.\n   *\n   * Given that you want to initialize the SDK as early as possible, you most likely\n   * want to add this integration **after** initializing the SDK:\n   *\n   * @example:\n   * ```ts filename={main.js}\n   * import * as Sentry from '@sentry/<your-sdk>';\n   *\n   * // some time earlier:\n   * Sentry.init(...)\n   *\n   * // 1. Initialize the worker\n   * const worker = new Worker(new URL('./worker.ts', import.meta.url));\n   *\n   * // 2. Add the integration\n   * const webWorkerIntegration = Sentry.webWorkerIntegration({ worker });\n   * Sentry.addIntegration(webWorkerIntegration);\n   *\n   * // 3. Register message listeners on the worker\n   * worker.addEventListener('message', event => {\n   *  // ...\n   * });\n   * ```\n   *\n   * If you initialize multiple workers at the same time, you can also pass an array of workers\n   * to the integration:\n   *\n   * ```ts filename={main.js}\n   * const webWorkerIntegration = Sentry.webWorkerIntegration({ worker: [worker1, worker2] });\n   * Sentry.addIntegration(webWorkerIntegration);\n   * ```\n   *\n   * If you have any additional workers that you initialize at a later point,\n   * you can add them to the integration as follows:\n   *\n   * ```ts filename={main.js}\n   * const webWorkerIntegration = Sentry.webWorkerIntegration({ worker: worker1 });\n   * Sentry.addIntegration(webWorkerIntegration);\n   *\n   * // sometime later:\n   * webWorkerIntegration.addWorker(worker2);\n   * ```\n   *\n   * Of course, you can also directly add the integration in Sentry.init:\n   * ```ts filename={main.js}\n   * import * as Sentry from '@sentry/<your-sdk>';\n   *\n   * // 1. Initialize the worker\n   * const worker = new Worker(new URL('./worker.ts', import.meta.url));\n   *\n   * // 2. Initialize the SDK\n   * Sentry.init({\n   *  integrations: [Sentry.webWorkerIntegration({ worker })]\n   * });\n   *\n   * // 3. Register message listeners on the worker\n   * worker.addEventListener('message', event => {\n   *  // ...\n   * });\n   * ```\n   *\n   * @param options {WebWorkerIntegrationOptions} Integration options:\n   *   - `worker`: The worker instance.\n   */\n  const webWorkerIntegration = (0, _sentryCore.defineIntegration)(({\n    worker\n  }) => ({\n    name: INTEGRATION_NAME,\n    setupOnce: () => {\n      (Array.isArray(worker) ? worker : [worker]).forEach(w => listenForSentryDebugIdMessages(w));\n    },\n    addWorker: worker => listenForSentryDebugIdMessages(worker)\n  }));\n  function listenForSentryDebugIdMessages(worker) {\n    worker.addEventListener('message', event => {\n      if (isSentryDebugIdMessage(event.data)) {\n        event.stopImmediatePropagation(); // other listeners should not receive this message\n        _debugBuildJs.DEBUG_BUILD && _sentryCore.debug.log('Sentry debugId web worker message received', event.data);\n        _helpersJs.WINDOW._sentryDebugIds = {\n          ...event.data._sentryDebugIds,\n          // debugIds of the main thread have precedence over the worker's in case of a collision.\n          ..._helpersJs.WINDOW._sentryDebugIds\n        };\n      }\n    });\n  }\n\n  /**\n   * Minimal interface for DedicatedWorkerGlobalScope, only requiring the postMessage method.\n   * (which is the only thing we need from the worker's global object)\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/DedicatedWorkerGlobalScope\n   *\n   * We can't use the actual type because it breaks everyone who doesn't have {\"lib\": [\"WebWorker\"]}\n   * but uses {\"skipLibCheck\": true} in their tsconfig.json.\n   */\n\n  /**\n   * Use this function to register the worker with the Sentry SDK.\n   *\n   * @example\n   * ```ts filename={worker.js}\n   * import * as Sentry from '@sentry/<your-sdk>';\n   *\n   * // Do this as early as possible in your worker.\n   * Sentry.registerWebWorker({ self });\n   *\n   * // continue setting up your worker\n   * self.postMessage(...)\n   * ```\n   * @param options {RegisterWebWorkerOptions} Integration options:\n   *   - `self`: The worker instance you're calling this function from (self).\n   */\n  function registerWebWorker({\n    self\n  }) {\n    self.postMessage({\n      _sentryMessage: true,\n      _sentryDebugIds: self._sentryDebugIds ?? undefined\n    });\n  }\n  function isSentryDebugIdMessage(eventData) {\n    return (0, _sentryCore.isPlainObject)(eventData) && eventData._sentryMessage === true && '_sentryDebugIds' in eventData && ((0, _sentryCore.isPlainObject)(eventData._sentryDebugIds) || eventData._sentryDebugIds === undefined);\n  }\n});","lineCount":163,"map":[[7,2,144,0,"Object"],[7,8,144,0],[7,9,144,0,"defineProperty"],[7,23,144,0],[7,24,144,0,"exports"],[7,31,144,0],[8,4,144,0,"enumerable"],[8,14,144,0],[9,4,144,0,"get"],[9,7,144,0],[9,18,144,0,"get"],[9,19,144,0],[10,6,144,0],[10,13,144,9,"INTEGRATION_NAME"],[10,29,144,25],[11,4,144,25],[12,2,144,25],[13,2,144,0,"Object"],[13,8,144,0],[13,9,144,0,"defineProperty"],[13,23,144,0],[13,24,144,0,"exports"],[13,31,144,0],[14,4,144,0,"enumerable"],[14,14,144,0],[15,4,144,0,"get"],[15,7,144,0],[15,18,144,0,"get"],[15,19,144,0],[16,6,144,0],[16,13,144,27,"registerWebWorker"],[16,30,144,44],[17,4,144,44],[18,2,144,44],[19,2,144,0,"Object"],[19,8,144,0],[19,9,144,0,"defineProperty"],[19,23,144,0],[19,24,144,0,"exports"],[19,31,144,0],[20,4,144,0,"enumerable"],[20,14,144,0],[21,4,144,0,"get"],[21,7,144,0],[21,18,144,0,"get"],[21,19,144,0],[22,6,144,0],[22,13,144,46,"webWorkerIntegration"],[22,33,144,66],[23,4,144,66],[24,2,144,66],[25,2,1,0],[25,6,1,0,"_sentryCore"],[25,17,1,0],[25,20,1,0,"require"],[25,27,1,0],[25,28,1,0,"_dependencyMap"],[25,42,1,0],[26,2,2,0],[26,6,2,0,"_debugBuildJs"],[26,19,2,0],[26,22,2,0,"require"],[26,29,2,0],[26,30,2,0,"_dependencyMap"],[26,44,2,0],[27,2,3,0],[27,6,3,0,"_helpersJs"],[27,16,3,0],[27,19,3,0,"require"],[27,26,3,0],[27,27,3,0,"_dependencyMap"],[27,41,3,0],[28,2,5,0],[28,8,5,6,"INTEGRATION_NAME"],[28,24,5,22],[28,27,5,25],[28,38,5,36],[30,2,7,0],[31,0,8,0],[32,0,9,0],[33,0,10,0],[34,0,11,0],[35,0,12,0],[36,0,13,0],[37,0,14,0],[38,0,15,0],[39,0,16,0],[40,0,17,0],[41,0,18,0],[42,0,19,0],[43,0,20,0],[44,0,21,0],[45,0,22,0],[46,0,23,0],[47,0,24,0],[48,0,25,0],[49,0,26,0],[50,0,27,0],[51,0,28,0],[52,0,29,0],[53,0,30,0],[54,0,31,0],[55,0,32,0],[56,0,33,0],[57,0,34,0],[58,0,35,0],[59,0,36,0],[60,0,37,0],[61,0,38,0],[62,0,39,0],[63,0,40,0],[64,0,41,0],[65,0,42,0],[66,0,43,0],[67,0,44,0],[68,0,45,0],[69,0,46,0],[70,0,47,0],[71,0,48,0],[72,0,49,0],[73,0,50,0],[74,0,51,0],[75,0,52,0],[76,0,53,0],[77,0,54,0],[78,0,55,0],[79,0,56,0],[80,0,57,0],[81,0,58,0],[82,0,59,0],[83,0,60,0],[84,0,61,0],[85,0,62,0],[86,0,63,0],[87,0,64,0],[88,0,65,0],[89,0,66,0],[90,0,67,0],[91,0,68,0],[92,0,69,0],[93,0,70,0],[94,0,71,0],[95,0,72,0],[96,0,73,0],[97,0,74,0],[98,0,75,0],[99,0,76,0],[100,0,77,0],[101,0,78,0],[102,0,79,0],[103,2,80,0],[103,8,80,6,"webWorkerIntegration"],[103,28,80,26],[103,31,80,29],[103,35,80,29,"defineIntegration"],[103,46,80,46],[103,47,80,46,"defineIntegration"],[103,64,80,46],[103,66,80,47],[103,67,80,48],[104,4,80,50,"worker"],[105,2,80,57],[105,3,80,58],[105,9,80,64],[106,4,81,2,"name"],[106,8,81,6],[106,10,81,8,"INTEGRATION_NAME"],[106,26,81,24],[107,4,82,2,"setupOnce"],[107,13,82,11],[107,15,82,13,"setupOnce"],[107,16,82,13],[107,21,82,19],[108,6,83,4],[108,7,83,5,"Array"],[108,12,83,10],[108,13,83,11,"isArray"],[108,20,83,18],[108,21,83,19,"worker"],[108,27,83,25],[108,28,83,26],[108,31,83,29,"worker"],[108,37,83,35],[108,40,83,38],[108,41,83,39,"worker"],[108,47,83,45],[108,48,83,46],[108,50,83,48,"forEach"],[108,57,83,55],[108,58,83,56,"w"],[108,59,83,57],[108,63,83,61,"listenForSentryDebugIdMessages"],[108,93,83,91],[108,94,83,92,"w"],[108,95,83,93],[108,96,83,94],[108,97,83,95],[109,4,84,2],[109,5,84,3],[110,4,85,2,"addWorker"],[110,13,85,11],[110,15,85,14,"worker"],[110,21,85,20],[110,25,85,25,"listenForSentryDebugIdMessages"],[110,55,85,55],[110,56,85,56,"worker"],[110,62,85,62],[111,2,86,0],[111,3,86,1],[111,4,86,2],[111,5,86,3],[112,2,88,0],[112,11,88,9,"listenForSentryDebugIdMessages"],[112,41,88,39,"listenForSentryDebugIdMessages"],[112,42,88,40,"worker"],[112,48,88,46],[112,50,88,48],[113,4,89,2,"worker"],[113,10,89,8],[113,11,89,9,"addEventListener"],[113,27,89,25],[113,28,89,26],[113,37,89,35],[113,39,89,37,"event"],[113,44,89,42],[113,48,89,46],[114,6,90,4],[114,10,90,8,"isSentryDebugIdMessage"],[114,32,90,30],[114,33,90,31,"event"],[114,38,90,36],[114,39,90,37,"data"],[114,43,90,41],[114,44,90,42],[114,46,90,44],[115,8,91,6,"event"],[115,13,91,11],[115,14,91,12,"stopImmediatePropagation"],[115,38,91,36],[115,39,91,37],[115,40,91,38],[115,41,91,39],[115,42,91,40],[116,8,92,6,"DEBUG_BUILD"],[116,21,92,17],[116,22,92,17,"DEBUG_BUILD"],[116,33,92,17],[116,37,92,21,"debug"],[116,48,92,26],[116,49,92,26,"debug"],[116,54,92,26],[116,55,92,27,"log"],[116,58,92,30],[116,59,92,31],[116,103,92,75],[116,105,92,77,"event"],[116,110,92,82],[116,111,92,83,"data"],[116,115,92,87],[116,116,92,88],[117,8,93,6,"WINDOW"],[117,18,93,12],[117,19,93,12,"WINDOW"],[117,25,93,12],[117,26,93,13,"_sentryDebugIds"],[117,41,93,28],[117,44,93,31],[118,10,94,8],[118,13,94,11,"event"],[118,18,94,16],[118,19,94,17,"data"],[118,23,94,21],[118,24,94,22,"_sentryDebugIds"],[118,39,94,37],[119,10,95,8],[120,10,96,8],[120,13,96,11,"WINDOW"],[120,23,96,17],[120,24,96,17,"WINDOW"],[120,30,96,17],[120,31,96,18,"_sentryDebugIds"],[121,8,97,6],[121,9,97,7],[122,6,98,4],[123,4,99,2],[123,5,99,3],[123,6,99,4],[124,2,100,0],[126,2,102,0],[127,0,103,0],[128,0,104,0],[129,0,105,0],[130,0,106,0],[131,0,107,0],[132,0,108,0],[133,0,109,0],[134,0,110,0],[136,2,112,0],[137,0,113,0],[138,0,114,0],[139,0,115,0],[140,0,116,0],[141,0,117,0],[142,0,118,0],[143,0,119,0],[144,0,120,0],[145,0,121,0],[146,0,122,0],[147,0,123,0],[148,0,124,0],[149,0,125,0],[150,0,126,0],[151,0,127,0],[152,2,128,0],[152,11,128,9,"registerWebWorker"],[152,28,128,26,"registerWebWorker"],[152,29,128,27],[153,4,128,29,"self"],[154,2,128,34],[154,3,128,35],[154,5,128,37],[155,4,129,2,"self"],[155,8,129,6],[155,9,129,7,"postMessage"],[155,20,129,18],[155,21,129,19],[156,6,130,4,"_sentryMessage"],[156,20,130,18],[156,22,130,20],[156,26,130,24],[157,6,131,4,"_sentryDebugIds"],[157,21,131,19],[157,23,131,21,"self"],[157,27,131,25],[157,28,131,26,"_sentryDebugIds"],[157,43,131,41],[157,47,131,45,"undefined"],[158,4,132,2],[158,5,132,3],[158,6,132,4],[159,2,133,0],[160,2,135,0],[160,11,135,9,"isSentryDebugIdMessage"],[160,33,135,31,"isSentryDebugIdMessage"],[160,34,135,32,"eventData"],[160,43,135,41],[160,45,135,43],[161,4,136,2],[161,11,137,4],[161,15,137,4,"isPlainObject"],[161,26,137,17],[161,27,137,17,"isPlainObject"],[161,40,137,17],[161,42,137,18,"eventData"],[161,51,137,27],[161,52,137,28],[161,56,138,4,"eventData"],[161,65,138,13],[161,66,138,14,"_sentryMessage"],[161,80,138,28],[161,85,138,33],[161,89,138,37],[161,93,139,4],[161,110,139,21],[161,114,139,25,"eventData"],[161,123,139,34],[161,128,140,5],[161,132,140,5,"isPlainObject"],[161,143,140,18],[161,144,140,18,"isPlainObject"],[161,157,140,18],[161,159,140,19,"eventData"],[161,168,140,28],[161,169,140,29,"_sentryDebugIds"],[161,184,140,44],[161,185,140,45],[161,189,140,49,"eventData"],[161,198,140,58],[161,199,140,59,"_sentryDebugIds"],[161,214,140,74],[161,219,140,79,"undefined"],[161,228,140,88],[161,229,140,89],[162,2,142,0],[163,0,142,1],[163,3]],"functionMap":{"names":["<global>","defineIntegration$argument_0","setupOnce","forEach$argument_0","addWorker","listenForSentryDebugIdMessages","worker.addEventListener$argument_1","registerWebWorker","isSentryDebugIdMessage"],"mappings":"AAA;+CC+E;aCE;wDCC,sCD;GDC;aGC,kDH;EDC;AKE;qCCC;GDU;CLC;AO4B;CPK;AQE;CRO"},"hasCjsExports":false},"type":"js/module"}]}