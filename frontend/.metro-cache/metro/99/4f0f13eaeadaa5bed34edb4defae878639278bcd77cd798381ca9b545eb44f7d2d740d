{"dependencies":[{"name":"../debug-build.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":48,"index":48}}],"key":"rfhktnzi6PvZxT1xtyHWbBktN/w=","exportNames":["*"],"imports":1}},{"name":"../integration.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":49},"end":{"line":2,"column":54,"index":103}}],"key":"B8aKvpmafw58aWtupuC7GWTMiwo=","exportNames":["*"],"imports":1}},{"name":"../utils/debug-logger.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":104},"end":{"line":3,"column":49,"index":153}}],"key":"bptn1GZFOkS4BOMU8jhPqqHmvAc=","exportNames":["*"],"imports":1}},{"name":"../utils/is.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":154},"end":{"line":4,"column":56,"index":210}}],"key":"4+jCyIAoBTQkyvfOkvHQiJVdtho=","exportNames":["*"],"imports":1}},{"name":"../utils/normalize.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":211},"end":{"line":5,"column":50,"index":261}}],"key":"slNnXzAmgenP8VFYQzLtJC8158A=","exportNames":["*"],"imports":1}},{"name":"../utils/object.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":262},"end":{"line":6,"column":62,"index":324}}],"key":"C8yMer+b+EwEB0LLb8KqXgEktYc=","exportNames":["*"],"imports":1}},{"name":"../utils/string.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":325},"end":{"line":7,"column":46,"index":371}}],"key":"TOLHLvcm9bKbk8t+hoSWk6MQRNY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"extraErrorDataIntegration\", {\n    enumerable: true,\n    get: function () {\n      return extraErrorDataIntegration;\n    }\n  });\n  var _debugBuildJs = require(_dependencyMap[0], \"../debug-build.js\");\n  var _integrationJs = require(_dependencyMap[1], \"../integration.js\");\n  var _utilsDebugLoggerJs = require(_dependencyMap[2], \"../utils/debug-logger.js\");\n  var _utilsIsJs = require(_dependencyMap[3], \"../utils/is.js\");\n  var _utilsNormalizeJs = require(_dependencyMap[4], \"../utils/normalize.js\");\n  var _utilsObjectJs = require(_dependencyMap[5], \"../utils/object.js\");\n  var _utilsStringJs = require(_dependencyMap[6], \"../utils/string.js\");\n  const INTEGRATION_NAME = 'ExtraErrorData';\n\n  /**\n   * Extract additional data for from original exceptions.\n   */\n  const _extraErrorDataIntegration = (options = {}) => {\n    const {\n      depth = 3,\n      captureErrorCause = true\n    } = options;\n    return {\n      name: INTEGRATION_NAME,\n      processEvent(event, hint, client) {\n        const {\n          maxValueLength = 250\n        } = client.getOptions();\n        return _enhanceEventWithErrorData(event, hint, depth, captureErrorCause, maxValueLength);\n      }\n    };\n  };\n  const extraErrorDataIntegration = (0, _integrationJs.defineIntegration)(_extraErrorDataIntegration);\n  function _enhanceEventWithErrorData(event, hint = {}, depth, captureErrorCause, maxValueLength) {\n    if (!hint.originalException || !(0, _utilsIsJs.isError)(hint.originalException)) {\n      return event;\n    }\n    const exceptionName = hint.originalException.name || hint.originalException.constructor.name;\n    const errorData = _extractErrorData(hint.originalException, captureErrorCause, maxValueLength);\n    if (errorData) {\n      const contexts = {\n        ...event.contexts\n      };\n      const normalizedErrorData = (0, _utilsNormalizeJs.normalize)(errorData, depth);\n      if ((0, _utilsIsJs.isPlainObject)(normalizedErrorData)) {\n        // We mark the error data as \"already normalized\" here, because we don't want other normalization procedures to\n        // potentially truncate the data we just already normalized, with a certain depth setting.\n        (0, _utilsObjectJs.addNonEnumerableProperty)(normalizedErrorData, '__sentry_skip_normalization__', true);\n        contexts[exceptionName] = normalizedErrorData;\n      }\n      return {\n        ...event,\n        contexts\n      };\n    }\n    return event;\n  }\n\n  /**\n   * Extract extra information from the Error object\n   */\n  function _extractErrorData(error, captureErrorCause, maxValueLength) {\n    // We are trying to enhance already existing event, so no harm done if it won't succeed\n    try {\n      const nativeKeys = ['name', 'message', 'stack', 'line', 'column', 'fileName', 'lineNumber', 'columnNumber', 'toJSON'];\n      const extraErrorInfo = {};\n\n      // We want only enumerable properties, thus `getOwnPropertyNames` is redundant here, as we filter keys anyway.\n      for (const key of Object.keys(error)) {\n        if (nativeKeys.indexOf(key) !== -1) {\n          continue;\n        }\n        const value = error[key];\n        extraErrorInfo[key] = (0, _utilsIsJs.isError)(value) || typeof value === 'string' ? (0, _utilsStringJs.truncate)(`${value}`, maxValueLength) : value;\n      }\n\n      // Error.cause is a standard property that is non enumerable, we therefore need to access it separately.\n      // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error/cause\n      if (captureErrorCause && error.cause !== undefined) {\n        if ((0, _utilsIsJs.isError)(error.cause)) {\n          const errorName = error.cause.name || error.cause.constructor.name;\n          extraErrorInfo.cause = {\n            [errorName]: _extractErrorData(error.cause, false, maxValueLength)\n          };\n        } else {\n          extraErrorInfo.cause = error.cause;\n        }\n      }\n\n      // Check if someone attached `toJSON` method to grab even more properties (eg. axios is doing that)\n      if (typeof error.toJSON === 'function') {\n        const serializedError = error.toJSON();\n        for (const key of Object.keys(serializedError)) {\n          const value = serializedError[key];\n          extraErrorInfo[key] = (0, _utilsIsJs.isError)(value) ? value.toString() : value;\n        }\n      }\n      return extraErrorInfo;\n    } catch (oO) {\n      _debugBuildJs.DEBUG_BUILD && _utilsDebugLoggerJs.debug.error('Unable to extract extra data from the Error object:', oO);\n    }\n    return null;\n  }\n});","lineCount":111,"map":[[7,2,126,0,"Object"],[7,8,126,0],[7,9,126,0,"defineProperty"],[7,23,126,0],[7,24,126,0,"exports"],[7,31,126,0],[8,4,126,0,"enumerable"],[8,14,126,0],[9,4,126,0,"get"],[9,7,126,0],[9,18,126,0,"get"],[9,19,126,0],[10,6,126,0],[10,13,126,9,"extraErrorDataIntegration"],[10,38,126,34],[11,4,126,34],[12,2,126,34],[13,2,1,0],[13,6,1,0,"_debugBuildJs"],[13,19,1,0],[13,22,1,0,"require"],[13,29,1,0],[13,30,1,0,"_dependencyMap"],[13,44,1,0],[14,2,2,0],[14,6,2,0,"_integrationJs"],[14,20,2,0],[14,23,2,0,"require"],[14,30,2,0],[14,31,2,0,"_dependencyMap"],[14,45,2,0],[15,2,3,0],[15,6,3,0,"_utilsDebugLoggerJs"],[15,25,3,0],[15,28,3,0,"require"],[15,35,3,0],[15,36,3,0,"_dependencyMap"],[15,50,3,0],[16,2,4,0],[16,6,4,0,"_utilsIsJs"],[16,16,4,0],[16,19,4,0,"require"],[16,26,4,0],[16,27,4,0,"_dependencyMap"],[16,41,4,0],[17,2,5,0],[17,6,5,0,"_utilsNormalizeJs"],[17,23,5,0],[17,26,5,0,"require"],[17,33,5,0],[17,34,5,0,"_dependencyMap"],[17,48,5,0],[18,2,6,0],[18,6,6,0,"_utilsObjectJs"],[18,20,6,0],[18,23,6,0,"require"],[18,30,6,0],[18,31,6,0,"_dependencyMap"],[18,45,6,0],[19,2,7,0],[19,6,7,0,"_utilsStringJs"],[19,20,7,0],[19,23,7,0,"require"],[19,30,7,0],[19,31,7,0,"_dependencyMap"],[19,45,7,0],[20,2,9,0],[20,8,9,6,"INTEGRATION_NAME"],[20,24,9,22],[20,27,9,25],[20,43,9,41],[22,2,11,0],[23,0,12,0],[24,0,13,0],[25,2,14,0],[25,8,14,6,"_extraErrorDataIntegration"],[25,34,14,32],[25,37,14,36,"_extraErrorDataIntegration"],[25,38,14,37,"options"],[25,45,14,44],[25,48,14,47],[25,49,14,48],[25,50,14,49],[25,55,14,54],[26,4,15,2],[26,10,15,8],[27,6,15,10,"depth"],[27,11,15,15],[27,14,15,18],[27,15,15,19],[28,6,15,21,"captureErrorCause"],[28,23,15,38],[28,26,15,41],[29,4,15,46],[29,5,15,47],[29,8,15,50,"options"],[29,15,15,57],[30,4,16,2],[30,11,16,9],[31,6,17,4,"name"],[31,10,17,8],[31,12,17,10,"INTEGRATION_NAME"],[31,28,17,26],[32,6,18,4,"processEvent"],[32,18,18,16,"processEvent"],[32,19,18,17,"event"],[32,24,18,22],[32,26,18,24,"hint"],[32,30,18,28],[32,32,18,30,"client"],[32,38,18,36],[32,40,18,38],[33,8,19,6],[33,14,19,12],[34,10,19,14,"maxValueLength"],[34,24,19,28],[34,27,19,31],[35,8,19,35],[35,9,19,36],[35,12,19,39,"client"],[35,18,19,45],[35,19,19,46,"getOptions"],[35,29,19,56],[35,30,19,57],[35,31,19,58],[36,8,20,6],[36,15,20,13,"_enhanceEventWithErrorData"],[36,41,20,39],[36,42,20,40,"event"],[36,47,20,45],[36,49,20,47,"hint"],[36,53,20,51],[36,55,20,53,"depth"],[36,60,20,58],[36,62,20,60,"captureErrorCause"],[36,79,20,77],[36,81,20,79,"maxValueLength"],[36,95,20,93],[36,96,20,94],[37,6,21,4],[38,4,22,2],[38,5,22,3],[39,2,23,0],[39,3,23,2],[40,2,25,0],[40,8,25,6,"extraErrorDataIntegration"],[40,33,25,31],[40,36,25,34],[40,40,25,34,"defineIntegration"],[40,54,25,51],[40,55,25,51,"defineIntegration"],[40,72,25,51],[40,74,25,52,"_extraErrorDataIntegration"],[40,100,25,78],[40,101,25,79],[41,2,27,0],[41,11,27,9,"_enhanceEventWithErrorData"],[41,37,27,35,"_enhanceEventWithErrorData"],[41,38,28,2,"event"],[41,43,28,7],[41,45,29,2,"hint"],[41,49,29,6],[41,52,29,9],[41,53,29,10],[41,54,29,11],[41,56,30,2,"depth"],[41,61,30,7],[41,63,31,2,"captureErrorCause"],[41,80,31,19],[41,82,32,2,"maxValueLength"],[41,96,32,16],[41,98,33,2],[42,4,34,2],[42,8,34,6],[42,9,34,7,"hint"],[42,13,34,11],[42,14,34,12,"originalException"],[42,31,34,29],[42,35,34,33],[42,36,34,34],[42,40,34,34,"isError"],[42,50,34,41],[42,51,34,41,"isError"],[42,58,34,41],[42,60,34,42,"hint"],[42,64,34,46],[42,65,34,47,"originalException"],[42,82,34,64],[42,83,34,65],[42,85,34,67],[43,6,35,4],[43,13,35,11,"event"],[43,18,35,16],[44,4,36,2],[45,4,37,2],[45,10,37,8,"exceptionName"],[45,23,37,21],[45,26,37,25,"hint"],[45,30,37,29],[45,31,37,30,"originalException"],[45,48,37,47],[45,49,37,50,"name"],[45,53,37,54],[45,57,37,58,"hint"],[45,61,37,62],[45,62,37,63,"originalException"],[45,79,37,80],[45,80,37,81,"constructor"],[45,91,37,92],[45,92,37,93,"name"],[45,96,37,97],[46,4,39,2],[46,10,39,8,"errorData"],[46,19,39,17],[46,22,39,20,"_extractErrorData"],[46,39,39,37],[46,40,39,38,"hint"],[46,44,39,42],[46,45,39,43,"originalException"],[46,62,39,60],[46,64,39,63,"captureErrorCause"],[46,81,39,80],[46,83,39,82,"maxValueLength"],[46,97,39,96],[46,98,39,97],[47,4,41,2],[47,8,41,6,"errorData"],[47,17,41,15],[47,19,41,17],[48,6,42,4],[48,12,42,10,"contexts"],[48,20,42,18],[48,23,42,21],[49,8,43,6],[49,11,43,9,"event"],[49,16,43,14],[49,17,43,15,"contexts"],[50,6,44,4],[50,7,44,5],[51,6,46,4],[51,12,46,10,"normalizedErrorData"],[51,31,46,29],[51,34,46,32],[51,38,46,32,"normalize"],[51,55,46,41],[51,56,46,41,"normalize"],[51,65,46,41],[51,67,46,42,"errorData"],[51,76,46,51],[51,78,46,53,"depth"],[51,83,46,58],[51,84,46,59],[52,6,48,4],[52,10,48,8],[52,14,48,8,"isPlainObject"],[52,24,48,21],[52,25,48,21,"isPlainObject"],[52,38,48,21],[52,40,48,22,"normalizedErrorData"],[52,59,48,41],[52,60,48,42],[52,62,48,44],[53,8,49,6],[54,8,50,6],[55,8,51,6],[55,12,51,6,"addNonEnumerableProperty"],[55,26,51,30],[55,27,51,30,"addNonEnumerableProperty"],[55,51,51,30],[55,53,51,31,"normalizedErrorData"],[55,72,51,50],[55,74,51,52],[55,105,51,83],[55,107,51,85],[55,111,51,89],[55,112,51,90],[56,8,52,6,"contexts"],[56,16,52,14],[56,17,52,15,"exceptionName"],[56,30,52,28],[56,31,52,29],[56,34,52,32,"normalizedErrorData"],[56,53,52,51],[57,6,53,4],[58,6,55,4],[58,13,55,11],[59,8,56,6],[59,11,56,9,"event"],[59,16,56,14],[60,8,57,6,"contexts"],[61,6,58,4],[61,7,58,5],[62,4,59,2],[63,4,61,2],[63,11,61,9,"event"],[63,16,61,14],[64,2,62,0],[66,2,64,0],[67,0,65,0],[68,0,66,0],[69,2,67,0],[69,11,67,9,"_extractErrorData"],[69,28,67,26,"_extractErrorData"],[69,29,68,2,"error"],[69,34,68,7],[69,36,69,2,"captureErrorCause"],[69,53,69,19],[69,55,70,2,"maxValueLength"],[69,69,70,16],[69,71,71,2],[70,4,72,2],[71,4,73,2],[71,8,73,6],[72,6,74,4],[72,12,74,10,"nativeKeys"],[72,22,74,20],[72,25,74,23],[72,26,75,6],[72,32,75,12],[72,34,76,6],[72,43,76,15],[72,45,77,6],[72,52,77,13],[72,54,78,6],[72,60,78,12],[72,62,79,6],[72,70,79,14],[72,72,80,6],[72,82,80,16],[72,84,81,6],[72,96,81,18],[72,98,82,6],[72,112,82,20],[72,114,83,6],[72,122,83,14],[72,123,84,5],[73,6,86,4],[73,12,86,10,"extraErrorInfo"],[73,26,86,24],[73,29,86,27],[73,30,86,28],[73,31,86,29],[75,6,88,4],[76,6,89,4],[76,11,89,9],[76,17,89,15,"key"],[76,20,89,18],[76,24,89,22,"Object"],[76,30,89,28],[76,31,89,29,"keys"],[76,35,89,33],[76,36,89,34,"error"],[76,41,89,39],[76,42,89,40],[76,44,89,42],[77,8,90,6],[77,12,90,10,"nativeKeys"],[77,22,90,20],[77,23,90,21,"indexOf"],[77,30,90,28],[77,31,90,29,"key"],[77,34,90,32],[77,35,90,33],[77,40,90,38],[77,41,90,39],[77,42,90,40],[77,44,90,42],[78,10,91,8],[79,8,92,6],[80,8,93,6],[80,14,93,12,"value"],[80,19,93,17],[80,22,93,20,"error"],[80,27,93,25],[80,28,93,26,"key"],[80,31,93,29],[80,32,93,30],[81,8,94,6,"extraErrorInfo"],[81,22,94,20],[81,23,94,21,"key"],[81,26,94,24],[81,27,94,25],[81,30,94,28],[81,34,94,28,"isError"],[81,44,94,35],[81,45,94,35,"isError"],[81,52,94,35],[81,54,94,36,"value"],[81,59,94,41],[81,60,94,42],[81,64,94,46],[81,71,94,53,"value"],[81,76,94,58],[81,81,94,63],[81,89,94,71],[81,92,94,74],[81,96,94,74,"truncate"],[81,110,94,82],[81,111,94,82,"truncate"],[81,119,94,82],[81,121,94,83],[81,124,94,86,"value"],[81,129,94,91],[81,131,94,93],[81,133,94,95,"maxValueLength"],[81,147,94,109],[81,148,94,110],[81,151,94,113,"value"],[81,156,94,118],[82,6,95,4],[84,6,97,4],[85,6,98,4],[86,6,99,4],[86,10,99,8,"captureErrorCause"],[86,27,99,25],[86,31,99,29,"error"],[86,36,99,34],[86,37,99,35,"cause"],[86,42,99,40],[86,47,99,45,"undefined"],[86,56,99,54],[86,58,99,56],[87,8,100,6],[87,12,100,10],[87,16,100,10,"isError"],[87,26,100,17],[87,27,100,17,"isError"],[87,34,100,17],[87,36,100,18,"error"],[87,41,100,23],[87,42,100,24,"cause"],[87,47,100,29],[87,48,100,30],[87,50,100,32],[88,10,101,8],[88,16,101,14,"errorName"],[88,25,101,23],[88,28,101,26,"error"],[88,33,101,31],[88,34,101,32,"cause"],[88,39,101,37],[88,40,101,38,"name"],[88,44,101,42],[88,48,101,46,"error"],[88,53,101,51],[88,54,101,52,"cause"],[88,59,101,57],[88,60,101,58,"constructor"],[88,71,101,69],[88,72,101,70,"name"],[88,76,101,74],[89,10,102,8,"extraErrorInfo"],[89,24,102,22],[89,25,102,23,"cause"],[89,30,102,28],[89,33,102,31],[90,12,102,33],[90,13,102,34,"errorName"],[90,22,102,43],[90,25,102,46,"_extractErrorData"],[90,42,102,63],[90,43,102,64,"error"],[90,48,102,69],[90,49,102,70,"cause"],[90,54,102,75],[90,56,102,78],[90,61,102,83],[90,63,102,85,"maxValueLength"],[90,77,102,99],[91,10,102,101],[91,11,102,102],[92,8,103,6],[92,9,103,7],[92,15,103,13],[93,10,104,8,"extraErrorInfo"],[93,24,104,22],[93,25,104,23,"cause"],[93,30,104,28],[93,33,104,31,"error"],[93,38,104,36],[93,39,104,37,"cause"],[93,44,104,42],[94,8,105,6],[95,6,106,4],[97,6,108,4],[98,6,109,4],[98,10,109,8],[98,17,109,15,"error"],[98,22,109,20],[98,23,109,21,"toJSON"],[98,29,109,27],[98,34,109,32],[98,44,109,42],[98,46,109,44],[99,8,110,6],[99,14,110,12,"serializedError"],[99,29,110,27],[99,32,110,30,"error"],[99,37,110,35],[99,38,110,36,"toJSON"],[99,44,110,42],[99,45,110,43],[99,46,110,44],[100,8,112,6],[100,13,112,11],[100,19,112,17,"key"],[100,22,112,20],[100,26,112,24,"Object"],[100,32,112,30],[100,33,112,31,"keys"],[100,37,112,35],[100,38,112,36,"serializedError"],[100,53,112,51],[100,54,112,52],[100,56,112,54],[101,10,113,8],[101,16,113,14,"value"],[101,21,113,19],[101,24,113,22,"serializedError"],[101,39,113,37],[101,40,113,38,"key"],[101,43,113,41],[101,44,113,42],[102,10,114,8,"extraErrorInfo"],[102,24,114,22],[102,25,114,23,"key"],[102,28,114,26],[102,29,114,27],[102,32,114,30],[102,36,114,30,"isError"],[102,46,114,37],[102,47,114,37,"isError"],[102,54,114,37],[102,56,114,38,"value"],[102,61,114,43],[102,62,114,44],[102,65,114,47,"value"],[102,70,114,52],[102,71,114,53,"toString"],[102,79,114,61],[102,80,114,62],[102,81,114,63],[102,84,114,66,"value"],[102,89,114,71],[103,8,115,6],[104,6,116,4],[105,6,118,4],[105,13,118,11,"extraErrorInfo"],[105,27,118,25],[106,4,119,2],[106,5,119,3],[106,6,119,4],[106,13,119,11,"oO"],[106,15,119,13],[106,17,119,15],[107,6,120,4,"DEBUG_BUILD"],[107,19,120,15],[107,20,120,15,"DEBUG_BUILD"],[107,31,120,15],[107,35,120,19,"debug"],[107,54,120,24],[107,55,120,24,"debug"],[107,60,120,24],[107,61,120,25,"error"],[107,66,120,30],[107,67,120,31],[107,120,120,84],[107,122,120,86,"oO"],[107,124,120,88],[107,125,120,89],[108,4,121,2],[109,4,123,2],[109,11,123,9],[109,15,123,13],[110,2,124,0],[111,0,124,1],[111,3]],"functionMap":{"names":["<global>","_extraErrorDataIntegration","processEvent","_enhanceEventWithErrorData","_extractErrorData"],"mappings":"AAA;oCCa;ICI;KDG;CDE;AGI;CHmC;AIK;CJyD"},"hasCjsExports":false},"type":"js/module"}]}