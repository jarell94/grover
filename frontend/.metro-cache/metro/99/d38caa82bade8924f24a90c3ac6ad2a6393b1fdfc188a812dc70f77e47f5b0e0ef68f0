{"dependencies":[{"name":"../../../types.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":43,"index":43}}],"key":"How8xsoS0dUDpKnVy0jHSdmxOM4=","exportNames":["*"],"imports":1}},{"name":"./onHidden.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":44},"end":{"line":2,"column":41,"index":85}}],"key":"jMxYG0qCUzQ5xC/izD0vNxgsljI=","exportNames":["*"],"imports":1}},{"name":"./runOnce.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":86},"end":{"line":3,"column":39,"index":125}}],"key":"GeQjtXVIw/b4yQAGDTFWJH+9oF4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"whenIdleOrHidden\", {\n    enumerable: true,\n    get: function () {\n      return whenIdleOrHidden;\n    }\n  });\n  var _typesJs = require(_dependencyMap[0], \"../../../types.js\");\n  var _onHiddenJs = require(_dependencyMap[1], \"./onHidden.js\");\n  var _runOnceJs = require(_dependencyMap[2], \"./runOnce.js\");\n  /*\n   * Copyright 2024 Google LLC\n   *\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   *     https://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n\n  /**\n   * Runs the passed callback during the next idle period, or immediately\n   * if the browser's visibility state is (or becomes) hidden.\n   */\n  const whenIdleOrHidden = cb => {\n    const rIC = _typesJs.WINDOW.requestIdleCallback || _typesJs.WINDOW.setTimeout;\n\n    // If the document is hidden, run the callback immediately, otherwise\n    // race an idle callback with the next `visibilitychange` event.\n    if (_typesJs.WINDOW.document?.visibilityState === 'hidden') {\n      cb();\n    } else {\n      // eslint-disable-next-line no-param-reassign\n      cb = (0, _runOnceJs.runOnce)(cb);\n      rIC(cb);\n      // sentry: we use onHidden instead of directly listening to visibilitychange\n      // because some browsers we still support (Safari <14.4) don't fully support\n      // `visibilitychange` or have known bugs w.r.t the `visibilitychange` event.\n      (0, _onHiddenJs.onHidden)(cb);\n    }\n  };\n});","lineCount":53,"map":[[7,2,44,0,"Object"],[7,8,44,0],[7,9,44,0,"defineProperty"],[7,23,44,0],[7,24,44,0,"exports"],[7,31,44,0],[8,4,44,0,"enumerable"],[8,14,44,0],[9,4,44,0,"get"],[9,7,44,0],[9,18,44,0,"get"],[9,19,44,0],[10,6,44,0],[10,13,44,9,"whenIdleOrHidden"],[10,29,44,25],[11,4,44,25],[12,2,44,25],[13,2,1,0],[13,6,1,0,"_typesJs"],[13,14,1,0],[13,17,1,0,"require"],[13,24,1,0],[13,25,1,0,"_dependencyMap"],[13,39,1,0],[14,2,2,0],[14,6,2,0,"_onHiddenJs"],[14,17,2,0],[14,20,2,0,"require"],[14,27,2,0],[14,28,2,0,"_dependencyMap"],[14,42,2,0],[15,2,3,0],[15,6,3,0,"_runOnceJs"],[15,16,3,0],[15,19,3,0,"require"],[15,26,3,0],[15,27,3,0,"_dependencyMap"],[15,41,3,0],[16,2,5,0],[17,0,6,0],[18,0,7,0],[19,0,8,0],[20,0,9,0],[21,0,10,0],[22,0,11,0],[23,0,12,0],[24,0,13,0],[25,0,14,0],[26,0,15,0],[27,0,16,0],[28,0,17,0],[29,0,18,0],[30,0,19,0],[32,2,22,0],[33,0,23,0],[34,0,24,0],[35,0,25,0],[36,2,26,0],[36,8,26,6,"whenIdleOrHidden"],[36,24,26,22],[36,27,26,26,"cb"],[36,29,26,28],[36,33,26,33],[37,4,27,2],[37,10,27,8,"rIC"],[37,13,27,11],[37,16,27,14,"WINDOW"],[37,24,27,20],[37,25,27,20,"WINDOW"],[37,31,27,20],[37,32,27,21,"requestIdleCallback"],[37,51,27,40],[37,55,27,44,"WINDOW"],[37,63,27,50],[37,64,27,50,"WINDOW"],[37,70,27,50],[37,71,27,51,"setTimeout"],[37,81,27,61],[39,4,29,2],[40,4,30,2],[41,4,31,2],[41,8,31,6,"WINDOW"],[41,16,31,12],[41,17,31,12,"WINDOW"],[41,23,31,12],[41,24,31,13,"document"],[41,32,31,21],[41,34,31,23,"visibilityState"],[41,49,31,38],[41,54,31,43],[41,62,31,51],[41,64,31,53],[42,6,32,4,"cb"],[42,8,32,6],[42,9,32,7],[42,10,32,8],[43,4,33,2],[43,5,33,3],[43,11,33,9],[44,6,34,4],[45,6,35,4,"cb"],[45,8,35,6],[45,11,35,9],[45,15,35,9,"runOnce"],[45,25,35,16],[45,26,35,16,"runOnce"],[45,33,35,16],[45,35,35,17,"cb"],[45,37,35,19],[45,38,35,20],[46,6,36,4,"rIC"],[46,9,36,7],[46,10,36,8,"cb"],[46,12,36,10],[46,13,36,11],[47,6,37,4],[48,6,38,4],[49,6,39,4],[50,6,40,4],[50,10,40,4,"onHidden"],[50,21,40,12],[50,22,40,12,"onHidden"],[50,30,40,12],[50,32,40,13,"cb"],[50,34,40,15],[50,35,40,16],[51,4,41,2],[52,2,42,0],[52,3,42,1],[53,0,42,2],[53,3]],"functionMap":{"names":["<global>","whenIdleOrHidden"],"mappings":"AAA;yBCyB;CDgB"},"hasCjsExports":false},"type":"js/module"}]}