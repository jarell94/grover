{"dependencies":[{"name":"@babel/runtime/helpers/objectWithoutPropertiesLoose","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"HFkXuFcBAqfzGtqyPj8g62MKT0M=","exportNames":["*"],"imports":1}},{"name":"../currentScopes.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":48,"index":48}}],"key":"4IMzW1L9FGOQbFYVibN4P3pVG0E=","exportNames":["*"],"imports":1}},{"name":"../logs/exports.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":49},"end":{"line":2,"column":58,"index":107}}],"key":"e9mZfgJAW1SnzuJmRZTP1hXfJRI=","exportNames":["*"],"imports":1}},{"name":"../logs/utils.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":108},"end":{"line":3,"column":53,"index":161}}],"key":"3TuO3m4wqb0GrUH8cAB24R9iovg=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  const _excluded = [\"type\", \"level\", \"message\", \"args\", \"tag\", \"date\"];\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"createConsolaReporter\", {\n    enumerable: true,\n    get: function () {\n      return createConsolaReporter;\n    }\n  });\n  var _babelRuntimeHelpersObjectWithoutPropertiesLoose = require(_dependencyMap[0], \"@babel/runtime/helpers/objectWithoutPropertiesLoose\");\n  var _objectWithoutPropertiesLoose = _interopDefault(_babelRuntimeHelpersObjectWithoutPropertiesLoose);\n  var _currentScopesJs = require(_dependencyMap[1], \"../currentScopes.js\");\n  var _logsExportsJs = require(_dependencyMap[2], \"../logs/exports.js\");\n  var _logsUtilsJs = require(_dependencyMap[3], \"../logs/utils.js\");\n  /**\n   * Options for the Sentry Consola reporter.\n   */\n\n  const DEFAULT_CAPTURED_LEVELS = ['trace', 'debug', 'info', 'warn', 'error', 'fatal'];\n\n  /**\n   * Creates a new Sentry reporter for Consola that forwards logs to Sentry. Requires the `enableLogs` option to be enabled.\n   *\n   * **Note: This integration supports Consola v3.x only.** The reporter interface and log object structure\n   * may differ in other versions of Consola.\n   *\n   * @param options - Configuration options for the reporter.\n   * @returns A Consola reporter that can be added to consola instances.\n   *\n   * @example\n   * ```ts\n   * import * as Sentry from '@sentry/node';\n   * import { consola } from 'consola';\n   *\n   * Sentry.init({\n   *   enableLogs: true,\n   * });\n   *\n   * const sentryReporter = Sentry.createConsolaReporter({\n   *   // Optional: filter levels to capture\n   *   levels: ['error', 'warn', 'info'],\n   * });\n   *\n   * consola.addReporter(sentryReporter);\n   *\n   * // Now consola logs will be captured by Sentry\n   * consola.info('This will be sent to Sentry');\n   * consola.error('This error will also be sent to Sentry');\n   * ```\n   */\n  function createConsolaReporter(options = {}) {\n    const levels = new Set(options.levels ?? DEFAULT_CAPTURED_LEVELS);\n    const providedClient = options.client;\n    return {\n      log(logObj) {\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        const {\n            type,\n            level,\n            message: consolaMessage,\n            args,\n            tag\n          } = logObj,\n          attributes = (0, _objectWithoutPropertiesLoose.default)(logObj, _excluded);\n\n        // Get client - use provided client or current client\n        const client = providedClient || (0, _currentScopesJs.getClient)();\n        if (!client) {\n          return;\n        }\n\n        // Determine the log severity level\n        const logSeverityLevel = getLogSeverityLevel(type, level);\n\n        // Early exit if this level should not be captured\n        if (!levels.has(logSeverityLevel)) {\n          return;\n        }\n        const {\n          normalizeDepth = 3,\n          normalizeMaxBreadth = 1000\n        } = client.getOptions();\n\n        // Format the log message using the same approach as consola's basic reporter\n        const messageParts = [];\n        if (consolaMessage) {\n          messageParts.push(consolaMessage);\n        }\n        if (args && args.length > 0) {\n          messageParts.push((0, _logsUtilsJs.formatConsoleArgs)(args, normalizeDepth, normalizeMaxBreadth));\n        }\n        const message = messageParts.join(' ');\n\n        // Build attributes\n        attributes['sentry.origin'] = 'auto.logging.consola';\n        if (tag) {\n          attributes['consola.tag'] = tag;\n        }\n        if (type) {\n          attributes['consola.type'] = type;\n        }\n\n        // Only add level if it's a valid number (not null/undefined)\n        if (level != null && typeof level === 'number') {\n          attributes['consola.level'] = level;\n        }\n        (0, _logsExportsJs._INTERNAL_captureLog)({\n          level: logSeverityLevel,\n          message,\n          attributes\n        });\n      }\n    };\n  }\n\n  // Mapping from consola log types to Sentry log severity levels\n  const CONSOLA_TYPE_TO_LOG_SEVERITY_LEVEL_MAP = {\n    // Consola built-in types\n    silent: 'trace',\n    fatal: 'fatal',\n    error: 'error',\n    warn: 'warn',\n    log: 'info',\n    info: 'info',\n    success: 'info',\n    fail: 'error',\n    ready: 'info',\n    start: 'info',\n    box: 'info',\n    debug: 'debug',\n    trace: 'trace',\n    verbose: 'debug',\n    // Custom types that might exist\n    critical: 'fatal',\n    notice: 'info'\n  };\n\n  // Mapping from consola log levels (numbers) to Sentry log severity levels\n  const CONSOLA_LEVEL_TO_LOG_SEVERITY_LEVEL_MAP = {\n    0: 'fatal',\n    // Fatal and Error\n    1: 'warn',\n    // Warnings\n    2: 'info',\n    // Normal logs\n    3: 'info',\n    // Informational logs, success, fail, ready, start, ...\n    4: 'debug',\n    // Debug logs\n    5: 'trace' // Trace logs\n  };\n\n  /**\n   * Determines the log severity level from Consola type and level.\n   *\n   * @param type - The Consola log type (e.g., 'error', 'warn', 'info')\n   * @param level - The Consola numeric log level (0-5) or null for some types like 'verbose'\n   * @returns The corresponding Sentry log severity level\n   */\n  function getLogSeverityLevel(type, level) {\n    // Handle special case for verbose logs (level can be null with infinite level in Consola)\n    if (type === 'verbose') {\n      return 'debug';\n    }\n\n    // Handle silent logs - these should be at trace level\n    if (type === 'silent') {\n      return 'trace';\n    }\n\n    // First try to map by type (more specific)\n    if (type) {\n      const mappedLevel = CONSOLA_TYPE_TO_LOG_SEVERITY_LEVEL_MAP[type];\n      if (mappedLevel) {\n        return mappedLevel;\n      }\n    }\n\n    // Fallback to level mapping (handle null level)\n    if (typeof level === 'number') {\n      const mappedLevel = CONSOLA_LEVEL_TO_LOG_SEVERITY_LEVEL_MAP[level];\n      if (mappedLevel) {\n        return mappedLevel;\n      }\n    }\n\n    // Default fallback\n    return 'info';\n  }\n});","lineCount":199,"map":[[13,2,171,0,"Object"],[13,8,171,0],[13,9,171,0,"defineProperty"],[13,23,171,0],[13,24,171,0,"exports"],[13,31,171,0],[14,4,171,0,"enumerable"],[14,14,171,0],[15,4,171,0,"get"],[15,7,171,0],[15,18,171,0,"get"],[15,19,171,0],[16,6,171,0],[16,13,171,9,"createConsolaReporter"],[16,34,171,30],[17,4,171,30],[18,2,171,30],[19,2,171,33],[19,6,171,33,"_babelRuntimeHelpersObjectWithoutPropertiesLoose"],[19,54,171,33],[19,57,171,33,"require"],[19,64,171,33],[19,65,171,33,"_dependencyMap"],[19,79,171,33],[20,2,171,33],[20,6,171,33,"_objectWithoutPropertiesLoose"],[20,35,171,33],[20,38,171,33,"_interopDefault"],[20,53,171,33],[20,54,171,33,"_babelRuntimeHelpersObjectWithoutPropertiesLoose"],[20,102,171,33],[21,2,1,0],[21,6,1,0,"_currentScopesJs"],[21,22,1,0],[21,25,1,0,"require"],[21,32,1,0],[21,33,1,0,"_dependencyMap"],[21,47,1,0],[22,2,2,0],[22,6,2,0,"_logsExportsJs"],[22,20,2,0],[22,23,2,0,"require"],[22,30,2,0],[22,31,2,0,"_dependencyMap"],[22,45,2,0],[23,2,3,0],[23,6,3,0,"_logsUtilsJs"],[23,18,3,0],[23,21,3,0,"require"],[23,28,3,0],[23,29,3,0,"_dependencyMap"],[23,43,3,0],[24,2,5,0],[25,0,6,0],[26,0,7,0],[28,2,9,0],[28,8,9,6,"DEFAULT_CAPTURED_LEVELS"],[28,31,9,29],[28,34,9,32],[28,35,9,33],[28,42,9,40],[28,44,9,42],[28,51,9,49],[28,53,9,51],[28,59,9,57],[28,61,9,59],[28,67,9,65],[28,69,9,67],[28,76,9,74],[28,78,9,76],[28,85,9,83],[28,86,9,84],[30,2,11,0],[31,0,12,0],[32,0,13,0],[33,0,14,0],[34,0,15,0],[35,0,16,0],[36,0,17,0],[37,0,18,0],[38,0,19,0],[39,0,20,0],[40,0,21,0],[41,0,22,0],[42,0,23,0],[43,0,24,0],[44,0,25,0],[45,0,26,0],[46,0,27,0],[47,0,28,0],[48,0,29,0],[49,0,30,0],[50,0,31,0],[51,0,32,0],[52,0,33,0],[53,0,34,0],[54,0,35,0],[55,0,36,0],[56,0,37,0],[57,0,38,0],[58,0,39,0],[59,0,40,0],[60,2,41,0],[60,11,41,9,"createConsolaReporter"],[60,32,41,30,"createConsolaReporter"],[60,33,41,31,"options"],[60,40,41,38],[60,43,41,41],[60,44,41,42],[60,45,41,43],[60,47,41,45],[61,4,42,2],[61,10,42,8,"levels"],[61,16,42,14],[61,19,42,17],[61,23,42,21,"Set"],[61,26,42,24],[61,27,42,25,"options"],[61,34,42,32],[61,35,42,33,"levels"],[61,41,42,39],[61,45,42,43,"DEFAULT_CAPTURED_LEVELS"],[61,68,42,66],[61,69,42,67],[62,4,43,2],[62,10,43,8,"providedClient"],[62,24,43,22],[62,27,43,25,"options"],[62,34,43,32],[62,35,43,33,"client"],[62,41,43,39],[63,4,45,2],[63,11,45,9],[64,6,46,4,"log"],[64,9,46,7,"log"],[64,10,46,8,"logObj"],[64,16,46,14],[64,18,46,16],[65,8,47,6],[66,8,48,6],[66,14,48,12],[67,12,48,14,"type"],[67,16,48,18],[68,12,48,20,"level"],[68,17,48,25],[69,12,48,27,"message"],[69,19,48,34],[69,21,48,36,"consolaMessage"],[69,35,48,50],[70,12,48,52,"args"],[70,16,48,56],[71,12,48,58,"tag"],[72,10,48,90],[72,11,48,91],[72,14,48,94,"logObj"],[72,20,48,100],[73,10,48,79,"attributes"],[73,20,48,89],[73,27,48,89,"_objectWithoutPropertiesLoose"],[73,56,48,89],[73,57,48,89,"default"],[73,64,48,89],[73,66,48,94,"logObj"],[73,72,48,100],[73,74,48,100,"_excluded"],[73,83,48,100],[75,8,50,6],[76,8,51,6],[76,14,51,12,"client"],[76,20,51,18],[76,23,51,21,"providedClient"],[76,37,51,35],[76,41,51,39],[76,45,51,39,"getClient"],[76,61,51,48],[76,62,51,48,"getClient"],[76,71,51,48],[76,73,51,49],[76,74,51,50],[77,8,52,6],[77,12,52,10],[77,13,52,11,"client"],[77,19,52,17],[77,21,52,19],[78,10,53,8],[79,8,54,6],[81,8,56,6],[82,8,57,6],[82,14,57,12,"logSeverityLevel"],[82,30,57,28],[82,33,57,31,"getLogSeverityLevel"],[82,52,57,50],[82,53,57,51,"type"],[82,57,57,55],[82,59,57,57,"level"],[82,64,57,62],[82,65,57,63],[84,8,59,6],[85,8,60,6],[85,12,60,10],[85,13,60,11,"levels"],[85,19,60,17],[85,20,60,18,"has"],[85,23,60,21],[85,24,60,22,"logSeverityLevel"],[85,40,60,38],[85,41,60,39],[85,43,60,41],[86,10,61,8],[87,8,62,6],[88,8,64,6],[88,14,64,12],[89,10,64,14,"normalizeDepth"],[89,24,64,28],[89,27,64,31],[89,28,64,32],[90,10,64,34,"normalizeMaxBreadth"],[90,29,64,53],[90,32,64,56],[91,8,64,61],[91,9,64,62],[91,12,64,65,"client"],[91,18,64,71],[91,19,64,72,"getOptions"],[91,29,64,82],[91,30,64,83],[91,31,64,84],[93,8,66,6],[94,8,67,6],[94,14,67,12,"messageParts"],[94,26,67,24],[94,29,67,27],[94,31,67,29],[95,8,68,6],[95,12,68,10,"consolaMessage"],[95,26,68,24],[95,28,68,26],[96,10,69,8,"messageParts"],[96,22,69,20],[96,23,69,21,"push"],[96,27,69,25],[96,28,69,26,"consolaMessage"],[96,42,69,40],[96,43,69,41],[97,8,70,6],[98,8,71,6],[98,12,71,10,"args"],[98,16,71,14],[98,20,71,18,"args"],[98,24,71,22],[98,25,71,23,"length"],[98,31,71,29],[98,34,71,32],[98,35,71,33],[98,37,71,35],[99,10,72,8,"messageParts"],[99,22,72,20],[99,23,72,21,"push"],[99,27,72,25],[99,28,72,26],[99,32,72,26,"formatConsoleArgs"],[99,44,72,43],[99,45,72,43,"formatConsoleArgs"],[99,62,72,43],[99,64,72,44,"args"],[99,68,72,48],[99,70,72,50,"normalizeDepth"],[99,84,72,64],[99,86,72,66,"normalizeMaxBreadth"],[99,105,72,85],[99,106,72,86],[99,107,72,87],[100,8,73,6],[101,8,74,6],[101,14,74,12,"message"],[101,21,74,19],[101,24,74,22,"messageParts"],[101,36,74,34],[101,37,74,35,"join"],[101,41,74,39],[101,42,74,40],[101,45,74,43],[101,46,74,44],[103,8,76,6],[104,8,77,6,"attributes"],[104,18,77,16],[104,19,77,17],[104,34,77,32],[104,35,77,33],[104,38,77,36],[104,60,77,58],[105,8,79,6],[105,12,79,10,"tag"],[105,15,79,13],[105,17,79,15],[106,10,80,8,"attributes"],[106,20,80,18],[106,21,80,19],[106,34,80,32],[106,35,80,33],[106,38,80,36,"tag"],[106,41,80,39],[107,8,81,6],[108,8,83,6],[108,12,83,10,"type"],[108,16,83,14],[108,18,83,16],[109,10,84,8,"attributes"],[109,20,84,18],[109,21,84,19],[109,35,84,33],[109,36,84,34],[109,39,84,37,"type"],[109,43,84,41],[110,8,85,6],[112,8,87,6],[113,8,88,6],[113,12,88,10,"level"],[113,17,88,15],[113,21,88,19],[113,25,88,23],[113,29,88,27],[113,36,88,34,"level"],[113,41,88,39],[113,46,88,44],[113,54,88,52],[113,56,88,54],[114,10,89,8,"attributes"],[114,20,89,18],[114,21,89,19],[114,36,89,34],[114,37,89,35],[114,40,89,38,"level"],[114,45,89,43],[115,8,90,6],[116,8,92,6],[116,12,92,6,"_INTERNAL_captureLog"],[116,26,92,26],[116,27,92,26,"_INTERNAL_captureLog"],[116,47,92,26],[116,49,92,27],[117,10,93,8,"level"],[117,15,93,13],[117,17,93,15,"logSeverityLevel"],[117,33,93,31],[118,10,94,8,"message"],[118,17,94,15],[119,10,95,8,"attributes"],[120,8,96,6],[120,9,96,7],[120,10,96,8],[121,6,97,4],[122,4,98,2],[122,5,98,3],[123,2,99,0],[125,2,101,0],[126,2,102,0],[126,8,102,6,"CONSOLA_TYPE_TO_LOG_SEVERITY_LEVEL_MAP"],[126,46,102,44],[126,49,102,47],[127,4,103,2],[128,4,104,2,"silent"],[128,10,104,8],[128,12,104,10],[128,19,104,17],[129,4,105,2,"fatal"],[129,9,105,7],[129,11,105,9],[129,18,105,16],[130,4,106,2,"error"],[130,9,106,7],[130,11,106,9],[130,18,106,16],[131,4,107,2,"warn"],[131,8,107,6],[131,10,107,8],[131,16,107,14],[132,4,108,2,"log"],[132,7,108,5],[132,9,108,7],[132,15,108,13],[133,4,109,2,"info"],[133,8,109,6],[133,10,109,8],[133,16,109,14],[134,4,110,2,"success"],[134,11,110,9],[134,13,110,11],[134,19,110,17],[135,4,111,2,"fail"],[135,8,111,6],[135,10,111,8],[135,17,111,15],[136,4,112,2,"ready"],[136,9,112,7],[136,11,112,9],[136,17,112,15],[137,4,113,2,"start"],[137,9,113,7],[137,11,113,9],[137,17,113,15],[138,4,114,2,"box"],[138,7,114,5],[138,9,114,7],[138,15,114,13],[139,4,115,2,"debug"],[139,9,115,7],[139,11,115,9],[139,18,115,16],[140,4,116,2,"trace"],[140,9,116,7],[140,11,116,9],[140,18,116,16],[141,4,117,2,"verbose"],[141,11,117,9],[141,13,117,11],[141,20,117,18],[142,4,118,2],[143,4,119,2,"critical"],[143,12,119,10],[143,14,119,12],[143,21,119,19],[144,4,120,2,"notice"],[144,10,120,8],[144,12,120,10],[145,2,121,0],[145,3,121,1],[147,2,123,0],[148,2,124,0],[148,8,124,6,"CONSOLA_LEVEL_TO_LOG_SEVERITY_LEVEL_MAP"],[148,47,124,45],[148,50,124,48],[149,4,125,2],[149,5,125,3],[149,7,125,5],[149,14,125,12],[150,4,125,14],[151,4,126,2],[151,5,126,3],[151,7,126,5],[151,13,126,11],[152,4,126,13],[153,4,127,2],[153,5,127,3],[153,7,127,5],[153,13,127,11],[154,4,127,13],[155,4,128,2],[155,5,128,3],[155,7,128,5],[155,13,128,11],[156,4,128,13],[157,4,129,2],[157,5,129,3],[157,7,129,5],[157,14,129,12],[158,4,129,14],[159,4,130,2],[159,5,130,3],[159,7,130,5],[159,14,130,12],[159,15,130,14],[160,2,131,0],[160,3,131,1],[162,2,133,0],[163,0,134,0],[164,0,135,0],[165,0,136,0],[166,0,137,0],[167,0,138,0],[168,0,139,0],[169,2,140,0],[169,11,140,9,"getLogSeverityLevel"],[169,30,140,28,"getLogSeverityLevel"],[169,31,140,29,"type"],[169,35,140,33],[169,37,140,35,"level"],[169,42,140,40],[169,44,140,42],[170,4,141,2],[171,4,142,2],[171,8,142,6,"type"],[171,12,142,10],[171,17,142,15],[171,26,142,24],[171,28,142,26],[172,6,143,4],[172,13,143,11],[172,20,143,18],[173,4,144,2],[175,4,146,2],[176,4,147,2],[176,8,147,6,"type"],[176,12,147,10],[176,17,147,15],[176,25,147,23],[176,27,147,25],[177,6,148,4],[177,13,148,11],[177,20,148,18],[178,4,149,2],[180,4,151,2],[181,4,152,2],[181,8,152,6,"type"],[181,12,152,10],[181,14,152,12],[182,6,153,4],[182,12,153,10,"mappedLevel"],[182,23,153,21],[182,26,153,24,"CONSOLA_TYPE_TO_LOG_SEVERITY_LEVEL_MAP"],[182,64,153,62],[182,65,153,63,"type"],[182,69,153,67],[182,70,153,68],[183,6,154,4],[183,10,154,8,"mappedLevel"],[183,21,154,19],[183,23,154,21],[184,8,155,6],[184,15,155,13,"mappedLevel"],[184,26,155,24],[185,6,156,4],[186,4,157,2],[188,4,159,2],[189,4,160,2],[189,8,160,6],[189,15,160,13,"level"],[189,20,160,18],[189,25,160,23],[189,33,160,31],[189,35,160,33],[190,6,161,4],[190,12,161,10,"mappedLevel"],[190,23,161,21],[190,26,161,24,"CONSOLA_LEVEL_TO_LOG_SEVERITY_LEVEL_MAP"],[190,65,161,63],[190,66,161,64,"level"],[190,71,161,69],[190,72,161,70],[191,6,162,4],[191,10,162,8,"mappedLevel"],[191,21,162,19],[191,23,162,21],[192,8,163,6],[192,15,163,13,"mappedLevel"],[192,26,163,24],[193,6,164,4],[194,4,165,2],[196,4,167,2],[197,4,168,2],[197,11,168,9],[197,17,168,15],[198,2,169,0],[199,0,169,1],[199,3]],"functionMap":{"names":["<global>","createConsolaReporter","log","getLogSeverityLevel"],"mappings":"AAA;ACwC;ICK;KDmD;CDE;AGyC;CH6B"},"hasCjsExports":false},"type":"js/module"}]}