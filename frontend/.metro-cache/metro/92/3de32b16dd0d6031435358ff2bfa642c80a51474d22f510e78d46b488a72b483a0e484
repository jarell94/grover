{"dependencies":[{"name":"@sentry/react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":39,"index":39}}],"key":"elBGzoNzglnOgygauwjKTny3Kak=","exportNames":["*"],"imports":1}},{"name":"./breadcrumb","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":40},"end":{"line":2,"column":56,"index":96}}],"key":"ZuQcmhJEZ3zNZks4vmiWCWO48GM=","exportNames":["*"],"imports":1}},{"name":"./utils/fill","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":97},"end":{"line":3,"column":41,"index":138}}],"key":"XdQZBFW9ZeVf+rxu5moQyN7S61Q=","exportNames":["*"],"imports":1}},{"name":"./utils/normalize","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":139},"end":{"line":4,"column":62,"index":201}}],"key":"L9YoQZ9Gf58HY3muj38LyULGUCg=","exportNames":["*"],"imports":1}},{"name":"./wrapper","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":202},"end":{"line":5,"column":35,"index":237}}],"key":"uH5zH4V3wFIqFrFvN4UX99ueCCQ=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.enableSyncToNative = enableSyncToNative;\n  var _sentryReact = require(_dependencyMap[0], \"@sentry/react\");\n  var _breadcrumb = require(_dependencyMap[1], \"./breadcrumb\");\n  var _utilsFill = require(_dependencyMap[2], \"./utils/fill\");\n  var _utilsNormalize = require(_dependencyMap[3], \"./utils/normalize\");\n  var _wrapper = require(_dependencyMap[4], \"./wrapper\");\n  /**\n   * This WeakMap is used to keep track of which scopes have been synced to the native SDKs.\n   * This ensures that we don't double sync the same scope.\n   */\n  const syncedToNativeMap = new WeakMap();\n  /**\n   * Hooks into the scope set methods and sync new data added to the given scope with the native SDKs.\n   */\n  function enableSyncToNative(scope) {\n    if (syncedToNativeMap.has(scope)) {\n      return;\n    }\n    syncedToNativeMap.set(scope, true);\n    (0, _utilsFill.fillTyped)(scope, 'setUser', original => user => {\n      _wrapper.NATIVE.setUser(user);\n      return original.call(scope, user);\n    });\n    (0, _utilsFill.fillTyped)(scope, 'setTag', original => (key, value) => {\n      _wrapper.NATIVE.setTag(key, _wrapper.NATIVE.primitiveProcessor(value));\n      return original.call(scope, key, value);\n    });\n    (0, _utilsFill.fillTyped)(scope, 'setTags', original => tags => {\n      // As native only has setTag, we just loop through each tag key.\n      Object.keys(tags).forEach(key => {\n        _wrapper.NATIVE.setTag(key, _wrapper.NATIVE.primitiveProcessor(tags[key]));\n      });\n      return original.call(scope, tags);\n    });\n    (0, _utilsFill.fillTyped)(scope, 'setExtras', original => extras => {\n      Object.keys(extras).forEach(key => {\n        _wrapper.NATIVE.setExtra(key, extras[key]);\n      });\n      return original.call(scope, extras);\n    });\n    (0, _utilsFill.fillTyped)(scope, 'setExtra', original => (key, value) => {\n      _wrapper.NATIVE.setExtra(key, value);\n      return original.call(scope, key, value);\n    });\n    (0, _utilsFill.fillTyped)(scope, 'addBreadcrumb', original => (breadcrumb, maxBreadcrumbs) => {\n      const mergedBreadcrumb = Object.assign(Object.assign({}, breadcrumb), {\n        level: breadcrumb.level || _breadcrumb.DEFAULT_BREADCRUMB_LEVEL,\n        data: breadcrumb.data ? (0, _utilsNormalize.convertToNormalizedObject)(breadcrumb.data) : undefined\n      });\n      original.call(scope, mergedBreadcrumb, maxBreadcrumbs);\n      const finalBreadcrumb = scope.getLastBreadcrumb();\n      if (finalBreadcrumb) {\n        _wrapper.NATIVE.addBreadcrumb(finalBreadcrumb);\n      } else {\n        _sentryReact.logger.warn('[ScopeSync] Last created breadcrumb is undefined. Skipping sync to native.');\n      }\n      return scope;\n    });\n    (0, _utilsFill.fillTyped)(scope, 'clearBreadcrumbs', original => () => {\n      _wrapper.NATIVE.clearBreadcrumbs();\n      return original.call(scope);\n    });\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    (0, _utilsFill.fillTyped)(scope, 'setContext', original => (key, context) => {\n      _wrapper.NATIVE.setContext(key, context);\n      return original.call(scope, key, context);\n    });\n  }\n});","lineCount":75,"map":[[7,2,14,0,"exports"],[7,9,14,0],[7,10,14,0,"enableSyncToNative"],[7,28,14,0],[7,31,14,0,"enableSyncToNative"],[7,49,14,0],[8,2,1,0],[8,6,1,0,"_sentryReact"],[8,18,1,0],[8,21,1,0,"require"],[8,28,1,0],[8,29,1,0,"_dependencyMap"],[8,43,1,0],[9,2,2,0],[9,6,2,0,"_breadcrumb"],[9,17,2,0],[9,20,2,0,"require"],[9,27,2,0],[9,28,2,0,"_dependencyMap"],[9,42,2,0],[10,2,3,0],[10,6,3,0,"_utilsFill"],[10,16,3,0],[10,19,3,0,"require"],[10,26,3,0],[10,27,3,0,"_dependencyMap"],[10,41,3,0],[11,2,4,0],[11,6,4,0,"_utilsNormalize"],[11,21,4,0],[11,24,4,0,"require"],[11,31,4,0],[11,32,4,0,"_dependencyMap"],[11,46,4,0],[12,2,5,0],[12,6,5,0,"_wrapper"],[12,14,5,0],[12,17,5,0,"require"],[12,24,5,0],[12,25,5,0,"_dependencyMap"],[12,39,5,0],[13,2,6,0],[14,0,7,0],[15,0,8,0],[16,0,9,0],[17,2,10,0],[17,8,10,6,"syncedToNativeMap"],[17,25,10,23],[17,28,10,26],[17,32,10,30,"WeakMap"],[17,39,10,37],[17,40,10,38],[17,41,10,39],[18,2,11,0],[19,0,12,0],[20,0,13,0],[21,2,14,7],[21,11,14,16,"enableSyncToNative"],[21,29,14,34,"enableSyncToNative"],[21,30,14,35,"scope"],[21,35,14,40],[21,37,14,42],[22,4,15,4],[22,8,15,8,"syncedToNativeMap"],[22,25,15,25],[22,26,15,26,"has"],[22,29,15,29],[22,30,15,30,"scope"],[22,35,15,35],[22,36,15,36],[22,38,15,38],[23,6,16,8],[24,4,17,4],[25,4,18,4,"syncedToNativeMap"],[25,21,18,21],[25,22,18,22,"set"],[25,25,18,25],[25,26,18,26,"scope"],[25,31,18,31],[25,33,18,33],[25,37,18,37],[25,38,18,38],[26,4,19,4],[26,8,19,4,"fillTyped"],[26,18,19,13],[26,19,19,13,"fillTyped"],[26,28,19,13],[26,30,19,14,"scope"],[26,35,19,19],[26,37,19,21],[26,46,19,30],[26,48,19,32,"original"],[26,56,19,40],[26,60,19,45,"user"],[26,64,19,49],[26,68,19,54],[27,6,20,8,"NATIVE"],[27,14,20,14],[27,15,20,14,"NATIVE"],[27,21,20,14],[27,22,20,15,"setUser"],[27,29,20,22],[27,30,20,23,"user"],[27,34,20,27],[27,35,20,28],[28,6,21,8],[28,13,21,15,"original"],[28,21,21,23],[28,22,21,24,"call"],[28,26,21,28],[28,27,21,29,"scope"],[28,32,21,34],[28,34,21,36,"user"],[28,38,21,40],[28,39,21,41],[29,4,22,4],[29,5,22,5],[29,6,22,6],[30,4,23,4],[30,8,23,4,"fillTyped"],[30,18,23,13],[30,19,23,13,"fillTyped"],[30,28,23,13],[30,30,23,14,"scope"],[30,35,23,19],[30,37,23,21],[30,45,23,29],[30,47,23,31,"original"],[30,55,23,39],[30,59,23,43],[30,60,23,44,"key"],[30,63,23,47],[30,65,23,49,"value"],[30,70,23,54],[30,75,23,59],[31,6,24,8,"NATIVE"],[31,14,24,14],[31,15,24,14,"NATIVE"],[31,21,24,14],[31,22,24,15,"setTag"],[31,28,24,21],[31,29,24,22,"key"],[31,32,24,25],[31,34,24,27,"NATIVE"],[31,42,24,33],[31,43,24,33,"NATIVE"],[31,49,24,33],[31,50,24,34,"primitiveProcessor"],[31,68,24,52],[31,69,24,53,"value"],[31,74,24,58],[31,75,24,59],[31,76,24,60],[32,6,25,8],[32,13,25,15,"original"],[32,21,25,23],[32,22,25,24,"call"],[32,26,25,28],[32,27,25,29,"scope"],[32,32,25,34],[32,34,25,36,"key"],[32,37,25,39],[32,39,25,41,"value"],[32,44,25,46],[32,45,25,47],[33,4,26,4],[33,5,26,5],[33,6,26,6],[34,4,27,4],[34,8,27,4,"fillTyped"],[34,18,27,13],[34,19,27,13,"fillTyped"],[34,28,27,13],[34,30,27,14,"scope"],[34,35,27,19],[34,37,27,21],[34,46,27,30],[34,48,27,32,"original"],[34,56,27,40],[34,60,27,45,"tags"],[34,64,27,49],[34,68,27,54],[35,6,28,8],[36,6,29,8,"Object"],[36,12,29,14],[36,13,29,15,"keys"],[36,17,29,19],[36,18,29,20,"tags"],[36,22,29,24],[36,23,29,25],[36,24,29,26,"forEach"],[36,31,29,33],[36,32,29,34,"key"],[36,35,29,37],[36,39,29,41],[37,8,30,12,"NATIVE"],[37,16,30,18],[37,17,30,18,"NATIVE"],[37,23,30,18],[37,24,30,19,"setTag"],[37,30,30,25],[37,31,30,26,"key"],[37,34,30,29],[37,36,30,31,"NATIVE"],[37,44,30,37],[37,45,30,37,"NATIVE"],[37,51,30,37],[37,52,30,38,"primitiveProcessor"],[37,70,30,56],[37,71,30,57,"tags"],[37,75,30,61],[37,76,30,62,"key"],[37,79,30,65],[37,80,30,66],[37,81,30,67],[37,82,30,68],[38,6,31,8],[38,7,31,9],[38,8,31,10],[39,6,32,8],[39,13,32,15,"original"],[39,21,32,23],[39,22,32,24,"call"],[39,26,32,28],[39,27,32,29,"scope"],[39,32,32,34],[39,34,32,36,"tags"],[39,38,32,40],[39,39,32,41],[40,4,33,4],[40,5,33,5],[40,6,33,6],[41,4,34,4],[41,8,34,4,"fillTyped"],[41,18,34,13],[41,19,34,13,"fillTyped"],[41,28,34,13],[41,30,34,14,"scope"],[41,35,34,19],[41,37,34,21],[41,48,34,32],[41,50,34,34,"original"],[41,58,34,42],[41,62,34,47,"extras"],[41,68,34,53],[41,72,34,58],[42,6,35,8,"Object"],[42,12,35,14],[42,13,35,15,"keys"],[42,17,35,19],[42,18,35,20,"extras"],[42,24,35,26],[42,25,35,27],[42,26,35,28,"forEach"],[42,33,35,35],[42,34,35,36,"key"],[42,37,35,39],[42,41,35,43],[43,8,36,12,"NATIVE"],[43,16,36,18],[43,17,36,18,"NATIVE"],[43,23,36,18],[43,24,36,19,"setExtra"],[43,32,36,27],[43,33,36,28,"key"],[43,36,36,31],[43,38,36,33,"extras"],[43,44,36,39],[43,45,36,40,"key"],[43,48,36,43],[43,49,36,44],[43,50,36,45],[44,6,37,8],[44,7,37,9],[44,8,37,10],[45,6,38,8],[45,13,38,15,"original"],[45,21,38,23],[45,22,38,24,"call"],[45,26,38,28],[45,27,38,29,"scope"],[45,32,38,34],[45,34,38,36,"extras"],[45,40,38,42],[45,41,38,43],[46,4,39,4],[46,5,39,5],[46,6,39,6],[47,4,40,4],[47,8,40,4,"fillTyped"],[47,18,40,13],[47,19,40,13,"fillTyped"],[47,28,40,13],[47,30,40,14,"scope"],[47,35,40,19],[47,37,40,21],[47,47,40,31],[47,49,40,33,"original"],[47,57,40,41],[47,61,40,45],[47,62,40,46,"key"],[47,65,40,49],[47,67,40,51,"value"],[47,72,40,56],[47,77,40,61],[48,6,41,8,"NATIVE"],[48,14,41,14],[48,15,41,14,"NATIVE"],[48,21,41,14],[48,22,41,15,"setExtra"],[48,30,41,23],[48,31,41,24,"key"],[48,34,41,27],[48,36,41,29,"value"],[48,41,41,34],[48,42,41,35],[49,6,42,8],[49,13,42,15,"original"],[49,21,42,23],[49,22,42,24,"call"],[49,26,42,28],[49,27,42,29,"scope"],[49,32,42,34],[49,34,42,36,"key"],[49,37,42,39],[49,39,42,41,"value"],[49,44,42,46],[49,45,42,47],[50,4,43,4],[50,5,43,5],[50,6,43,6],[51,4,44,4],[51,8,44,4,"fillTyped"],[51,18,44,13],[51,19,44,13,"fillTyped"],[51,28,44,13],[51,30,44,14,"scope"],[51,35,44,19],[51,37,44,21],[51,52,44,36],[51,54,44,38,"original"],[51,62,44,46],[51,66,44,50],[51,67,44,51,"breadcrumb"],[51,77,44,61],[51,79,44,63,"maxBreadcrumbs"],[51,93,44,77],[51,98,44,82],[52,6,45,8],[52,12,45,14,"mergedBreadcrumb"],[52,28,45,30],[52,31,45,33,"Object"],[52,37,45,39],[52,38,45,40,"assign"],[52,44,45,46],[52,45,45,47,"Object"],[52,51,45,53],[52,52,45,54,"assign"],[52,58,45,60],[52,59,45,61],[52,60,45,62],[52,61,45,63],[52,63,45,65,"breadcrumb"],[52,73,45,75],[52,74,45,76],[52,76,45,78],[53,8,45,80,"level"],[53,13,45,85],[53,15,45,87,"breadcrumb"],[53,25,45,97],[53,26,45,98,"level"],[53,31,45,103],[53,35,45,107,"DEFAULT_BREADCRUMB_LEVEL"],[53,46,45,131],[53,47,45,131,"DEFAULT_BREADCRUMB_LEVEL"],[53,71,45,131],[54,8,45,133,"data"],[54,12,45,137],[54,14,45,139,"breadcrumb"],[54,24,45,149],[54,25,45,150,"data"],[54,29,45,154],[54,32,45,157],[54,36,45,157,"convertToNormalizedObject"],[54,51,45,182],[54,52,45,182,"convertToNormalizedObject"],[54,77,45,182],[54,79,45,183,"breadcrumb"],[54,89,45,193],[54,90,45,194,"data"],[54,94,45,198],[54,95,45,199],[54,98,45,202,"undefined"],[55,6,45,212],[55,7,45,213],[55,8,45,214],[56,6,46,8,"original"],[56,14,46,16],[56,15,46,17,"call"],[56,19,46,21],[56,20,46,22,"scope"],[56,25,46,27],[56,27,46,29,"mergedBreadcrumb"],[56,43,46,45],[56,45,46,47,"maxBreadcrumbs"],[56,59,46,61],[56,60,46,62],[57,6,47,8],[57,12,47,14,"finalBreadcrumb"],[57,27,47,29],[57,30,47,32,"scope"],[57,35,47,37],[57,36,47,38,"getLastBreadcrumb"],[57,53,47,55],[57,54,47,56],[57,55,47,57],[58,6,48,8],[58,10,48,12,"finalBreadcrumb"],[58,25,48,27],[58,27,48,29],[59,8,49,12,"NATIVE"],[59,16,49,18],[59,17,49,18,"NATIVE"],[59,23,49,18],[59,24,49,19,"addBreadcrumb"],[59,37,49,32],[59,38,49,33,"finalBreadcrumb"],[59,53,49,48],[59,54,49,49],[60,6,50,8],[60,7,50,9],[60,13,51,13],[61,8,52,12,"logger"],[61,20,52,18],[61,21,52,18,"logger"],[61,27,52,18],[61,28,52,19,"warn"],[61,32,52,23],[61,33,52,24],[61,109,52,100],[61,110,52,101],[62,6,53,8],[63,6,54,8],[63,13,54,15,"scope"],[63,18,54,20],[64,4,55,4],[64,5,55,5],[64,6,55,6],[65,4,56,4],[65,8,56,4,"fillTyped"],[65,18,56,13],[65,19,56,13,"fillTyped"],[65,28,56,13],[65,30,56,14,"scope"],[65,35,56,19],[65,37,56,21],[65,55,56,39],[65,57,56,41,"original"],[65,65,56,49],[65,69,56,53],[65,75,56,59],[66,6,57,8,"NATIVE"],[66,14,57,14],[66,15,57,14,"NATIVE"],[66,21,57,14],[66,22,57,15,"clearBreadcrumbs"],[66,38,57,31],[66,39,57,32],[66,40,57,33],[67,6,58,8],[67,13,58,15,"original"],[67,21,58,23],[67,22,58,24,"call"],[67,26,58,28],[67,27,58,29,"scope"],[67,32,58,34],[67,33,58,35],[68,4,59,4],[68,5,59,5],[68,6,59,6],[69,4,60,4],[70,4,61,4],[70,8,61,4,"fillTyped"],[70,18,61,13],[70,19,61,13,"fillTyped"],[70,28,61,13],[70,30,61,14,"scope"],[70,35,61,19],[70,37,61,21],[70,49,61,33],[70,51,61,35,"original"],[70,59,61,43],[70,63,61,47],[70,64,61,48,"key"],[70,67,61,51],[70,69,61,53,"context"],[70,76,61,60],[70,81,61,65],[71,6,62,8,"NATIVE"],[71,14,62,14],[71,15,62,14,"NATIVE"],[71,21,62,14],[71,22,62,15,"setContext"],[71,32,62,25],[71,33,62,26,"key"],[71,36,62,29],[71,38,62,31,"context"],[71,45,62,38],[71,46,62,39],[72,6,63,8],[72,13,63,15,"original"],[72,21,63,23],[72,22,63,24,"call"],[72,26,63,28],[72,27,63,29,"scope"],[72,32,63,34],[72,34,63,36,"key"],[72,37,63,39],[72,39,63,41,"context"],[72,46,63,48],[72,47,63,49],[73,4,64,4],[73,5,64,5],[73,6,64,6],[74,2,65,0],[75,0,65,1],[75,3]],"functionMap":{"names":["<global>","enableSyncToNative","fillTyped$argument_2","<anonymous>","Object.keys.forEach$argument_0"],"mappings":"AAA;OCa;gCCK,YC;KFG;+BCC,YC;KFG;gCCC,YC;kCCE;SDE;KFE;kCCC,YC;oCCC;SDE;KFE;iCCC,YC;KFG;sCCC,YC;KFW;yCCC,YC;KFG;mCCE,YC;KFG;CDC"},"hasCjsExports":false},"type":"js/module"}]}