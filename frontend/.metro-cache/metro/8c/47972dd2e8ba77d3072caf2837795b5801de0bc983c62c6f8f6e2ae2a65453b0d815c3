{"dependencies":[{"name":"@sentry/core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":246,"index":246}}],"key":"/o+dASQcHF2bB25icdsM0E4TExc=","exportNames":["*"],"imports":1}},{"name":"./instrument.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":247},"end":{"line":2,"column":71,"index":318}}],"key":"/faGONMhKrqQj2KSLxxwco89Hvc=","exportNames":["*"],"imports":1}},{"name":"./utils.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":319},"end":{"line":3,"column":63,"index":382}}],"key":"NIaSEHO1E48gsZc7jH9Ex1xTHgE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"_onElementTiming\", {\n    enumerable: true,\n    get: function () {\n      return _onElementTiming;\n    }\n  });\n  Object.defineProperty(exports, \"startTrackingElementTiming\", {\n    enumerable: true,\n    get: function () {\n      return startTrackingElementTiming;\n    }\n  });\n  var _sentryCore = require(_dependencyMap[0], \"@sentry/core\");\n  var _instrumentJs = require(_dependencyMap[1], \"./instrument.js\");\n  var _utilsJs = require(_dependencyMap[2], \"./utils.js\");\n  // ElementTiming interface based on the W3C spec\n\n  /**\n   * Start tracking ElementTiming performance entries.\n   */\n  function startTrackingElementTiming() {\n    const performance = (0, _utilsJs.getBrowserPerformanceAPI)();\n    if (performance && (0, _sentryCore.browserPerformanceTimeOrigin)()) {\n      return (0, _instrumentJs.addPerformanceInstrumentationHandler)('element', _onElementTiming);\n    }\n    return () => undefined;\n  }\n\n  /**\n   * exported only for testing\n   */\n  const _onElementTiming = ({\n    entries\n  }) => {\n    const activeSpan = (0, _sentryCore.getActiveSpan)();\n    const rootSpan = activeSpan ? (0, _sentryCore.getRootSpan)(activeSpan) : undefined;\n    const transactionName = rootSpan ? (0, _sentryCore.spanToJSON)(rootSpan).description : (0, _sentryCore.getCurrentScope)().getScopeData().transactionName;\n    entries.forEach(entry => {\n      const elementEntry = entry;\n\n      // Skip entries without identifier (elementtiming attribute)\n      if (!elementEntry.identifier) {\n        return;\n      }\n\n      // `name` contains the type of the element paint. Can be `'image-paint'` or `'text-paint'`.\n      // https://developer.mozilla.org/en-US/docs/Web/API/PerformanceElementTiming#instance_properties\n      const paintType = elementEntry.name;\n      const renderTime = elementEntry.renderTime;\n      const loadTime = elementEntry.loadTime;\n\n      // starting the span at:\n      // - `loadTime` if available (should be available for all \"image-paint\" entries, 0 otherwise)\n      // - `renderTime` if available (available for all entries, except 3rd party images, but these should be covered by `loadTime`, 0 otherwise)\n      // - `timestampInSeconds()` as a safeguard\n      // see https://developer.mozilla.org/en-US/docs/Web/API/PerformanceElementTiming/renderTime#cross-origin_image_render_time\n      const [spanStartTime, spanStartTimeSource] = loadTime ? [(0, _utilsJs.msToSec)(loadTime), 'load-time'] : renderTime ? [(0, _utilsJs.msToSec)(renderTime), 'render-time'] : [(0, _sentryCore.timestampInSeconds)(), 'entry-emission'];\n      const duration = paintType === 'image-paint' ?\n      // for image paints, we can acually get a duration because image-paint entries also have a `loadTime`\n      // and `renderTime`. `loadTime` is the time when the image finished loading and `renderTime` is the\n      // time when the image finished rendering.\n      (0, _utilsJs.msToSec)(Math.max(0, (renderTime ?? 0) - (loadTime ?? 0))) :\n      // for `'text-paint'` entries, we can't get a duration because the `loadTime` is always zero.\n      0;\n      const attributes = {\n        [_sentryCore.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]: 'auto.ui.browser.elementtiming',\n        [_sentryCore.SEMANTIC_ATTRIBUTE_SENTRY_OP]: 'ui.elementtiming',\n        // name must be user-entered, so we can assume low cardinality\n        [_sentryCore.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]: 'component',\n        // recording the source of the span start time, as it varies depending on available data\n        'sentry.span_start_time_source': spanStartTimeSource,\n        'sentry.transaction_name': transactionName,\n        'element.id': elementEntry.id,\n        'element.type': elementEntry.element?.tagName?.toLowerCase() || 'unknown',\n        'element.size': elementEntry.naturalWidth && elementEntry.naturalHeight ? `${elementEntry.naturalWidth}x${elementEntry.naturalHeight}` : undefined,\n        'element.render_time': renderTime,\n        'element.load_time': loadTime,\n        // `url` is `0`(number) for text paints (hence we fall back to undefined)\n        'element.url': elementEntry.url || undefined,\n        'element.identifier': elementEntry.identifier,\n        'element.paint_type': paintType\n      };\n      (0, _sentryCore.startSpan)({\n        name: `element[${elementEntry.identifier}]`,\n        attributes,\n        startTime: spanStartTime,\n        onlyIfParent: true\n      }, span => {\n        span.end(spanStartTime + duration);\n      });\n    });\n  };\n});","lineCount":99,"map":[[7,2,100,0,"Object"],[7,8,100,0],[7,9,100,0,"defineProperty"],[7,23,100,0],[7,24,100,0,"exports"],[7,31,100,0],[8,4,100,0,"enumerable"],[8,14,100,0],[9,4,100,0,"get"],[9,7,100,0],[9,18,100,0,"get"],[9,19,100,0],[10,6,100,0],[10,13,100,9,"_onElementTiming"],[10,29,100,25],[11,4,100,25],[12,2,100,25],[13,2,100,0,"Object"],[13,8,100,0],[13,9,100,0,"defineProperty"],[13,23,100,0],[13,24,100,0,"exports"],[13,31,100,0],[14,4,100,0,"enumerable"],[14,14,100,0],[15,4,100,0,"get"],[15,7,100,0],[15,18,100,0,"get"],[15,19,100,0],[16,6,100,0],[16,13,100,27,"startTrackingElementTiming"],[16,39,100,53],[17,4,100,53],[18,2,100,53],[19,2,1,0],[19,6,1,0,"_sentryCore"],[19,17,1,0],[19,20,1,0,"require"],[19,27,1,0],[19,28,1,0,"_dependencyMap"],[19,42,1,0],[20,2,2,0],[20,6,2,0,"_instrumentJs"],[20,19,2,0],[20,22,2,0,"require"],[20,29,2,0],[20,30,2,0,"_dependencyMap"],[20,44,2,0],[21,2,3,0],[21,6,3,0,"_utilsJs"],[21,14,3,0],[21,17,3,0,"require"],[21,24,3,0],[21,25,3,0,"_dependencyMap"],[21,39,3,0],[22,2,5,0],[24,2,7,0],[25,0,8,0],[26,0,9,0],[27,2,10,0],[27,11,10,9,"startTrackingElementTiming"],[27,37,10,35,"startTrackingElementTiming"],[27,38,10,35],[27,40,10,38],[28,4,11,2],[28,10,11,8,"performance"],[28,21,11,19],[28,24,11,22],[28,28,11,22,"getBrowserPerformanceAPI"],[28,36,11,46],[28,37,11,46,"getBrowserPerformanceAPI"],[28,61,11,46],[28,63,11,47],[28,64,11,48],[29,4,12,2],[29,8,12,6,"performance"],[29,19,12,17],[29,23,12,21],[29,27,12,21,"browserPerformanceTimeOrigin"],[29,38,12,49],[29,39,12,49,"browserPerformanceTimeOrigin"],[29,67,12,49],[29,69,12,50],[29,70,12,51],[29,72,12,53],[30,6,13,4],[30,13,13,11],[30,17,13,11,"addPerformanceInstrumentationHandler"],[30,30,13,47],[30,31,13,47,"addPerformanceInstrumentationHandler"],[30,67,13,47],[30,69,13,48],[30,78,13,57],[30,80,13,59,"_onElementTiming"],[30,96,13,75],[30,97,13,76],[31,4,14,2],[32,4,16,2],[32,11,16,9],[32,17,16,15,"undefined"],[32,26,16,24],[33,2,17,0],[35,2,19,0],[36,0,20,0],[37,0,21,0],[38,2,22,0],[38,8,22,6,"_onElementTiming"],[38,24,22,22],[38,27,22,25,"_onElementTiming"],[38,28,22,26],[39,4,22,28,"entries"],[40,2,22,36],[40,3,22,37],[40,8,22,42],[41,4,23,2],[41,10,23,8,"activeSpan"],[41,20,23,18],[41,23,23,21],[41,27,23,21,"getActiveSpan"],[41,38,23,34],[41,39,23,34,"getActiveSpan"],[41,52,23,34],[41,54,23,35],[41,55,23,36],[42,4,24,2],[42,10,24,8,"rootSpan"],[42,18,24,16],[42,21,24,19,"activeSpan"],[42,31,24,29],[42,34,24,32],[42,38,24,32,"getRootSpan"],[42,49,24,43],[42,50,24,43,"getRootSpan"],[42,61,24,43],[42,63,24,44,"activeSpan"],[42,73,24,54],[42,74,24,55],[42,77,24,58,"undefined"],[42,86,24,67],[43,4,25,2],[43,10,25,8,"transactionName"],[43,25,25,23],[43,28,25,26,"rootSpan"],[43,36,25,34],[43,39,26,6],[43,43,26,6,"spanToJSON"],[43,54,26,16],[43,55,26,16,"spanToJSON"],[43,65,26,16],[43,67,26,17,"rootSpan"],[43,75,26,25],[43,76,26,26],[43,77,26,27,"description"],[43,88,26,38],[43,91,27,6],[43,95,27,6,"getCurrentScope"],[43,106,27,21],[43,107,27,21,"getCurrentScope"],[43,122,27,21],[43,124,27,22],[43,125,27,23],[43,126,27,24,"getScopeData"],[43,138,27,36],[43,139,27,37],[43,140,27,38],[43,141,27,39,"transactionName"],[43,156,27,54],[44,4,29,2,"entries"],[44,11,29,9],[44,12,29,10,"forEach"],[44,19,29,17],[44,20,29,18,"entry"],[44,25,29,23],[44,29,29,27],[45,6,30,4],[45,12,30,10,"elementEntry"],[45,24,30,22],[45,27,30,25,"entry"],[45,32,30,30],[47,6,32,4],[48,6,33,4],[48,10,33,8],[48,11,33,9,"elementEntry"],[48,23,33,21],[48,24,33,22,"identifier"],[48,34,33,32],[48,36,33,34],[49,8,34,6],[50,6,35,4],[52,6,37,4],[53,6,38,4],[54,6,39,4],[54,12,39,10,"paintType"],[54,21,39,19],[54,24,39,22,"elementEntry"],[54,36,39,34],[54,37,39,35,"name"],[54,41,39,39],[55,6,41,4],[55,12,41,10,"renderTime"],[55,22,41,20],[55,25,41,23,"elementEntry"],[55,37,41,35],[55,38,41,36,"renderTime"],[55,48,41,46],[56,6,42,4],[56,12,42,10,"loadTime"],[56,20,42,18],[56,23,42,21,"elementEntry"],[56,35,42,33],[56,36,42,34,"loadTime"],[56,44,42,42],[58,6,44,4],[59,6,45,4],[60,6,46,4],[61,6,47,4],[62,6,48,4],[63,6,49,4],[63,12,49,10],[63,13,49,11,"spanStartTime"],[63,26,49,24],[63,28,49,26,"spanStartTimeSource"],[63,47,49,45],[63,48,49,46],[63,51,49,49,"loadTime"],[63,59,49,57],[63,62,50,8],[63,63,50,9],[63,67,50,9,"msToSec"],[63,75,50,16],[63,76,50,16,"msToSec"],[63,83,50,16],[63,85,50,17,"loadTime"],[63,93,50,25],[63,94,50,26],[63,96,50,28],[63,107,50,39],[63,108,50,40],[63,111,51,8,"renderTime"],[63,121,51,18],[63,124,52,10],[63,125,52,11],[63,129,52,11,"msToSec"],[63,137,52,18],[63,138,52,18,"msToSec"],[63,145,52,18],[63,147,52,19,"renderTime"],[63,157,52,29],[63,158,52,30],[63,160,52,32],[63,173,52,45],[63,174,52,46],[63,177,53,10],[63,178,53,11],[63,182,53,11,"timestampInSeconds"],[63,193,53,29],[63,194,53,29,"timestampInSeconds"],[63,212,53,29],[63,214,53,30],[63,215,53,31],[63,217,53,33],[63,233,53,49],[63,234,53,50],[64,6,55,4],[64,12,55,10,"duration"],[64,20,55,18],[64,23,56,6,"paintType"],[64,32,56,15],[64,37,56,20],[64,50,56,33],[65,6,57,10],[66,6,58,10],[67,6,59,10],[68,6,60,10],[68,10,60,10,"msToSec"],[68,18,60,17],[68,19,60,17,"msToSec"],[68,26,60,17],[68,28,60,18,"Math"],[68,32,60,22],[68,33,60,23,"max"],[68,36,60,26],[68,37,60,27],[68,38,60,28],[68,40,60,30],[68,41,60,31,"renderTime"],[68,51,60,41],[68,55,60,45],[68,56,60,46],[68,61,60,51,"loadTime"],[68,69,60,59],[68,73,60,63],[68,74,60,64],[68,75,60,65],[68,76,60,66],[68,77,60,67],[69,6,61,10],[70,6,62,10],[70,7,62,11],[71,6,64,4],[71,12,64,10,"attributes"],[71,22,64,20],[71,25,64,23],[72,8,65,6],[72,9,65,7,"SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN"],[72,20,65,39],[72,21,65,39,"SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN"],[72,53,65,39],[72,56,65,42],[72,87,65,73],[73,8,66,6],[73,9,66,7,"SEMANTIC_ATTRIBUTE_SENTRY_OP"],[73,20,66,35],[73,21,66,35,"SEMANTIC_ATTRIBUTE_SENTRY_OP"],[73,49,66,35],[73,52,66,38],[73,70,66,56],[74,8,67,6],[75,8,68,6],[75,9,68,7,"SEMANTIC_ATTRIBUTE_SENTRY_SOURCE"],[75,20,68,39],[75,21,68,39,"SEMANTIC_ATTRIBUTE_SENTRY_SOURCE"],[75,53,68,39],[75,56,68,42],[75,67,68,53],[76,8,69,6],[77,8,70,6],[77,39,70,37],[77,41,70,39,"spanStartTimeSource"],[77,60,70,58],[78,8,71,6],[78,33,71,31],[78,35,71,33,"transactionName"],[78,50,71,48],[79,8,72,6],[79,20,72,18],[79,22,72,20,"elementEntry"],[79,34,72,32],[79,35,72,33,"id"],[79,37,72,35],[80,8,73,6],[80,22,73,20],[80,24,73,22,"elementEntry"],[80,36,73,34],[80,37,73,35,"element"],[80,44,73,42],[80,46,73,44,"tagName"],[80,53,73,51],[80,55,73,53,"toLowerCase"],[80,66,73,64],[80,67,73,65],[80,68,73,66],[80,72,73,70],[80,81,73,79],[81,8,74,6],[81,22,74,20],[81,24,75,8,"elementEntry"],[81,36,75,20],[81,37,75,21,"naturalWidth"],[81,49,75,33],[81,53,75,37,"elementEntry"],[81,65,75,49],[81,66,75,50,"naturalHeight"],[81,79,75,63],[81,82,76,12],[81,85,76,15,"elementEntry"],[81,97,76,27],[81,98,76,28,"naturalWidth"],[81,110,76,40],[81,114,76,44,"elementEntry"],[81,126,76,56],[81,127,76,57,"naturalHeight"],[81,140,76,70],[81,142,76,72],[81,145,77,12,"undefined"],[81,154,77,21],[82,8,78,6],[82,29,78,27],[82,31,78,29,"renderTime"],[82,41,78,39],[83,8,79,6],[83,27,79,25],[83,29,79,27,"loadTime"],[83,37,79,35],[84,8,80,6],[85,8,81,6],[85,21,81,19],[85,23,81,21,"elementEntry"],[85,35,81,33],[85,36,81,34,"url"],[85,39,81,37],[85,43,81,41,"undefined"],[85,52,81,50],[86,8,82,6],[86,28,82,26],[86,30,82,28,"elementEntry"],[86,42,82,40],[86,43,82,41,"identifier"],[86,53,82,51],[87,8,83,6],[87,28,83,26],[87,30,83,28,"paintType"],[88,6,84,4],[88,7,84,5],[89,6,86,4],[89,10,86,4,"startSpan"],[89,21,86,13],[89,22,86,13,"startSpan"],[89,31,86,13],[89,33,87,6],[90,8,88,8,"name"],[90,12,88,12],[90,14,88,14],[90,25,88,25,"elementEntry"],[90,37,88,37],[90,38,88,38,"identifier"],[90,48,88,48],[90,51,88,51],[91,8,89,8,"attributes"],[91,18,89,18],[92,8,90,8,"startTime"],[92,17,90,17],[92,19,90,19,"spanStartTime"],[92,32,90,32],[93,8,91,8,"onlyIfParent"],[93,20,91,20],[93,22,91,22],[94,6,92,6],[94,7,92,7],[94,9,93,6,"span"],[94,13,93,10],[94,17,93,14],[95,8,94,8,"span"],[95,12,94,12],[95,13,94,13,"end"],[95,16,94,16],[95,17,94,17,"spanStartTime"],[95,30,94,30],[95,33,94,33,"duration"],[95,41,94,41],[95,42,94,42],[96,6,95,6],[96,7,96,4],[96,8,96,5],[97,4,97,2],[97,5,97,3],[97,6,97,4],[98,2,98,0],[98,3,98,1],[99,0,98,2],[99,3]],"functionMap":{"names":["<global>","startTrackingElementTiming","<anonymous>","_onElementTiming","entries.forEach$argument_0","startSpan$argument_1"],"mappings":"AAA;ACS;SCM,eD;CDC;yBGK;kBCO;MCgE;ODE;GDE;CHC"},"hasCjsExports":false},"type":"js/module"}]}