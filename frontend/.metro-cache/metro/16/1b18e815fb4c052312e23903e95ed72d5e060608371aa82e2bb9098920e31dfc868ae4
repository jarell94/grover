{"dependencies":[{"name":"./url.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":71,"index":71}}],"key":"7NcMQWW/4KtgISzEb8GlvOMI30I=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"isSentryRequestUrl\", {\n    enumerable: true,\n    get: function () {\n      return isSentryRequestUrl;\n    }\n  });\n  var _urlJs = require(_dependencyMap[0], \"./url.js\");\n  /**\n   * Checks whether given url points to Sentry server\n   *\n   * @param url url to verify\n   */\n  function isSentryRequestUrl(url, client) {\n    const dsn = client?.getDsn();\n    const tunnel = client?.getOptions().tunnel;\n    return checkDsn(url, dsn) || checkTunnel(url, tunnel);\n  }\n  function checkTunnel(url, tunnel) {\n    if (!tunnel) {\n      return false;\n    }\n    return removeTrailingSlash(url) === removeTrailingSlash(tunnel);\n  }\n  function checkDsn(url, dsn) {\n    // Requests to Sentry's ingest endpoint must have a `sentry_key` in the query string\n    // This is equivalent to the public_key which is required in the DSN\n    // see https://develop.sentry.dev/sdk/overview/#parsing-the-dsn\n    // Therefore, a request to the same host and with a `sentry_key` in the query string\n    // can be considered a request to the ingest endpoint.\n    const urlParts = (0, _urlJs.parseStringToURLObject)(url);\n    if (!urlParts || (0, _urlJs.isURLObjectRelative)(urlParts)) {\n      return false;\n    }\n    return dsn ? urlParts.host.includes(dsn.host) && /(^|&|\\?)sentry_key=/.test(urlParts.search) : false;\n  }\n  function removeTrailingSlash(str) {\n    return str[str.length - 1] === '/' ? str.slice(0, -1) : str;\n  }\n});","lineCount":45,"map":[[7,2,40,0,"Object"],[7,8,40,0],[7,9,40,0,"defineProperty"],[7,23,40,0],[7,24,40,0,"exports"],[7,31,40,0],[8,4,40,0,"enumerable"],[8,14,40,0],[9,4,40,0,"get"],[9,7,40,0],[9,18,40,0,"get"],[9,19,40,0],[10,6,40,0],[10,13,40,9,"isSentryRequestUrl"],[10,31,40,27],[11,4,40,27],[12,2,40,27],[13,2,1,0],[13,6,1,0,"_urlJs"],[13,12,1,0],[13,15,1,0,"require"],[13,22,1,0],[13,23,1,0,"_dependencyMap"],[13,37,1,0],[14,2,3,0],[15,0,4,0],[16,0,5,0],[17,0,6,0],[18,0,7,0],[19,2,8,0],[19,11,8,9,"isSentryRequestUrl"],[19,29,8,27,"isSentryRequestUrl"],[19,30,8,28,"url"],[19,33,8,31],[19,35,8,33,"client"],[19,41,8,39],[19,43,8,41],[20,4,9,2],[20,10,9,8,"dsn"],[20,13,9,11],[20,16,9,14,"client"],[20,22,9,20],[20,24,9,22,"getDsn"],[20,30,9,28],[20,31,9,29],[20,32,9,30],[21,4,10,2],[21,10,10,8,"tunnel"],[21,16,10,14],[21,19,10,17,"client"],[21,25,10,23],[21,27,10,25,"getOptions"],[21,37,10,35],[21,38,10,36],[21,39,10,37],[21,40,10,38,"tunnel"],[21,46,10,44],[22,4,11,2],[22,11,11,9,"checkDsn"],[22,19,11,17],[22,20,11,18,"url"],[22,23,11,21],[22,25,11,23,"dsn"],[22,28,11,26],[22,29,11,27],[22,33,11,31,"checkTunnel"],[22,44,11,42],[22,45,11,43,"url"],[22,48,11,46],[22,50,11,48,"tunnel"],[22,56,11,54],[22,57,11,55],[23,2,12,0],[24,2,14,0],[24,11,14,9,"checkTunnel"],[24,22,14,20,"checkTunnel"],[24,23,14,21,"url"],[24,26,14,24],[24,28,14,26,"tunnel"],[24,34,14,32],[24,36,14,34],[25,4,15,2],[25,8,15,6],[25,9,15,7,"tunnel"],[25,15,15,13],[25,17,15,15],[26,6,16,4],[26,13,16,11],[26,18,16,16],[27,4,17,2],[28,4,19,2],[28,11,19,9,"removeTrailingSlash"],[28,30,19,28],[28,31,19,29,"url"],[28,34,19,32],[28,35,19,33],[28,40,19,38,"removeTrailingSlash"],[28,59,19,57],[28,60,19,58,"tunnel"],[28,66,19,64],[28,67,19,65],[29,2,20,0],[30,2,22,0],[30,11,22,9,"checkDsn"],[30,19,22,17,"checkDsn"],[30,20,22,18,"url"],[30,23,22,21],[30,25,22,23,"dsn"],[30,28,22,26],[30,30,22,28],[31,4,23,2],[32,4,24,2],[33,4,25,2],[34,4,26,2],[35,4,27,2],[36,4,28,2],[36,10,28,8,"urlParts"],[36,18,28,16],[36,21,28,19],[36,25,28,19,"parseStringToURLObject"],[36,31,28,41],[36,32,28,41,"parseStringToURLObject"],[36,54,28,41],[36,56,28,42,"url"],[36,59,28,45],[36,60,28,46],[37,4,29,2],[37,8,29,6],[37,9,29,7,"urlParts"],[37,17,29,15],[37,21,29,19],[37,25,29,19,"isURLObjectRelative"],[37,31,29,38],[37,32,29,38,"isURLObjectRelative"],[37,51,29,38],[37,53,29,39,"urlParts"],[37,61,29,47],[37,62,29,48],[37,64,29,50],[38,6,30,4],[38,13,30,11],[38,18,30,16],[39,4,31,2],[40,4,33,2],[40,11,33,9,"dsn"],[40,14,33,12],[40,17,33,15,"urlParts"],[40,25,33,23],[40,26,33,24,"host"],[40,30,33,28],[40,31,33,29,"includes"],[40,39,33,37],[40,40,33,38,"dsn"],[40,43,33,41],[40,44,33,42,"host"],[40,48,33,46],[40,49,33,47],[40,53,33,51],[40,74,33,72],[40,75,33,73,"test"],[40,79,33,77],[40,80,33,78,"urlParts"],[40,88,33,86],[40,89,33,87,"search"],[40,95,33,93],[40,96,33,94],[40,99,33,97],[40,104,33,102],[41,2,34,0],[42,2,36,0],[42,11,36,9,"removeTrailingSlash"],[42,30,36,28,"removeTrailingSlash"],[42,31,36,29,"str"],[42,34,36,32],[42,36,36,34],[43,4,37,2],[43,11,37,9,"str"],[43,14,37,12],[43,15,37,13,"str"],[43,18,37,16],[43,19,37,17,"length"],[43,25,37,23],[43,28,37,26],[43,29,37,27],[43,30,37,28],[43,35,37,33],[43,38,37,36],[43,41,37,39,"str"],[43,44,37,42],[43,45,37,43,"slice"],[43,50,37,48],[43,51,37,49],[43,52,37,50],[43,54,37,52],[43,55,37,53],[43,56,37,54],[43,57,37,55],[43,60,37,58,"str"],[43,63,37,61],[44,2,38,0],[45,0,38,1],[45,3]],"functionMap":{"names":["<global>","isSentryRequestUrl","checkTunnel","checkDsn","removeTrailingSlash"],"mappings":"AAA;ACO;CDI;AEE;CFM;AGE;CHY;AIE;CJE"},"hasCjsExports":false},"type":"js/module"}]}