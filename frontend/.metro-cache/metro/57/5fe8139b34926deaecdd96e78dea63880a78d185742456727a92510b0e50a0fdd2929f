{"dependencies":[{"name":"@sentry/core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":47,"index":47}}],"key":"/o+dASQcHF2bB25icdsM0E4TExc=","exportNames":["*"],"imports":1}},{"name":"@sentry-internal/browser-utils","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":48},"end":{"line":2,"column":100,"index":148}}],"key":"NhwjGxy6N7nYR3SR4JfgASTvmbA=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"makeFetchTransport\", {\n    enumerable: true,\n    get: function () {\n      return makeFetchTransport;\n    }\n  });\n  var _sentryCore = require(_dependencyMap[0], \"@sentry/core\");\n  var _sentryInternalBrowserUtils = require(_dependencyMap[1], \"@sentry-internal/browser-utils\");\n  /**\n   * Creates a Transport that uses the Fetch API to send events to Sentry.\n   */\n  function makeFetchTransport(options, nativeFetch = (0, _sentryInternalBrowserUtils.getNativeImplementation)('fetch')) {\n    let pendingBodySize = 0;\n    let pendingCount = 0;\n    async function makeRequest(request) {\n      const requestSize = request.body.length;\n      pendingBodySize += requestSize;\n      pendingCount++;\n      const requestOptions = {\n        body: request.body,\n        method: 'POST',\n        referrerPolicy: 'strict-origin',\n        headers: options.headers,\n        // Outgoing requests are usually cancelled when navigating to a different page, causing a \"TypeError: Failed to\n        // fetch\" error and sending a \"network_error\" client-outcome - in Chrome, the request status shows \"(cancelled)\".\n        // The `keepalive` flag keeps outgoing requests alive, even when switching pages. We want this since we're\n        // frequently sending events right before the user is switching pages (eg. when finishing navigation transactions).\n        // Gotchas:\n        // - `keepalive` isn't supported by Firefox\n        // - As per spec (https://fetch.spec.whatwg.org/#http-network-or-cache-fetch):\n        //   If the sum of contentLength and inflightKeepaliveBytes is greater than 64 kibibytes, then return a network error.\n        //   We will therefore only activate the flag when we're below that limit.\n        // There is also a limit of requests that can be open at the same time, so we also limit this to 15\n        // See https://github.com/getsentry/sentry-javascript/pull/7553 for details\n        keepalive: pendingBodySize <= 60000 && pendingCount < 15,\n        ...options.fetchOptions\n      };\n      try {\n        // Note: We do not need to suppress tracing here, because we are using the native fetch, instead of our wrapped one.\n        const response = await nativeFetch(options.url, requestOptions);\n        return {\n          statusCode: response.status,\n          headers: {\n            'x-sentry-rate-limits': response.headers.get('X-Sentry-Rate-Limits'),\n            'retry-after': response.headers.get('Retry-After')\n          }\n        };\n      } catch (e) {\n        (0, _sentryInternalBrowserUtils.clearCachedImplementation)('fetch');\n        throw e;\n      } finally {\n        pendingBodySize -= requestSize;\n        pendingCount--;\n      }\n    }\n    return (0, _sentryCore.createTransport)(options, makeRequest);\n  }\n});","lineCount":64,"map":[[7,2,62,0,"Object"],[7,8,62,0],[7,9,62,0,"defineProperty"],[7,23,62,0],[7,24,62,0,"exports"],[7,31,62,0],[8,4,62,0,"enumerable"],[8,14,62,0],[9,4,62,0,"get"],[9,7,62,0],[9,18,62,0,"get"],[9,19,62,0],[10,6,62,0],[10,13,62,9,"makeFetchTransport"],[10,31,62,27],[11,4,62,27],[12,2,62,27],[13,2,1,0],[13,6,1,0,"_sentryCore"],[13,17,1,0],[13,20,1,0,"require"],[13,27,1,0],[13,28,1,0,"_dependencyMap"],[13,42,1,0],[14,2,2,0],[14,6,2,0,"_sentryInternalBrowserUtils"],[14,33,2,0],[14,36,2,0,"require"],[14,43,2,0],[14,44,2,0,"_dependencyMap"],[14,58,2,0],[15,2,4,0],[16,0,5,0],[17,0,6,0],[18,2,7,0],[18,11,7,9,"makeFetchTransport"],[18,29,7,27,"makeFetchTransport"],[18,30,8,2,"options"],[18,37,8,9],[18,39,9,2,"nativeFetch"],[18,50,9,13],[18,53,9,16],[18,57,9,16,"getNativeImplementation"],[18,84,9,39],[18,85,9,39,"getNativeImplementation"],[18,108,9,39],[18,110,9,40],[18,117,9,47],[18,118,9,48],[18,120,10,2],[19,4,11,2],[19,8,11,6,"pendingBodySize"],[19,23,11,21],[19,26,11,24],[19,27,11,25],[20,4,12,2],[20,8,12,6,"pendingCount"],[20,20,12,18],[20,23,12,21],[20,24,12,22],[21,4,14,2],[21,19,14,17,"makeRequest"],[21,30,14,28,"makeRequest"],[21,31,14,29,"request"],[21,38,14,36],[21,40,14,38],[22,6,15,4],[22,12,15,10,"requestSize"],[22,23,15,21],[22,26,15,24,"request"],[22,33,15,31],[22,34,15,32,"body"],[22,38,15,36],[22,39,15,37,"length"],[22,45,15,43],[23,6,16,4,"pendingBodySize"],[23,21,16,19],[23,25,16,23,"requestSize"],[23,36,16,34],[24,6,17,4,"pendingCount"],[24,18,17,16],[24,20,17,18],[25,6,19,4],[25,12,19,10,"requestOptions"],[25,26,19,24],[25,29,19,27],[26,8,20,6,"body"],[26,12,20,10],[26,14,20,12,"request"],[26,21,20,19],[26,22,20,20,"body"],[26,26,20,24],[27,8,21,6,"method"],[27,14,21,12],[27,16,21,14],[27,22,21,20],[28,8,22,6,"referrerPolicy"],[28,22,22,20],[28,24,22,22],[28,39,22,37],[29,8,23,6,"headers"],[29,15,23,13],[29,17,23,15,"options"],[29,24,23,22],[29,25,23,23,"headers"],[29,32,23,30],[30,8,24,6],[31,8,25,6],[32,8,26,6],[33,8,27,6],[34,8,28,6],[35,8,29,6],[36,8,30,6],[37,8,31,6],[38,8,32,6],[39,8,33,6],[40,8,34,6],[41,8,35,6,"keepalive"],[41,17,35,15],[41,19,35,17,"pendingBodySize"],[41,34,35,32],[41,38,35,36],[41,43,35,41],[41,47,35,45,"pendingCount"],[41,59,35,57],[41,62,35,60],[41,64,35,62],[42,8,36,6],[42,11,36,9,"options"],[42,18,36,16],[42,19,36,17,"fetchOptions"],[43,6,37,4],[43,7,37,5],[44,6,39,4],[44,10,39,8],[45,8,40,6],[46,8,41,6],[46,14,41,12,"response"],[46,22,41,20],[46,25,41,23],[46,31,41,29,"nativeFetch"],[46,42,41,40],[46,43,41,41,"options"],[46,50,41,48],[46,51,41,49,"url"],[46,54,41,52],[46,56,41,54,"requestOptions"],[46,70,41,68],[46,71,41,69],[47,8,43,6],[47,15,43,13],[48,10,44,8,"statusCode"],[48,20,44,18],[48,22,44,20,"response"],[48,30,44,28],[48,31,44,29,"status"],[48,37,44,35],[49,10,45,8,"headers"],[49,17,45,15],[49,19,45,17],[50,12,46,10],[50,34,46,32],[50,36,46,34,"response"],[50,44,46,42],[50,45,46,43,"headers"],[50,52,46,50],[50,53,46,51,"get"],[50,56,46,54],[50,57,46,55],[50,79,46,77],[50,80,46,78],[51,12,47,10],[51,25,47,23],[51,27,47,25,"response"],[51,35,47,33],[51,36,47,34,"headers"],[51,43,47,41],[51,44,47,42,"get"],[51,47,47,45],[51,48,47,46],[51,61,47,59],[52,10,48,8],[53,8,49,6],[53,9,49,7],[54,6,50,4],[54,7,50,5],[54,8,50,6],[54,15,50,13,"e"],[54,16,50,14],[54,18,50,16],[55,8,51,6],[55,12,51,6,"clearCachedImplementation"],[55,39,51,31],[55,40,51,31,"clearCachedImplementation"],[55,65,51,31],[55,67,51,32],[55,74,51,39],[55,75,51,40],[56,8,52,6],[56,14,52,12,"e"],[56,15,52,13],[57,6,53,4],[57,7,53,5],[57,16,53,14],[58,8,54,6,"pendingBodySize"],[58,23,54,21],[58,27,54,25,"requestSize"],[58,38,54,36],[59,8,55,6,"pendingCount"],[59,20,55,18],[59,22,55,20],[60,6,56,4],[61,4,57,2],[62,4,59,2],[62,11,59,9],[62,15,59,9,"createTransport"],[62,26,59,24],[62,27,59,24,"createTransport"],[62,42,59,24],[62,44,59,25,"options"],[62,51,59,32],[62,53,59,34,"makeRequest"],[62,64,59,45],[62,65,59,46],[63,2,60,0],[64,0,60,1],[64,3]],"functionMap":{"names":["<global>","makeFetchTransport","makeRequest"],"mappings":"AAA;ACM;ECO;GD2C;CDG"},"hasCjsExports":false},"type":"js/module"}]}