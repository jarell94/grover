{"dependencies":[{"name":"../debug-build.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":48,"index":48}}],"key":"rfhktnzi6PvZxT1xtyHWbBktN/w=","exportNames":["*"],"imports":1}},{"name":"../utils/debug-logger.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":49},"end":{"line":2,"column":49,"index":98}}],"key":"bptn1GZFOkS4BOMU8jhPqqHmvAc=","exportNames":["*"],"imports":1}},{"name":"../utils/stacktrace.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":99},"end":{"line":3,"column":57,"index":156}}],"key":"WpLJaT745+DkgThT6ewjxOGI2qI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"addHandler\", {\n    enumerable: true,\n    get: function () {\n      return addHandler;\n    }\n  });\n  Object.defineProperty(exports, \"maybeInstrument\", {\n    enumerable: true,\n    get: function () {\n      return maybeInstrument;\n    }\n  });\n  Object.defineProperty(exports, \"resetInstrumentationHandlers\", {\n    enumerable: true,\n    get: function () {\n      return resetInstrumentationHandlers;\n    }\n  });\n  Object.defineProperty(exports, \"triggerHandlers\", {\n    enumerable: true,\n    get: function () {\n      return triggerHandlers;\n    }\n  });\n  var _debugBuildJs = require(_dependencyMap[0], \"../debug-build.js\");\n  var _utilsDebugLoggerJs = require(_dependencyMap[1], \"../utils/debug-logger.js\");\n  var _utilsStacktraceJs = require(_dependencyMap[2], \"../utils/stacktrace.js\");\n  // We keep the handlers globally\n  const handlers = {};\n  const instrumented = {};\n\n  /** Add a handler function. */\n  function addHandler(type, handler) {\n    handlers[type] = handlers[type] || [];\n    handlers[type].push(handler);\n  }\n\n  /**\n   * Reset all instrumentation handlers.\n   * This can be used by tests to ensure we have a clean slate of instrumentation handlers.\n   */\n  function resetInstrumentationHandlers() {\n    Object.keys(handlers).forEach(key => {\n      handlers[key] = undefined;\n    });\n  }\n\n  /** Maybe run an instrumentation function, unless it was already called. */\n  function maybeInstrument(type, instrumentFn) {\n    if (!instrumented[type]) {\n      instrumented[type] = true;\n      try {\n        instrumentFn();\n      } catch (e) {\n        _debugBuildJs.DEBUG_BUILD && _utilsDebugLoggerJs.debug.error(`Error while instrumenting ${type}`, e);\n      }\n    }\n  }\n\n  /** Trigger handlers for a given instrumentation type. */\n  function triggerHandlers(type, data) {\n    const typeHandlers = type && handlers[type];\n    if (!typeHandlers) {\n      return;\n    }\n    for (const handler of typeHandlers) {\n      try {\n        handler(data);\n      } catch (e) {\n        _debugBuildJs.DEBUG_BUILD && _utilsDebugLoggerJs.debug.error(`Error while triggering instrumentation handler.\\nType: ${type}\\nName: ${(0, _utilsStacktraceJs.getFunctionName)(handler)}\\nError:`, e);\n      }\n    }\n  }\n});","lineCount":80,"map":[[7,2,57,0,"Object"],[7,8,57,0],[7,9,57,0,"defineProperty"],[7,23,57,0],[7,24,57,0,"exports"],[7,31,57,0],[8,4,57,0,"enumerable"],[8,14,57,0],[9,4,57,0,"get"],[9,7,57,0],[9,18,57,0,"get"],[9,19,57,0],[10,6,57,0],[10,13,57,9,"addHandler"],[10,23,57,19],[11,4,57,19],[12,2,57,19],[13,2,57,0,"Object"],[13,8,57,0],[13,9,57,0,"defineProperty"],[13,23,57,0],[13,24,57,0,"exports"],[13,31,57,0],[14,4,57,0,"enumerable"],[14,14,57,0],[15,4,57,0,"get"],[15,7,57,0],[15,18,57,0,"get"],[15,19,57,0],[16,6,57,0],[16,13,57,21,"maybeInstrument"],[16,28,57,36],[17,4,57,36],[18,2,57,36],[19,2,57,0,"Object"],[19,8,57,0],[19,9,57,0,"defineProperty"],[19,23,57,0],[19,24,57,0,"exports"],[19,31,57,0],[20,4,57,0,"enumerable"],[20,14,57,0],[21,4,57,0,"get"],[21,7,57,0],[21,18,57,0,"get"],[21,19,57,0],[22,6,57,0],[22,13,57,38,"resetInstrumentationHandlers"],[22,41,57,66],[23,4,57,66],[24,2,57,66],[25,2,57,0,"Object"],[25,8,57,0],[25,9,57,0,"defineProperty"],[25,23,57,0],[25,24,57,0,"exports"],[25,31,57,0],[26,4,57,0,"enumerable"],[26,14,57,0],[27,4,57,0,"get"],[27,7,57,0],[27,18,57,0,"get"],[27,19,57,0],[28,6,57,0],[28,13,57,68,"triggerHandlers"],[28,28,57,83],[29,4,57,83],[30,2,57,83],[31,2,1,0],[31,6,1,0,"_debugBuildJs"],[31,19,1,0],[31,22,1,0,"require"],[31,29,1,0],[31,30,1,0,"_dependencyMap"],[31,44,1,0],[32,2,2,0],[32,6,2,0,"_utilsDebugLoggerJs"],[32,25,2,0],[32,28,2,0,"require"],[32,35,2,0],[32,36,2,0,"_dependencyMap"],[32,50,2,0],[33,2,3,0],[33,6,3,0,"_utilsStacktraceJs"],[33,24,3,0],[33,27,3,0,"require"],[33,34,3,0],[33,35,3,0,"_dependencyMap"],[33,49,3,0],[34,2,5,0],[35,2,6,0],[35,8,6,6,"handlers"],[35,16,6,14],[35,19,6,17],[35,20,6,18],[35,21,6,19],[36,2,7,0],[36,8,7,6,"instrumented"],[36,20,7,18],[36,23,7,21],[36,24,7,22],[36,25,7,23],[38,2,9,0],[39,2,10,0],[39,11,10,9,"addHandler"],[39,21,10,19,"addHandler"],[39,22,10,20,"type"],[39,26,10,24],[39,28,10,26,"handler"],[39,35,10,33],[39,37,10,35],[40,4,11,2,"handlers"],[40,12,11,10],[40,13,11,11,"type"],[40,17,11,15],[40,18,11,16],[40,21,11,19,"handlers"],[40,29,11,27],[40,30,11,28,"type"],[40,34,11,32],[40,35,11,33],[40,39,11,37],[40,41,11,39],[41,4,12,3,"handlers"],[41,12,12,11],[41,13,12,12,"type"],[41,17,12,16],[41,18,12,17],[41,19,12,20,"push"],[41,23,12,24],[41,24,12,25,"handler"],[41,31,12,32],[41,32,12,33],[42,2,13,0],[44,2,15,0],[45,0,16,0],[46,0,17,0],[47,0,18,0],[48,2,19,0],[48,11,19,9,"resetInstrumentationHandlers"],[48,39,19,37,"resetInstrumentationHandlers"],[48,40,19,37],[48,42,19,40],[49,4,20,2,"Object"],[49,10,20,8],[49,11,20,9,"keys"],[49,15,20,13],[49,16,20,14,"handlers"],[49,24,20,22],[49,25,20,23],[49,26,20,24,"forEach"],[49,33,20,31],[49,34,20,32,"key"],[49,37,20,35],[49,41,20,39],[50,6,21,4,"handlers"],[50,14,21,12],[50,15,21,13,"key"],[50,18,21,16],[50,19,21,18],[50,22,21,21,"undefined"],[50,31,21,30],[51,4,22,2],[51,5,22,3],[51,6,22,4],[52,2,23,0],[54,2,25,0],[55,2,26,0],[55,11,26,9,"maybeInstrument"],[55,26,26,24,"maybeInstrument"],[55,27,26,25,"type"],[55,31,26,29],[55,33,26,31,"instrumentFn"],[55,45,26,43],[55,47,26,45],[56,4,27,2],[56,8,27,6],[56,9,27,7,"instrumented"],[56,21,27,19],[56,22,27,20,"type"],[56,26,27,24],[56,27,27,25],[56,29,27,27],[57,6,28,4,"instrumented"],[57,18,28,16],[57,19,28,17,"type"],[57,23,28,21],[57,24,28,22],[57,27,28,25],[57,31,28,29],[58,6,29,4],[58,10,29,8],[59,8,30,6,"instrumentFn"],[59,20,30,18],[59,21,30,19],[59,22,30,20],[60,6,31,4],[60,7,31,5],[60,8,31,6],[60,15,31,13,"e"],[60,16,31,14],[60,18,31,16],[61,8,32,6,"DEBUG_BUILD"],[61,21,32,17],[61,22,32,17,"DEBUG_BUILD"],[61,33,32,17],[61,37,32,21,"debug"],[61,56,32,26],[61,57,32,26,"debug"],[61,62,32,26],[61,63,32,27,"error"],[61,68,32,32],[61,69,32,33],[61,98,32,62,"type"],[61,102,32,66],[61,104,32,68],[61,106,32,70,"e"],[61,107,32,71],[61,108,32,72],[62,6,33,4],[63,4,34,2],[64,2,35,0],[66,2,37,0],[67,2,38,0],[67,11,38,9,"triggerHandlers"],[67,26,38,24,"triggerHandlers"],[67,27,38,25,"type"],[67,31,38,29],[67,33,38,31,"data"],[67,37,38,35],[67,39,38,37],[68,4,39,2],[68,10,39,8,"typeHandlers"],[68,22,39,20],[68,25,39,23,"type"],[68,29,39,27],[68,33,39,31,"handlers"],[68,41,39,39],[68,42,39,40,"type"],[68,46,39,44],[68,47,39,45],[69,4,40,2],[69,8,40,6],[69,9,40,7,"typeHandlers"],[69,21,40,19],[69,23,40,21],[70,6,41,4],[71,4,42,2],[72,4,44,2],[72,9,44,7],[72,15,44,13,"handler"],[72,22,44,20],[72,26,44,24,"typeHandlers"],[72,38,44,36],[72,40,44,38],[73,6,45,4],[73,10,45,8],[74,8,46,6,"handler"],[74,15,46,13],[74,16,46,14,"data"],[74,20,46,18],[74,21,46,19],[75,6,47,4],[75,7,47,5],[75,8,47,6],[75,15,47,13,"e"],[75,16,47,14],[75,18,47,16],[76,8,48,6,"DEBUG_BUILD"],[76,21,48,17],[76,22,48,17,"DEBUG_BUILD"],[76,33,48,17],[76,37,49,8,"debug"],[76,56,49,13],[76,57,49,13,"debug"],[76,62,49,13],[76,63,49,14,"error"],[76,68,49,19],[76,69,50,10],[76,127,50,68,"type"],[76,131,50,72],[76,142,50,83],[76,146,50,83,"getFunctionName"],[76,164,50,98],[76,165,50,98,"getFunctionName"],[76,180,50,98],[76,182,50,99,"handler"],[76,189,50,106],[76,190,50,107],[76,200,50,117],[76,202,51,10,"e"],[76,203,52,8],[76,204,52,9],[77,6,53,4],[78,4,54,2],[79,2,55,0],[80,0,55,1],[80,3]],"functionMap":{"names":["<global>","addHandler","resetInstrumentationHandlers","Object.keys.forEach$argument_0","maybeInstrument","triggerHandlers"],"mappings":"AAA;ACS;CDG;AEM;gCCC;GDE;CFC;AIG;CJS;AKG;CLiB"},"hasCjsExports":false},"type":"js/module"}]}