{"dependencies":[{"name":"../../../types.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":43,"index":43}}],"key":"How8xsoS0dUDpKnVy0jHSdmxOM4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"onHidden\", {\n    enumerable: true,\n    get: function () {\n      return onHidden;\n    }\n  });\n  var _typesJs = require(_dependencyMap[0], \"../../../types.js\");\n  /*\n   * Copyright 2020 Google LLC\n   *\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   *     https://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n\n  // Sentry-specific change:\n  // This function's logic was NOT updated to web-vitals 4.2.4 or 5.x but we continue\n  // to use the web-vitals 3.5.2 versiondue to us having stricter browser support.\n  // PR with context that made the changes: https://github.com/GoogleChrome/web-vitals/pull/442/files#r1530492402\n  // The PR removed listening to the `pagehide` event, in favour of only listening to `visibilitychange` event.\n  // This is \"more correct\" but some browsers we still support (Safari <14.4) don't fully support `visibilitychange`\n  // or have known bugs w.r.t the `visibilitychange` event.\n  // TODO (v11): If we decide to drop support for Safari 14.4, we can use the logic from web-vitals 4.2.4\n  // In this case, we also need to update the integration tests that currently trigger the `pagehide` event to\n  // simulate the page being hidden.\n  const onHidden = cb => {\n    const onHiddenOrPageHide = event => {\n      if (event.type === 'pagehide' || _typesJs.WINDOW.document?.visibilityState === 'hidden') {\n        cb(event);\n      }\n    };\n    if (_typesJs.WINDOW.document) {\n      addEventListener('visibilitychange', onHiddenOrPageHide, true);\n      // Some browsers have buggy implementations of visibilitychange,\n      // so we use pagehide in addition, just to be safe.\n      addEventListener('pagehide', onHiddenOrPageHide, true);\n    }\n  };\n});","lineCount":53,"map":[[7,2,45,0,"Object"],[7,8,45,0],[7,9,45,0,"defineProperty"],[7,23,45,0],[7,24,45,0,"exports"],[7,31,45,0],[8,4,45,0,"enumerable"],[8,14,45,0],[9,4,45,0,"get"],[9,7,45,0],[9,18,45,0,"get"],[9,19,45,0],[10,6,45,0],[10,13,45,9,"onHidden"],[10,21,45,17],[11,4,45,17],[12,2,45,17],[13,2,1,0],[13,6,1,0,"_typesJs"],[13,14,1,0],[13,17,1,0,"require"],[13,24,1,0],[13,25,1,0,"_dependencyMap"],[13,39,1,0],[14,2,3,0],[15,0,4,0],[16,0,5,0],[17,0,6,0],[18,0,7,0],[19,0,8,0],[20,0,9,0],[21,0,10,0],[22,0,11,0],[23,0,12,0],[24,0,13,0],[25,0,14,0],[26,0,15,0],[27,0,16,0],[28,0,17,0],[30,2,20,0],[31,2,21,0],[32,2,22,0],[33,2,23,0],[34,2,24,0],[35,2,25,0],[36,2,26,0],[37,2,27,0],[38,2,28,0],[39,2,29,0],[40,2,30,0],[40,8,30,6,"onHidden"],[40,16,30,14],[40,19,30,18,"cb"],[40,21,30,20],[40,25,30,25],[41,4,31,2],[41,10,31,8,"onHiddenOrPageHide"],[41,28,31,26],[41,31,31,30,"event"],[41,36,31,35],[41,40,31,40],[42,6,32,4],[42,10,32,8,"event"],[42,15,32,13],[42,16,32,14,"type"],[42,20,32,18],[42,25,32,23],[42,35,32,33],[42,39,32,37,"WINDOW"],[42,47,32,43],[42,48,32,43,"WINDOW"],[42,54,32,43],[42,55,32,44,"document"],[42,63,32,52],[42,65,32,54,"visibilityState"],[42,80,32,69],[42,85,32,74],[42,93,32,82],[42,95,32,84],[43,8,33,6,"cb"],[43,10,33,8],[43,11,33,9,"event"],[43,16,33,14],[43,17,33,15],[44,6,34,4],[45,4,35,2],[45,5,35,3],[46,4,37,2],[46,8,37,6,"WINDOW"],[46,16,37,12],[46,17,37,12,"WINDOW"],[46,23,37,12],[46,24,37,13,"document"],[46,32,37,21],[46,34,37,23],[47,6,38,4,"addEventListener"],[47,22,38,20],[47,23,38,21],[47,41,38,39],[47,43,38,41,"onHiddenOrPageHide"],[47,61,38,59],[47,63,38,61],[47,67,38,65],[47,68,38,66],[48,6,39,4],[49,6,40,4],[50,6,41,4,"addEventListener"],[50,22,41,20],[50,23,41,21],[50,33,41,31],[50,35,41,33,"onHiddenOrPageHide"],[50,53,41,51],[50,55,41,53],[50,59,41,57],[50,60,41,58],[51,4,42,2],[52,2,43,0],[52,3,43,1],[53,0,43,2],[53,3]],"functionMap":{"names":["<global>","onHidden","onHiddenOrPageHide"],"mappings":"AAA;iBC6B;6BCC;GDI;CDQ"},"hasCjsExports":false},"type":"js/module"}]}