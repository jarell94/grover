{"dependencies":[{"name":"./lib/bindReporter.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":53,"index":53}}],"key":"yZXTUsWh1M46DyxIbZ88NUHRymg=","exportNames":["*"],"imports":1}},{"name":"./lib/initMetric.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":54},"end":{"line":2,"column":49,"index":103}}],"key":"3h8m+kvAV2o3xN93IHHrmBqzs4s=","exportNames":["*"],"imports":1}},{"name":"./lib/initUnique.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":104},"end":{"line":3,"column":49,"index":153}}],"key":"hut8a99D/Gv1jGW5dfMa/Znpg4I=","exportNames":["*"],"imports":1}},{"name":"./lib/InteractionManager.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":154},"end":{"line":4,"column":65,"index":219}}],"key":"d15F3tPUyBRUDmamswM68sTk7Y8=","exportNames":["*"],"imports":1}},{"name":"./lib/observe.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":220},"end":{"line":5,"column":43,"index":263}}],"key":"Cz2RoRvLyGQyofIDJmcgFo6dicM=","exportNames":["*"],"imports":1}},{"name":"./lib/onHidden.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":264},"end":{"line":6,"column":45,"index":309}}],"key":"Me8dIXVCoQX50hAKyNiBvASIs+8=","exportNames":["*"],"imports":1}},{"name":"./lib/polyfills/interactionCountPolyfill.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":310},"end":{"line":7,"column":91,"index":401}}],"key":"scDlk2WKDLOYPPbp6vPwC12IYso=","exportNames":["*"],"imports":1}},{"name":"./lib/whenActivated.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":402},"end":{"line":8,"column":55,"index":457}}],"key":"ZUHRzyG92JJbjB1/O2ptt6DviqY=","exportNames":["*"],"imports":1}},{"name":"./lib/whenIdleOrHidden.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":9,"column":0,"index":458},"end":{"line":9,"column":61,"index":519}}],"key":"aIXUXNtl+4w2mSAxoQv7ThovIbE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"INPThresholds\", {\n    enumerable: true,\n    get: function () {\n      return INPThresholds;\n    }\n  });\n  Object.defineProperty(exports, \"onINP\", {\n    enumerable: true,\n    get: function () {\n      return onINP;\n    }\n  });\n  var _libBindReporterJs = require(_dependencyMap[0], \"./lib/bindReporter.js\");\n  var _libInitMetricJs = require(_dependencyMap[1], \"./lib/initMetric.js\");\n  var _libInitUniqueJs = require(_dependencyMap[2], \"./lib/initUnique.js\");\n  var _libInteractionManagerJs = require(_dependencyMap[3], \"./lib/InteractionManager.js\");\n  var _libObserveJs = require(_dependencyMap[4], \"./lib/observe.js\");\n  var _libOnHiddenJs = require(_dependencyMap[5], \"./lib/onHidden.js\");\n  var _libPolyfillsInteractionCountPolyfillJs = require(_dependencyMap[6], \"./lib/polyfills/interactionCountPolyfill.js\");\n  var _libWhenActivatedJs = require(_dependencyMap[7], \"./lib/whenActivated.js\");\n  var _libWhenIdleOrHiddenJs = require(_dependencyMap[8], \"./lib/whenIdleOrHidden.js\");\n  /*\n   * Copyright 2022 Google LLC\n   *\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   *     https://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n\n  /** Thresholds for INP. See https://web.dev/articles/inp#what_is_a_good_inp_score */\n  const INPThresholds = [200, 500];\n\n  // The default `durationThreshold` used across this library for observing\n  // `event` entries via PerformanceObserver.\n  const DEFAULT_DURATION_THRESHOLD = 40;\n\n  /**\n   * Calculates the [INP](https://web.dev/articles/inp) value for the current\n   * page and calls the `callback` function once the value is ready, along with\n   * the `event` performance entries reported for that interaction. The reported\n   * value is a `DOMHighResTimeStamp`.\n   *\n   * A custom `durationThreshold` configuration option can optionally be passed\n   * to control what `event-timing` entries are considered for INP reporting. The\n   * default threshold is `40`, which means INP scores of less than 40 will not\n   * be reported. To avoid reporting no interactions in these cases, the library\n   * will fall back to the input delay of the first interaction. Note that this\n   * will not affect your 75th percentile INP value unless that value is also\n   * less than 40 (well below the recommended\n   * [good](https://web.dev/articles/inp#what_is_a_good_inp_score) threshold).\n   *\n   * If the `reportAllChanges` configuration option is set to `true`, the\n   * `callback` function will be called as soon as the value is initially\n   * determined as well as any time the value changes throughout the page\n   * lifespan.\n   *\n   * _**Important:** INP should be continually monitored for changes throughout\n   * the entire lifespan of a pageâ€”including if the user returns to the page after\n   * it's been hidden/backgrounded. However, since browsers often [will not fire\n   * additional callbacks once the user has backgrounded a\n   * page](https://developer.chrome.com/blog/page-lifecycle-api/#advice-hidden),\n   * `callback` is always called when the page's visibility state changes to\n   * hidden. As a result, the `callback` function might be called multiple times\n   * during the same page load._\n   */\n  const onINP = (onReport, opts = {}) => {\n    // Return if the browser doesn't support all APIs needed to measure INP.\n    if (!(globalThis.PerformanceEventTiming && 'interactionId' in PerformanceEventTiming.prototype)) {\n      return;\n    }\n    (0, _libWhenActivatedJs.whenActivated)(() => {\n      // TODO(philipwalton): remove once the polyfill is no longer needed.\n      (0, _libPolyfillsInteractionCountPolyfillJs.initInteractionCountPolyfill)();\n      const metric = (0, _libInitMetricJs.initMetric)('INP');\n      // eslint-disable-next-line prefer-const\n      let report;\n      const interactionManager = (0, _libInitUniqueJs.initUnique)(opts, _libInteractionManagerJs.InteractionManager);\n      const handleEntries = entries => {\n        // Queue the `handleEntries()` callback in the next idle task.\n        // This is needed to increase the chances that all event entries that\n        // occurred between the user interaction and the next paint\n        // have been dispatched. Note: there is currently an experiment\n        // running in Chrome (EventTimingKeypressAndCompositionInteractionId)\n        // 123+ that if rolled out fully may make this no longer necessary.\n        (0, _libWhenIdleOrHiddenJs.whenIdleOrHidden)(() => {\n          for (const entry of entries) {\n            interactionManager._processEntry(entry);\n          }\n          const inp = interactionManager._estimateP98LongestInteraction();\n          if (inp && inp._latency !== metric.value) {\n            metric.value = inp._latency;\n            metric.entries = inp.entries;\n            report();\n          }\n        });\n      };\n      const po = (0, _libObserveJs.observe)('event', handleEntries, {\n        // Event Timing entries have their durations rounded to the nearest 8ms,\n        // so a duration of 40ms would be any event that spans 2.5 or more frames\n        // at 60Hz. This threshold is chosen to strike a balance between usefulness\n        // and performance. Running this callback for any interaction that spans\n        // just one or two frames is likely not worth the insight that could be\n        // gained.\n        durationThreshold: opts.durationThreshold ?? DEFAULT_DURATION_THRESHOLD\n      });\n      report = (0, _libBindReporterJs.bindReporter)(onReport, metric, INPThresholds, opts.reportAllChanges);\n      if (po) {\n        // Also observe entries of type `first-input`. This is useful in cases\n        // where the first interaction is less than the `durationThreshold`.\n        po.observe({\n          type: 'first-input',\n          buffered: true\n        });\n\n        // sentry: we use onHidden instead of directly listening to visibilitychange\n        // because some browsers we still support (Safari <14.4) don't fully support\n        // `visibilitychange` or have known bugs w.r.t the `visibilitychange` event.\n        (0, _libOnHiddenJs.onHidden)(() => {\n          handleEntries(po.takeRecords());\n          report(true);\n        });\n      }\n    });\n  };\n});","lineCount":139,"map":[[7,2,130,0,"Object"],[7,8,130,0],[7,9,130,0,"defineProperty"],[7,23,130,0],[7,24,130,0,"exports"],[7,31,130,0],[8,4,130,0,"enumerable"],[8,14,130,0],[9,4,130,0,"get"],[9,7,130,0],[9,18,130,0,"get"],[9,19,130,0],[10,6,130,0],[10,13,130,9,"INPThresholds"],[10,26,130,22],[11,4,130,22],[12,2,130,22],[13,2,130,0,"Object"],[13,8,130,0],[13,9,130,0,"defineProperty"],[13,23,130,0],[13,24,130,0,"exports"],[13,31,130,0],[14,4,130,0,"enumerable"],[14,14,130,0],[15,4,130,0,"get"],[15,7,130,0],[15,18,130,0,"get"],[15,19,130,0],[16,6,130,0],[16,13,130,24,"onINP"],[16,18,130,29],[17,4,130,29],[18,2,130,29],[19,2,1,0],[19,6,1,0,"_libBindReporterJs"],[19,24,1,0],[19,27,1,0,"require"],[19,34,1,0],[19,35,1,0,"_dependencyMap"],[19,49,1,0],[20,2,2,0],[20,6,2,0,"_libInitMetricJs"],[20,22,2,0],[20,25,2,0,"require"],[20,32,2,0],[20,33,2,0,"_dependencyMap"],[20,47,2,0],[21,2,3,0],[21,6,3,0,"_libInitUniqueJs"],[21,22,3,0],[21,25,3,0,"require"],[21,32,3,0],[21,33,3,0,"_dependencyMap"],[21,47,3,0],[22,2,4,0],[22,6,4,0,"_libInteractionManagerJs"],[22,30,4,0],[22,33,4,0,"require"],[22,40,4,0],[22,41,4,0,"_dependencyMap"],[22,55,4,0],[23,2,5,0],[23,6,5,0,"_libObserveJs"],[23,19,5,0],[23,22,5,0,"require"],[23,29,5,0],[23,30,5,0,"_dependencyMap"],[23,44,5,0],[24,2,6,0],[24,6,6,0,"_libOnHiddenJs"],[24,20,6,0],[24,23,6,0,"require"],[24,30,6,0],[24,31,6,0,"_dependencyMap"],[24,45,6,0],[25,2,7,0],[25,6,7,0,"_libPolyfillsInteractionCountPolyfillJs"],[25,45,7,0],[25,48,7,0,"require"],[25,55,7,0],[25,56,7,0,"_dependencyMap"],[25,70,7,0],[26,2,8,0],[26,6,8,0,"_libWhenActivatedJs"],[26,25,8,0],[26,28,8,0,"require"],[26,35,8,0],[26,36,8,0,"_dependencyMap"],[26,50,8,0],[27,2,9,0],[27,6,9,0,"_libWhenIdleOrHiddenJs"],[27,28,9,0],[27,31,9,0,"require"],[27,38,9,0],[27,39,9,0,"_dependencyMap"],[27,53,9,0],[28,2,11,0],[29,0,12,0],[30,0,13,0],[31,0,14,0],[32,0,15,0],[33,0,16,0],[34,0,17,0],[35,0,18,0],[36,0,19,0],[37,0,20,0],[38,0,21,0],[39,0,22,0],[40,0,23,0],[41,0,24,0],[42,0,25,0],[44,2,28,0],[45,2,29,0],[45,8,29,6,"INPThresholds"],[45,21,29,19],[45,24,29,22],[45,25,29,23],[45,28,29,26],[45,30,29,28],[45,33,29,31],[45,34,29,32],[47,2,31,0],[48,2,32,0],[49,2,33,0],[49,8,33,6,"DEFAULT_DURATION_THRESHOLD"],[49,34,33,32],[49,37,33,35],[49,39,33,37],[51,2,35,0],[52,0,36,0],[53,0,37,0],[54,0,38,0],[55,0,39,0],[56,0,40,0],[57,0,41,0],[58,0,42,0],[59,0,43,0],[60,0,44,0],[61,0,45,0],[62,0,46,0],[63,0,47,0],[64,0,48,0],[65,0,49,0],[66,0,50,0],[67,0,51,0],[68,0,52,0],[69,0,53,0],[70,0,54,0],[71,0,55,0],[72,0,56,0],[73,0,57,0],[74,0,58,0],[75,0,59,0],[76,0,60,0],[77,0,61,0],[78,0,62,0],[79,0,63,0],[80,2,64,0],[80,8,64,6,"onINP"],[80,13,64,11],[80,16,64,14,"onINP"],[80,17,64,15,"onReport"],[80,25,64,23],[80,27,64,25,"opts"],[80,31,64,29],[80,34,64,32],[80,35,64,33],[80,36,64,34],[80,41,64,39],[81,4,65,2],[82,4,66,2],[82,8,66,6],[82,10,66,8,"globalThis"],[82,20,66,18],[82,21,66,19,"PerformanceEventTiming"],[82,43,66,41],[82,47,66,45],[82,62,66,60],[82,66,66,64,"PerformanceEventTiming"],[82,88,66,86],[82,89,66,87,"prototype"],[82,98,66,96],[82,99,66,97],[82,101,66,99],[83,6,67,4],[84,4,68,2],[85,4,70,2],[85,8,70,2,"whenActivated"],[85,27,70,15],[85,28,70,15,"whenActivated"],[85,41,70,15],[85,43,70,16],[85,49,70,22],[86,6,71,4],[87,6,72,4],[87,10,72,4,"initInteractionCountPolyfill"],[87,49,72,32],[87,50,72,32,"initInteractionCountPolyfill"],[87,78,72,32],[87,80,72,33],[87,81,72,34],[88,6,74,4],[88,12,74,10,"metric"],[88,18,74,16],[88,21,74,19],[88,25,74,19,"initMetric"],[88,41,74,29],[88,42,74,29,"initMetric"],[88,52,74,29],[88,54,74,30],[88,59,74,35],[88,60,74,36],[89,6,75,4],[90,6,76,4],[90,10,76,8,"report"],[90,16,76,14],[91,6,78,4],[91,12,78,10,"interactionManager"],[91,30,78,28],[91,33,78,31],[91,37,78,31,"initUnique"],[91,53,78,41],[91,54,78,41,"initUnique"],[91,64,78,41],[91,66,78,42,"opts"],[91,70,78,46],[91,72,78,48,"InteractionManager"],[91,96,78,66],[91,97,78,66,"InteractionManager"],[91,115,78,66],[91,116,78,67],[92,6,80,4],[92,12,80,10,"handleEntries"],[92,25,80,23],[92,28,80,27,"entries"],[92,35,80,34],[92,39,80,39],[93,8,81,6],[94,8,82,6],[95,8,83,6],[96,8,84,6],[97,8,85,6],[98,8,86,6],[99,8,87,6],[99,12,87,6,"whenIdleOrHidden"],[99,34,87,22],[99,35,87,22,"whenIdleOrHidden"],[99,51,87,22],[99,53,87,23],[99,59,87,29],[100,10,88,8],[100,15,88,13],[100,21,88,19,"entry"],[100,26,88,24],[100,30,88,28,"entries"],[100,37,88,35],[100,39,88,37],[101,12,89,10,"interactionManager"],[101,30,89,28],[101,31,89,29,"_processEntry"],[101,44,89,42],[101,45,89,43,"entry"],[101,50,89,48],[101,51,89,49],[102,10,90,8],[103,10,92,8],[103,16,92,14,"inp"],[103,19,92,17],[103,22,92,20,"interactionManager"],[103,40,92,38],[103,41,92,39,"_estimateP98LongestInteraction"],[103,71,92,69],[103,72,92,70],[103,73,92,71],[104,10,94,8],[104,14,94,12,"inp"],[104,17,94,15],[104,21,94,19,"inp"],[104,24,94,22],[104,25,94,23,"_latency"],[104,33,94,31],[104,38,94,36,"metric"],[104,44,94,42],[104,45,94,43,"value"],[104,50,94,48],[104,52,94,50],[105,12,95,10,"metric"],[105,18,95,16],[105,19,95,17,"value"],[105,24,95,22],[105,27,95,25,"inp"],[105,30,95,28],[105,31,95,29,"_latency"],[105,39,95,37],[106,12,96,10,"metric"],[106,18,96,16],[106,19,96,17,"entries"],[106,26,96,24],[106,29,96,27,"inp"],[106,32,96,30],[106,33,96,31,"entries"],[106,40,96,38],[107,12,97,10,"report"],[107,18,97,16],[107,19,97,17],[107,20,97,18],[108,10,98,8],[109,8,99,6],[109,9,99,7],[109,10,99,8],[110,6,100,4],[110,7,100,5],[111,6,102,4],[111,12,102,10,"po"],[111,14,102,12],[111,17,102,15],[111,21,102,15,"observe"],[111,34,102,22],[111,35,102,22,"observe"],[111,42,102,22],[111,44,102,23],[111,51,102,30],[111,53,102,32,"handleEntries"],[111,66,102,45],[111,68,102,47],[112,8,103,6],[113,8,104,6],[114,8,105,6],[115,8,106,6],[116,8,107,6],[117,8,108,6],[118,8,109,6,"durationThreshold"],[118,25,109,23],[118,27,109,25,"opts"],[118,31,109,29],[118,32,109,30,"durationThreshold"],[118,49,109,47],[118,53,109,51,"DEFAULT_DURATION_THRESHOLD"],[119,6,110,4],[119,7,110,5],[119,8,110,6],[120,6,112,4,"report"],[120,12,112,10],[120,15,112,13],[120,19,112,13,"bindReporter"],[120,37,112,25],[120,38,112,25,"bindReporter"],[120,50,112,25],[120,52,112,26,"onReport"],[120,60,112,34],[120,62,112,36,"metric"],[120,68,112,42],[120,70,112,44,"INPThresholds"],[120,83,112,57],[120,85,112,59,"opts"],[120,89,112,63],[120,90,112,64,"reportAllChanges"],[120,106,112,80],[120,107,112,81],[121,6,114,4],[121,10,114,8,"po"],[121,12,114,10],[121,14,114,12],[122,8,115,6],[123,8,116,6],[124,8,117,6,"po"],[124,10,117,8],[124,11,117,9,"observe"],[124,18,117,16],[124,19,117,17],[125,10,117,19,"type"],[125,14,117,23],[125,16,117,25],[125,29,117,38],[126,10,117,40,"buffered"],[126,18,117,48],[126,20,117,50],[127,8,117,55],[127,9,117,56],[127,10,117,57],[129,8,119,6],[130,8,120,6],[131,8,121,6],[132,8,122,6],[132,12,122,6,"onHidden"],[132,26,122,14],[132,27,122,14,"onHidden"],[132,35,122,14],[132,37,122,15],[132,43,122,21],[133,10,123,8,"handleEntries"],[133,23,123,21],[133,24,123,22,"po"],[133,26,123,24],[133,27,123,25,"takeRecords"],[133,38,123,36],[133,39,123,37],[133,40,123,39],[133,41,123,40],[134,10,124,8,"report"],[134,16,124,14],[134,17,124,15],[134,21,124,19],[134,22,124,20],[135,8,125,6],[135,9,125,7],[135,10,125,8],[136,6,126,4],[137,4,127,2],[137,5,127,3],[137,6,127,4],[138,2,128,0],[138,3,128,1],[139,0,128,2],[139,3]],"functionMap":{"names":["<global>","onINP","whenActivated$argument_0","handleEntries","whenIdleOrHidden$argument_0","onHidden$argument_0"],"mappings":"AAA;cC+D;gBCM;0BCU;uBCO;ODY;KDC;eGsB;OHG;GDE;CDC"},"hasCjsExports":false},"type":"js/module"}]}