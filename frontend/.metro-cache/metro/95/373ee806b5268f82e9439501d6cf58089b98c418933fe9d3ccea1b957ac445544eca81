{"dependencies":[{"name":"./currentScopes.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":66,"index":66}}],"key":"K7iI+PRtR1yDAq2Cd5P/ht8ORfQ=","exportNames":["*"],"imports":1}},{"name":"./utils/debug-logger.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":67},"end":{"line":2,"column":57,"index":124}}],"key":"/2lWjUciKC30HANSgrpZFMawp8E=","exportNames":["*"],"imports":1}},{"name":"./utils/time.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":125},"end":{"line":3,"column":57,"index":182}}],"key":"jkg47XoPT2ikUhcJR617GeQNnco=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"addBreadcrumb\", {\n    enumerable: true,\n    get: function () {\n      return addBreadcrumb;\n    }\n  });\n  var _currentScopesJs = require(_dependencyMap[0], \"./currentScopes.js\");\n  var _utilsDebugLoggerJs = require(_dependencyMap[1], \"./utils/debug-logger.js\");\n  var _utilsTimeJs = require(_dependencyMap[2], \"./utils/time.js\");\n  /**\n   * Default maximum number of breadcrumbs added to an event. Can be overwritten\n   * with {@link Options.maxBreadcrumbs}.\n   */\n  const DEFAULT_BREADCRUMBS = 100;\n\n  /**\n   * Records a new breadcrumb which will be attached to future events.\n   *\n   * Breadcrumbs will be added to subsequent events to provide more context on\n   * user's actions prior to an error or crash.\n   */\n  function addBreadcrumb(breadcrumb, hint) {\n    const client = (0, _currentScopesJs.getClient)();\n    const isolationScope = (0, _currentScopesJs.getIsolationScope)();\n    if (!client) return;\n    const {\n      beforeBreadcrumb = null,\n      maxBreadcrumbs = DEFAULT_BREADCRUMBS\n    } = client.getOptions();\n    if (maxBreadcrumbs <= 0) return;\n    const timestamp = (0, _utilsTimeJs.dateTimestampInSeconds)();\n    const mergedBreadcrumb = {\n      timestamp,\n      ...breadcrumb\n    };\n    const finalBreadcrumb = beforeBreadcrumb ? (0, _utilsDebugLoggerJs.consoleSandbox)(() => beforeBreadcrumb(mergedBreadcrumb, hint)) : mergedBreadcrumb;\n    if (finalBreadcrumb === null) return;\n    if (client.emit) {\n      client.emit('beforeAddBreadcrumb', finalBreadcrumb, hint);\n    }\n    isolationScope.addBreadcrumb(finalBreadcrumb, maxBreadcrumbs);\n  }\n});","lineCount":49,"map":[[7,2,42,0,"Object"],[7,8,42,0],[7,9,42,0,"defineProperty"],[7,23,42,0],[7,24,42,0,"exports"],[7,31,42,0],[8,4,42,0,"enumerable"],[8,14,42,0],[9,4,42,0,"get"],[9,7,42,0],[9,18,42,0,"get"],[9,19,42,0],[10,6,42,0],[10,13,42,9,"addBreadcrumb"],[10,26,42,22],[11,4,42,22],[12,2,42,22],[13,2,1,0],[13,6,1,0,"_currentScopesJs"],[13,22,1,0],[13,25,1,0,"require"],[13,32,1,0],[13,33,1,0,"_dependencyMap"],[13,47,1,0],[14,2,2,0],[14,6,2,0,"_utilsDebugLoggerJs"],[14,25,2,0],[14,28,2,0,"require"],[14,35,2,0],[14,36,2,0,"_dependencyMap"],[14,50,2,0],[15,2,3,0],[15,6,3,0,"_utilsTimeJs"],[15,18,3,0],[15,21,3,0,"require"],[15,28,3,0],[15,29,3,0,"_dependencyMap"],[15,43,3,0],[16,2,5,0],[17,0,6,0],[18,0,7,0],[19,0,8,0],[20,2,9,0],[20,8,9,6,"DEFAULT_BREADCRUMBS"],[20,27,9,25],[20,30,9,28],[20,33,9,31],[22,2,11,0],[23,0,12,0],[24,0,13,0],[25,0,14,0],[26,0,15,0],[27,0,16,0],[28,2,17,0],[28,11,17,9,"addBreadcrumb"],[28,24,17,22,"addBreadcrumb"],[28,25,17,23,"breadcrumb"],[28,35,17,33],[28,37,17,35,"hint"],[28,41,17,39],[28,43,17,41],[29,4,18,2],[29,10,18,8,"client"],[29,16,18,14],[29,19,18,17],[29,23,18,17,"getClient"],[29,39,18,26],[29,40,18,26,"getClient"],[29,49,18,26],[29,51,18,27],[29,52,18,28],[30,4,19,2],[30,10,19,8,"isolationScope"],[30,24,19,22],[30,27,19,25],[30,31,19,25,"getIsolationScope"],[30,47,19,42],[30,48,19,42,"getIsolationScope"],[30,65,19,42],[30,67,19,43],[30,68,19,44],[31,4,21,2],[31,8,21,6],[31,9,21,7,"client"],[31,15,21,13],[31,17,21,15],[32,4,23,2],[32,10,23,8],[33,6,23,10,"beforeBreadcrumb"],[33,22,23,26],[33,25,23,29],[33,29,23,33],[34,6,23,35,"maxBreadcrumbs"],[34,20,23,49],[34,23,23,52,"DEFAULT_BREADCRUMBS"],[35,4,23,72],[35,5,23,73],[35,8,23,76,"client"],[35,14,23,82],[35,15,23,83,"getOptions"],[35,25,23,93],[35,26,23,94],[35,27,23,95],[36,4,25,2],[36,8,25,6,"maxBreadcrumbs"],[36,22,25,20],[36,26,25,24],[36,27,25,25],[36,29,25,27],[37,4,27,2],[37,10,27,8,"timestamp"],[37,19,27,17],[37,22,27,20],[37,26,27,20,"dateTimestampInSeconds"],[37,38,27,42],[37,39,27,42,"dateTimestampInSeconds"],[37,61,27,42],[37,63,27,43],[37,64,27,44],[38,4,28,2],[38,10,28,8,"mergedBreadcrumb"],[38,26,28,24],[38,29,28,27],[39,6,28,29,"timestamp"],[39,15,28,38],[40,6,28,40],[40,9,28,43,"breadcrumb"],[41,4,28,54],[41,5,28,55],[42,4,29,2],[42,10,29,8,"finalBreadcrumb"],[42,25,29,23],[42,28,29,26,"beforeBreadcrumb"],[42,44,29,42],[42,47,30,7],[42,51,30,7,"consoleSandbox"],[42,70,30,21],[42,71,30,21,"consoleSandbox"],[42,85,30,21],[42,87,30,22],[42,93,30,28,"beforeBreadcrumb"],[42,109,30,44],[42,110,30,45,"mergedBreadcrumb"],[42,126,30,61],[42,128,30,63,"hint"],[42,132,30,67],[42,133,30,68],[42,134,30,69],[42,137,31,6,"mergedBreadcrumb"],[42,153,31,22],[43,4,33,2],[43,8,33,6,"finalBreadcrumb"],[43,23,33,21],[43,28,33,26],[43,32,33,30],[43,34,33,32],[44,4,35,2],[44,8,35,6,"client"],[44,14,35,12],[44,15,35,13,"emit"],[44,19,35,17],[44,21,35,19],[45,6,36,4,"client"],[45,12,36,10],[45,13,36,11,"emit"],[45,17,36,15],[45,18,36,16],[45,39,36,37],[45,41,36,39,"finalBreadcrumb"],[45,56,36,54],[45,58,36,56,"hint"],[45,62,36,60],[45,63,36,61],[46,4,37,2],[47,4,39,2,"isolationScope"],[47,18,39,16],[47,19,39,17,"addBreadcrumb"],[47,32,39,30],[47,33,39,31,"finalBreadcrumb"],[47,48,39,46],[47,50,39,48,"maxBreadcrumbs"],[47,64,39,62],[47,65,39,63],[48,2,40,0],[49,0,40,1],[49,3]],"functionMap":{"names":["<global>","addBreadcrumb","consoleSandbox$argument_0"],"mappings":"AAA;ACgB;sBCa,8CD;CDU"},"hasCjsExports":false},"type":"js/module"}]}