{"dependencies":[{"name":"@sentry/core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":56,"index":56}}],"key":"/o+dASQcHF2bB25icdsM0E4TExc=","exportNames":["*"],"imports":1}},{"name":"../utils/rnlibraries","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":57},"end":{"line":2,"column":60,"index":117}}],"key":"fGrlZFgrYQrfU1K4tN9OULy4C5Q=","exportNames":["*"],"imports":1}},{"name":"../utils/xhr","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":118},"end":{"line":3,"column":69,"index":187}}],"key":"vOZixZXnOl9wEw9+pZF/CmKTIq4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.spotlightIntegration = spotlightIntegration;\n  exports.getDefaultSidecarUrl = getDefaultSidecarUrl;\n  var _sentryCore = require(_dependencyMap[0], \"@sentry/core\");\n  var _utilsRnlibraries = require(_dependencyMap[1], \"../utils/rnlibraries\");\n  var _utilsXhr = require(_dependencyMap[2], \"../utils/xhr\");\n  /**\n   * Use this integration to send errors and transactions to Spotlight.\n   *\n   * Learn more about spotlight at https://spotlightjs.com\n   */\n  function spotlightIntegration({\n    sidecarUrl = getDefaultSidecarUrl()\n  } = {}) {\n    _sentryCore.debug.log('[Spotlight] Using Sidecar URL', sidecarUrl);\n    return {\n      name: 'Spotlight',\n      setupOnce() {\n        // nothing to do here\n      },\n      setup(client) {\n        setup(client, sidecarUrl);\n      }\n    };\n  }\n  function setup(client, sidecarUrl) {\n    sendEnvelopesToSidecar(client, sidecarUrl);\n  }\n  function sendEnvelopesToSidecar(client, sidecarUrl) {\n    if (!client.on) {\n      return;\n    }\n    client.on('beforeEnvelope', originalEnvelope => {\n      // TODO: This is a workaround for spotlight/sidecar not supporting images\n      const spotlightEnvelope = [...originalEnvelope];\n      const envelopeItems = [...originalEnvelope[1]].filter(item => typeof item[0].content_type !== 'string' || !item[0].content_type.startsWith('image'));\n      spotlightEnvelope[1] = envelopeItems;\n      const xhr = (0, _utilsXhr.createStealthXhr)();\n      if (!xhr) {\n        _sentryCore.debug.error('[Spotlight] Sentry SDK can not create XHR object');\n        return;\n      }\n      xhr.open('POST', sidecarUrl, true);\n      xhr.setRequestHeader('Content-Type', 'application/x-sentry-envelope');\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState === _utilsXhr.XHR_READYSTATE_DONE) {\n          const status = xhr.status;\n          if (status === 0 || status >= 200 && status < 400) {\n            // The request has been completed successfully\n          } else {\n            // Handle the error\n            _sentryCore.debug.error(\"[Spotlight] Sentry SDK can't connect to Spotlight is it running? See https://spotlightjs.com to download it.\", new Error(xhr.statusText));\n          }\n        }\n      };\n      xhr.send((0, _sentryCore.serializeEnvelope)(spotlightEnvelope));\n    });\n  }\n  const DEFAULT_SIDECAR_URL = 'http://localhost:8969/stream';\n  /**\n   * Gets the default Spotlight sidecar URL.\n   */\n  function getDefaultSidecarUrl() {\n    var _a, _b;\n    try {\n      const {\n        url\n      } = (_b = (_a = _utilsRnlibraries.ReactNativeLibraries.Devtools) === null || _a === void 0 ? void 0 : _a.getDevServer()) !== null && _b !== void 0 ? _b : {};\n      if (!url) {\n        return DEFAULT_SIDECAR_URL;\n      }\n      return `http://${getHostnameFromString(url)}:8969/stream`;\n    } catch (_oO) {\n      // We can't load devserver URL\n    }\n    return DEFAULT_SIDECAR_URL;\n  }\n  /**\n   * React Native implementation of the URL class is missing the `hostname` property.\n   */\n  function getHostnameFromString(urlString) {\n    const regex = /^(?:\\w+:)?\\/\\/([^/:]+)(:\\d+)?(.*)$/;\n    const matches = urlString.match(regex);\n    if (matches === null || matches === void 0 ? void 0 : matches[1]) {\n      return matches[1];\n    } else {\n      // Invalid URL format\n      return null;\n    }\n  }\n});","lineCount":96,"map":[[7,2,9,0,"exports"],[7,9,9,0],[7,10,9,0,"spotlightIntegration"],[7,30,9,0],[7,33,9,0,"spotlightIntegration"],[7,53,9,0],[8,2,59,0,"exports"],[8,9,59,0],[8,10,59,0,"getDefaultSidecarUrl"],[8,30,59,0],[8,33,59,0,"getDefaultSidecarUrl"],[8,53,59,0],[9,2,1,0],[9,6,1,0,"_sentryCore"],[9,17,1,0],[9,20,1,0,"require"],[9,27,1,0],[9,28,1,0,"_dependencyMap"],[9,42,1,0],[10,2,2,0],[10,6,2,0,"_utilsRnlibraries"],[10,23,2,0],[10,26,2,0,"require"],[10,33,2,0],[10,34,2,0,"_dependencyMap"],[10,48,2,0],[11,2,3,0],[11,6,3,0,"_utilsXhr"],[11,15,3,0],[11,18,3,0,"require"],[11,25,3,0],[11,26,3,0,"_dependencyMap"],[11,40,3,0],[12,2,4,0],[13,0,5,0],[14,0,6,0],[15,0,7,0],[16,0,8,0],[17,2,9,7],[17,11,9,16,"spotlightIntegration"],[17,31,9,36,"spotlightIntegration"],[17,32,9,37],[18,4,9,39,"sidecarUrl"],[18,14,9,49],[18,17,9,52,"getDefaultSidecarUrl"],[18,37,9,72],[18,38,9,73],[19,2,9,76],[19,3,9,77],[19,6,9,80],[19,7,9,81],[19,8,9,82],[19,10,9,84],[20,4,10,4,"debug"],[20,15,10,9],[20,16,10,9,"debug"],[20,21,10,9],[20,22,10,10,"log"],[20,25,10,13],[20,26,10,14],[20,57,10,45],[20,59,10,47,"sidecarUrl"],[20,69,10,57],[20,70,10,58],[21,4,11,4],[21,11,11,11],[22,6,12,8,"name"],[22,10,12,12],[22,12,12,14],[22,23,12,25],[23,6,13,8,"setupOnce"],[23,15,13,17,"setupOnce"],[23,16,13,17],[23,18,13,20],[24,8,14,12],[25,6,14,12],[25,7,15,9],[26,6,16,8,"setup"],[26,11,16,13,"setup"],[26,12,16,14,"client"],[26,18,16,20],[26,20,16,22],[27,8,17,12,"setup"],[27,13,17,17],[27,14,17,18,"client"],[27,20,17,24],[27,22,17,26,"sidecarUrl"],[27,32,17,36],[27,33,17,37],[28,6,18,8],[29,4,19,4],[29,5,19,5],[30,2,20,0],[31,2,21,0],[31,11,21,9,"setup"],[31,16,21,14,"setup"],[31,17,21,15,"client"],[31,23,21,21],[31,25,21,23,"sidecarUrl"],[31,35,21,33],[31,37,21,35],[32,4,22,4,"sendEnvelopesToSidecar"],[32,26,22,26],[32,27,22,27,"client"],[32,33,22,33],[32,35,22,35,"sidecarUrl"],[32,45,22,45],[32,46,22,46],[33,2,23,0],[34,2,24,0],[34,11,24,9,"sendEnvelopesToSidecar"],[34,33,24,31,"sendEnvelopesToSidecar"],[34,34,24,32,"client"],[34,40,24,38],[34,42,24,40,"sidecarUrl"],[34,52,24,50],[34,54,24,52],[35,4,25,4],[35,8,25,8],[35,9,25,9,"client"],[35,15,25,15],[35,16,25,16,"on"],[35,18,25,18],[35,20,25,20],[36,6,26,8],[37,4,27,4],[38,4,28,4,"client"],[38,10,28,10],[38,11,28,11,"on"],[38,13,28,13],[38,14,28,14],[38,30,28,30],[38,32,28,33,"originalEnvelope"],[38,48,28,49],[38,52,28,54],[39,6,29,8],[40,6,30,8],[40,12,30,14,"spotlightEnvelope"],[40,29,30,31],[40,32,30,34],[40,33,30,35],[40,36,30,38,"originalEnvelope"],[40,52,30,54],[40,53,30,55],[41,6,31,8],[41,12,31,14,"envelopeItems"],[41,25,31,27],[41,28,31,30],[41,29,31,31],[41,32,31,34,"originalEnvelope"],[41,48,31,50],[41,49,31,51],[41,50,31,52],[41,51,31,53],[41,52,31,54],[41,53,31,55,"filter"],[41,59,31,61],[41,60,31,62,"item"],[41,64,31,66],[41,68,31,70],[41,75,31,77,"item"],[41,79,31,81],[41,80,31,82],[41,81,31,83],[41,82,31,84],[41,83,31,85,"content_type"],[41,95,31,97],[41,100,31,102],[41,108,31,110],[41,112,31,114],[41,113,31,115,"item"],[41,117,31,119],[41,118,31,120],[41,119,31,121],[41,120,31,122],[41,121,31,123,"content_type"],[41,133,31,135],[41,134,31,136,"startsWith"],[41,144,31,146],[41,145,31,147],[41,152,31,154],[41,153,31,155],[41,154,31,156],[42,6,32,8,"spotlightEnvelope"],[42,23,32,25],[42,24,32,26],[42,25,32,27],[42,26,32,28],[42,29,32,31,"envelopeItems"],[42,42,32,44],[43,6,33,8],[43,12,33,14,"xhr"],[43,15,33,17],[43,18,33,20],[43,22,33,20,"createStealthXhr"],[43,31,33,36],[43,32,33,36,"createStealthXhr"],[43,48,33,36],[43,50,33,37],[43,51,33,38],[44,6,34,8],[44,10,34,12],[44,11,34,13,"xhr"],[44,14,34,16],[44,16,34,18],[45,8,35,12,"debug"],[45,19,35,17],[45,20,35,17,"debug"],[45,25,35,17],[45,26,35,18,"error"],[45,31,35,23],[45,32,35,24],[45,82,35,74],[45,83,35,75],[46,8,36,12],[47,6,37,8],[48,6,38,8,"xhr"],[48,9,38,11],[48,10,38,12,"open"],[48,14,38,16],[48,15,38,17],[48,21,38,23],[48,23,38,25,"sidecarUrl"],[48,33,38,35],[48,35,38,37],[48,39,38,41],[48,40,38,42],[49,6,39,8,"xhr"],[49,9,39,11],[49,10,39,12,"setRequestHeader"],[49,26,39,28],[49,27,39,29],[49,41,39,43],[49,43,39,45],[49,74,39,76],[49,75,39,77],[50,6,40,8,"xhr"],[50,9,40,11],[50,10,40,12,"onreadystatechange"],[50,28,40,30],[50,31,40,33],[50,43,40,45],[51,8,41,12],[51,12,41,16,"xhr"],[51,15,41,19],[51,16,41,20,"readyState"],[51,26,41,30],[51,31,41,35,"XHR_READYSTATE_DONE"],[51,40,41,54],[51,41,41,54,"XHR_READYSTATE_DONE"],[51,60,41,54],[51,62,41,56],[52,10,42,16],[52,16,42,22,"status"],[52,22,42,28],[52,25,42,31,"xhr"],[52,28,42,34],[52,29,42,35,"status"],[52,35,42,41],[53,10,43,16],[53,14,43,20,"status"],[53,20,43,26],[53,25,43,31],[53,26,43,32],[53,30,43,37,"status"],[53,36,43,43],[53,40,43,47],[53,43,43,50],[53,47,43,54,"status"],[53,53,43,60],[53,56,43,63],[53,59,43,67],[53,61,43,69],[54,12,44,20],[55,10,44,20],[55,11,45,17],[55,17,46,21],[56,12,47,20],[57,12,48,20,"debug"],[57,23,48,25],[57,24,48,25,"debug"],[57,29,48,25],[57,30,48,26,"error"],[57,35,48,31],[57,36,48,32],[57,146,48,142],[57,148,48,144],[57,152,48,148,"Error"],[57,157,48,153],[57,158,48,154,"xhr"],[57,161,48,157],[57,162,48,158,"statusText"],[57,172,48,168],[57,173,48,169],[57,174,48,170],[58,10,49,16],[59,8,50,12],[60,6,51,8],[60,7,51,9],[61,6,52,8,"xhr"],[61,9,52,11],[61,10,52,12,"send"],[61,14,52,16],[61,15,52,17],[61,19,52,17,"serializeEnvelope"],[61,30,52,34],[61,31,52,34,"serializeEnvelope"],[61,48,52,34],[61,50,52,35,"spotlightEnvelope"],[61,67,52,52],[61,68,52,53],[61,69,52,54],[62,4,53,4],[62,5,53,5],[62,6,53,6],[63,2,54,0],[64,2,55,0],[64,8,55,6,"DEFAULT_SIDECAR_URL"],[64,27,55,25],[64,30,55,28],[64,60,55,58],[65,2,56,0],[66,0,57,0],[67,0,58,0],[68,2,59,7],[68,11,59,16,"getDefaultSidecarUrl"],[68,31,59,36,"getDefaultSidecarUrl"],[68,32,59,36],[68,34,59,39],[69,4,60,4],[69,8,60,8,"_a"],[69,10,60,10],[69,12,60,12,"_b"],[69,14,60,14],[70,4,61,4],[70,8,61,8],[71,6,62,8],[71,12,62,14],[72,8,62,16,"url"],[73,6,62,20],[73,7,62,21],[73,10,62,24],[73,11,62,25,"_b"],[73,13,62,27],[73,16,62,30],[73,17,62,31,"_a"],[73,19,62,33],[73,22,62,36,"ReactNativeLibraries"],[73,39,62,56],[73,40,62,56,"ReactNativeLibraries"],[73,60,62,56],[73,61,62,57,"Devtools"],[73,69,62,65],[73,75,62,71],[73,79,62,75],[73,83,62,79,"_a"],[73,85,62,81],[73,90,62,86],[73,95,62,91],[73,96,62,92],[73,99,62,95],[73,104,62,100],[73,105,62,101],[73,108,62,104,"_a"],[73,110,62,106],[73,111,62,107,"getDevServer"],[73,123,62,119],[73,124,62,120],[73,125,62,121],[73,131,62,127],[73,135,62,131],[73,139,62,135,"_b"],[73,141,62,137],[73,146,62,142],[73,151,62,147],[73,152,62,148],[73,155,62,151,"_b"],[73,157,62,153],[73,160,62,156],[73,161,62,157],[73,162,62,158],[74,6,63,8],[74,10,63,12],[74,11,63,13,"url"],[74,14,63,16],[74,16,63,18],[75,8,64,12],[75,15,64,19,"DEFAULT_SIDECAR_URL"],[75,34,64,38],[76,6,65,8],[77,6,66,8],[77,13,66,15],[77,23,66,25,"getHostnameFromString"],[77,44,66,46],[77,45,66,47,"url"],[77,48,66,50],[77,49,66,51],[77,63,66,65],[78,4,67,4],[78,5,67,5],[78,6,68,4],[78,13,68,11,"_oO"],[78,16,68,14],[78,18,68,16],[79,6,69,8],[80,4,69,8],[81,4,71,4],[81,11,71,11,"DEFAULT_SIDECAR_URL"],[81,30,71,30],[82,2,72,0],[83,2,73,0],[84,0,74,0],[85,0,75,0],[86,2,76,0],[86,11,76,9,"getHostnameFromString"],[86,32,76,30,"getHostnameFromString"],[86,33,76,31,"urlString"],[86,42,76,40],[86,44,76,42],[87,4,77,4],[87,10,77,10,"regex"],[87,15,77,15],[87,18,77,18],[87,54,77,54],[88,4,78,4],[88,10,78,10,"matches"],[88,17,78,17],[88,20,78,20,"urlString"],[88,29,78,29],[88,30,78,30,"match"],[88,35,78,35],[88,36,78,36,"regex"],[88,41,78,41],[88,42,78,42],[89,4,79,4],[89,8,79,8,"matches"],[89,15,79,15],[89,20,79,20],[89,24,79,24],[89,28,79,28,"matches"],[89,35,79,35],[89,40,79,40],[89,45,79,45],[89,46,79,46],[89,49,79,49],[89,54,79,54],[89,55,79,55],[89,58,79,58,"matches"],[89,65,79,65],[89,66,79,66],[89,67,79,67],[89,68,79,68],[89,70,79,70],[90,6,80,8],[90,13,80,15,"matches"],[90,20,80,22],[90,21,80,23],[90,22,80,24],[90,23,80,25],[91,4,81,4],[91,5,81,5],[91,11,82,9],[92,6,83,8],[93,6,84,8],[93,13,84,15],[93,17,84,19],[94,4,85,4],[95,2,86,0],[96,0,86,1],[96,3]],"functionMap":{"names":["<global>","spotlightIntegration","setupOnce","setup","sendEnvelopesToSidecar","client.on$argument_1","filter$argument_0","xhr.onreadystatechange","getDefaultSidecarUrl","getHostnameFromString"],"mappings":"AAA;OCQ;QCI;SDE;QEC;SFE;CDE;AGC;CHE;AIC;gCCI;8DCG,6FD;iCES;SFW;KDE;CJC;OQK;CRa;ASI;CTU"},"hasCjsExports":false},"type":"js/module"}]}