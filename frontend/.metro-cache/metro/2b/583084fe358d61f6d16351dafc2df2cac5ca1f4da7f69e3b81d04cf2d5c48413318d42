{"dependencies":[{"name":"../../types.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":40,"index":40}}],"key":"W1BH0a3HSCo8tOLXH7X+m5FGigs=","exportNames":["*"],"imports":1}},{"name":"./lib/bindReporter.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":41},"end":{"line":2,"column":53,"index":94}}],"key":"yZXTUsWh1M46DyxIbZ88NUHRymg=","exportNames":["*"],"imports":1}},{"name":"./lib/getActivationStart.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":95},"end":{"line":3,"column":65,"index":160}}],"key":"GdWeY/Ul63HmG3e9yq4TWUwqk0M=","exportNames":["*"],"imports":1}},{"name":"./lib/getVisibilityWatcher.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":161},"end":{"line":4,"column":69,"index":230}}],"key":"nHtaM9v//YlxGAv+O3W06C++qp8=","exportNames":["*"],"imports":1}},{"name":"./lib/initMetric.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":231},"end":{"line":5,"column":49,"index":280}}],"key":"3h8m+kvAV2o3xN93IHHrmBqzs4s=","exportNames":["*"],"imports":1}},{"name":"./lib/initUnique.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":281},"end":{"line":6,"column":49,"index":330}}],"key":"hut8a99D/Gv1jGW5dfMa/Znpg4I=","exportNames":["*"],"imports":1}},{"name":"./lib/LCPEntryManager.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":331},"end":{"line":7,"column":59,"index":390}}],"key":"pdgPNtPb7rmWxPbVwqzSxpMiSmc=","exportNames":["*"],"imports":1}},{"name":"./lib/observe.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":391},"end":{"line":8,"column":43,"index":434}}],"key":"Cz2RoRvLyGQyofIDJmcgFo6dicM=","exportNames":["*"],"imports":1}},{"name":"./lib/runOnce.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":9,"column":0,"index":435},"end":{"line":9,"column":43,"index":478}}],"key":"bwPHkAH8Ixo/Lbt+Aw9KJe855Jk=","exportNames":["*"],"imports":1}},{"name":"./lib/whenActivated.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":10,"column":0,"index":479},"end":{"line":10,"column":55,"index":534}}],"key":"ZUHRzyG92JJbjB1/O2ptt6DviqY=","exportNames":["*"],"imports":1}},{"name":"./lib/whenIdleOrHidden.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":11,"column":0,"index":535},"end":{"line":11,"column":61,"index":596}}],"key":"aIXUXNtl+4w2mSAxoQv7ThovIbE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"LCPThresholds\", {\n    enumerable: true,\n    get: function () {\n      return LCPThresholds;\n    }\n  });\n  Object.defineProperty(exports, \"onLCP\", {\n    enumerable: true,\n    get: function () {\n      return onLCP;\n    }\n  });\n  var _typesJs = require(_dependencyMap[0], \"../../types.js\");\n  var _libBindReporterJs = require(_dependencyMap[1], \"./lib/bindReporter.js\");\n  var _libGetActivationStartJs = require(_dependencyMap[2], \"./lib/getActivationStart.js\");\n  var _libGetVisibilityWatcherJs = require(_dependencyMap[3], \"./lib/getVisibilityWatcher.js\");\n  var _libInitMetricJs = require(_dependencyMap[4], \"./lib/initMetric.js\");\n  var _libInitUniqueJs = require(_dependencyMap[5], \"./lib/initUnique.js\");\n  var _libLCPEntryManagerJs = require(_dependencyMap[6], \"./lib/LCPEntryManager.js\");\n  var _libObserveJs = require(_dependencyMap[7], \"./lib/observe.js\");\n  var _libRunOnceJs = require(_dependencyMap[8], \"./lib/runOnce.js\");\n  var _libWhenActivatedJs = require(_dependencyMap[9], \"./lib/whenActivated.js\");\n  var _libWhenIdleOrHiddenJs = require(_dependencyMap[10], \"./lib/whenIdleOrHidden.js\");\n  /*\n   * Copyright 2020 Google LLC\n   *\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   *     https://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n\n  /** Thresholds for LCP. See https://web.dev/articles/lcp#what_is_a_good_lcp_score */\n  const LCPThresholds = [2500, 4000];\n\n  /**\n   * Calculates the [LCP](https://web.dev/articles/lcp) value for the current page and\n   * calls the `callback` function once the value is ready (along with the\n   * relevant `largest-contentful-paint` performance entry used to determine the\n   * value). The reported value is a `DOMHighResTimeStamp`.\n   *\n   * If the `reportAllChanges` configuration option is set to `true`, the\n   * `callback` function will be called any time a new `largest-contentful-paint`\n   * performance entry is dispatched, or once the final value of the metric has\n   * been determined.\n   */\n  const onLCP = (onReport, opts = {}) => {\n    (0, _libWhenActivatedJs.whenActivated)(() => {\n      const visibilityWatcher = (0, _libGetVisibilityWatcherJs.getVisibilityWatcher)();\n      const metric = (0, _libInitMetricJs.initMetric)('LCP');\n      let report;\n      const lcpEntryManager = (0, _libInitUniqueJs.initUnique)(opts, _libLCPEntryManagerJs.LCPEntryManager);\n      const handleEntries = entries => {\n        // If reportAllChanges is set then call this function for each entry,\n        // otherwise only consider the last one.\n        if (!opts.reportAllChanges) {\n          // eslint-disable-next-line no-param-reassign\n          entries = entries.slice(-1);\n        }\n        for (const entry of entries) {\n          lcpEntryManager._processEntry(entry);\n\n          // Only report if the page wasn't hidden prior to LCP.\n          if (entry.startTime < visibilityWatcher.firstHiddenTime) {\n            // The startTime attribute returns the value of the renderTime if it is\n            // not 0, and the value of the loadTime otherwise. The activationStart\n            // reference is used because LCP should be relative to page activation\n            // rather than navigation start if the page was prerendered. But in cases\n            // where `activationStart` occurs after the LCP, this time should be\n            // clamped at 0.\n            metric.value = Math.max(entry.startTime - (0, _libGetActivationStartJs.getActivationStart)(), 0);\n            metric.entries = [entry];\n            report();\n          }\n        }\n      };\n      const po = (0, _libObserveJs.observe)('largest-contentful-paint', handleEntries);\n      if (po) {\n        report = (0, _libBindReporterJs.bindReporter)(onReport, metric, LCPThresholds, opts.reportAllChanges);\n\n        // Ensure this logic only runs once, since it can be triggered from\n        // any of three different event listeners below.\n        const stopListening = (0, _libRunOnceJs.runOnce)(() => {\n          handleEntries(po.takeRecords());\n          po.disconnect();\n          report(true);\n        });\n\n        // Stop listening after input or visibilitychange.\n        // Note: while scrolling is an input that stops LCP observation, it's\n        // unreliable since it can be programmatically generated.\n        // See: https://github.com/GoogleChrome/web-vitals/issues/75\n        for (const type of ['keydown', 'click', 'visibilitychange']) {\n          // Wrap the listener in an idle callback so it's run in a separate\n          // task to reduce potential INP impact.\n          // https://github.com/GoogleChrome/web-vitals/issues/383\n          if (_typesJs.WINDOW.document) {\n            addEventListener(type, () => (0, _libWhenIdleOrHiddenJs.whenIdleOrHidden)(stopListening), {\n              capture: true,\n              once: true\n            });\n          }\n        }\n      }\n    });\n  };\n});","lineCount":120,"map":[[7,2,110,0,"Object"],[7,8,110,0],[7,9,110,0,"defineProperty"],[7,23,110,0],[7,24,110,0,"exports"],[7,31,110,0],[8,4,110,0,"enumerable"],[8,14,110,0],[9,4,110,0,"get"],[9,7,110,0],[9,18,110,0,"get"],[9,19,110,0],[10,6,110,0],[10,13,110,9,"LCPThresholds"],[10,26,110,22],[11,4,110,22],[12,2,110,22],[13,2,110,0,"Object"],[13,8,110,0],[13,9,110,0,"defineProperty"],[13,23,110,0],[13,24,110,0,"exports"],[13,31,110,0],[14,4,110,0,"enumerable"],[14,14,110,0],[15,4,110,0,"get"],[15,7,110,0],[15,18,110,0,"get"],[15,19,110,0],[16,6,110,0],[16,13,110,24,"onLCP"],[16,18,110,29],[17,4,110,29],[18,2,110,29],[19,2,1,0],[19,6,1,0,"_typesJs"],[19,14,1,0],[19,17,1,0,"require"],[19,24,1,0],[19,25,1,0,"_dependencyMap"],[19,39,1,0],[20,2,2,0],[20,6,2,0,"_libBindReporterJs"],[20,24,2,0],[20,27,2,0,"require"],[20,34,2,0],[20,35,2,0,"_dependencyMap"],[20,49,2,0],[21,2,3,0],[21,6,3,0,"_libGetActivationStartJs"],[21,30,3,0],[21,33,3,0,"require"],[21,40,3,0],[21,41,3,0,"_dependencyMap"],[21,55,3,0],[22,2,4,0],[22,6,4,0,"_libGetVisibilityWatcherJs"],[22,32,4,0],[22,35,4,0,"require"],[22,42,4,0],[22,43,4,0,"_dependencyMap"],[22,57,4,0],[23,2,5,0],[23,6,5,0,"_libInitMetricJs"],[23,22,5,0],[23,25,5,0,"require"],[23,32,5,0],[23,33,5,0,"_dependencyMap"],[23,47,5,0],[24,2,6,0],[24,6,6,0,"_libInitUniqueJs"],[24,22,6,0],[24,25,6,0,"require"],[24,32,6,0],[24,33,6,0,"_dependencyMap"],[24,47,6,0],[25,2,7,0],[25,6,7,0,"_libLCPEntryManagerJs"],[25,27,7,0],[25,30,7,0,"require"],[25,37,7,0],[25,38,7,0,"_dependencyMap"],[25,52,7,0],[26,2,8,0],[26,6,8,0,"_libObserveJs"],[26,19,8,0],[26,22,8,0,"require"],[26,29,8,0],[26,30,8,0,"_dependencyMap"],[26,44,8,0],[27,2,9,0],[27,6,9,0,"_libRunOnceJs"],[27,19,9,0],[27,22,9,0,"require"],[27,29,9,0],[27,30,9,0,"_dependencyMap"],[27,44,9,0],[28,2,10,0],[28,6,10,0,"_libWhenActivatedJs"],[28,25,10,0],[28,28,10,0,"require"],[28,35,10,0],[28,36,10,0,"_dependencyMap"],[28,50,10,0],[29,2,11,0],[29,6,11,0,"_libWhenIdleOrHiddenJs"],[29,28,11,0],[29,31,11,0,"require"],[29,38,11,0],[29,39,11,0,"_dependencyMap"],[29,53,11,0],[30,2,13,0],[31,0,14,0],[32,0,15,0],[33,0,16,0],[34,0,17,0],[35,0,18,0],[36,0,19,0],[37,0,20,0],[38,0,21,0],[39,0,22,0],[40,0,23,0],[41,0,24,0],[42,0,25,0],[43,0,26,0],[44,0,27,0],[46,2,30,0],[47,2,31,0],[47,8,31,6,"LCPThresholds"],[47,21,31,19],[47,24,31,22],[47,25,31,23],[47,29,31,27],[47,31,31,29],[47,35,31,33],[47,36,31,34],[49,2,33,0],[50,0,34,0],[51,0,35,0],[52,0,36,0],[53,0,37,0],[54,0,38,0],[55,0,39,0],[56,0,40,0],[57,0,41,0],[58,0,42,0],[59,0,43,0],[60,2,44,0],[60,8,44,6,"onLCP"],[60,13,44,11],[60,16,44,14,"onLCP"],[60,17,44,15,"onReport"],[60,25,44,23],[60,27,44,25,"opts"],[60,31,44,29],[60,34,44,32],[60,35,44,33],[60,36,44,34],[60,41,44,39],[61,4,45,2],[61,8,45,2,"whenActivated"],[61,27,45,15],[61,28,45,15,"whenActivated"],[61,41,45,15],[61,43,45,16],[61,49,45,22],[62,6,46,4],[62,12,46,10,"visibilityWatcher"],[62,29,46,27],[62,32,46,30],[62,36,46,30,"getVisibilityWatcher"],[62,62,46,50],[62,63,46,50,"getVisibilityWatcher"],[62,83,46,50],[62,85,46,51],[62,86,46,52],[63,6,47,4],[63,12,47,10,"metric"],[63,18,47,16],[63,21,47,19],[63,25,47,19,"initMetric"],[63,41,47,29],[63,42,47,29,"initMetric"],[63,52,47,29],[63,54,47,30],[63,59,47,35],[63,60,47,36],[64,6,48,4],[64,10,48,8,"report"],[64,16,48,14],[65,6,50,4],[65,12,50,10,"lcpEntryManager"],[65,27,50,25],[65,30,50,28],[65,34,50,28,"initUnique"],[65,50,50,38],[65,51,50,38,"initUnique"],[65,61,50,38],[65,63,50,39,"opts"],[65,67,50,43],[65,69,50,45,"LCPEntryManager"],[65,90,50,60],[65,91,50,60,"LCPEntryManager"],[65,106,50,60],[65,107,50,61],[66,6,52,4],[66,12,52,10,"handleEntries"],[66,25,52,23],[66,28,52,27,"entries"],[66,35,52,34],[66,39,52,39],[67,8,53,6],[68,8,54,6],[69,8,55,6],[69,12,55,10],[69,13,55,11,"opts"],[69,17,55,15],[69,18,55,16,"reportAllChanges"],[69,34,55,32],[69,36,55,34],[70,10,56,8],[71,10,57,8,"entries"],[71,17,57,15],[71,20,57,18,"entries"],[71,27,57,25],[71,28,57,26,"slice"],[71,33,57,31],[71,34,57,32],[71,35,57,33],[71,36,57,34],[71,37,57,35],[72,8,58,6],[73,8,60,6],[73,13,60,11],[73,19,60,17,"entry"],[73,24,60,22],[73,28,60,26,"entries"],[73,35,60,33],[73,37,60,35],[74,10,61,8,"lcpEntryManager"],[74,25,61,23],[74,26,61,24,"_processEntry"],[74,39,61,37],[74,40,61,38,"entry"],[74,45,61,43],[74,46,61,44],[76,10,63,8],[77,10,64,8],[77,14,64,12,"entry"],[77,19,64,17],[77,20,64,18,"startTime"],[77,29,64,27],[77,32,64,30,"visibilityWatcher"],[77,49,64,47],[77,50,64,48,"firstHiddenTime"],[77,65,64,63],[77,67,64,65],[78,12,65,10],[79,12,66,10],[80,12,67,10],[81,12,68,10],[82,12,69,10],[83,12,70,10],[84,12,71,10,"metric"],[84,18,71,16],[84,19,71,17,"value"],[84,24,71,22],[84,27,71,25,"Math"],[84,31,71,29],[84,32,71,30,"max"],[84,35,71,33],[84,36,71,34,"entry"],[84,41,71,39],[84,42,71,40,"startTime"],[84,51,71,49],[84,54,71,52],[84,58,71,52,"getActivationStart"],[84,82,71,70],[84,83,71,70,"getActivationStart"],[84,101,71,70],[84,103,71,71],[84,104,71,72],[84,106,71,74],[84,107,71,75],[84,108,71,76],[85,12,72,10,"metric"],[85,18,72,16],[85,19,72,17,"entries"],[85,26,72,24],[85,29,72,27],[85,30,72,28,"entry"],[85,35,72,33],[85,36,72,34],[86,12,73,10,"report"],[86,18,73,16],[86,19,73,17],[86,20,73,18],[87,10,74,8],[88,8,75,6],[89,6,76,4],[89,7,76,5],[90,6,78,4],[90,12,78,10,"po"],[90,14,78,12],[90,17,78,15],[90,21,78,15,"observe"],[90,34,78,22],[90,35,78,22,"observe"],[90,42,78,22],[90,44,78,23],[90,70,78,49],[90,72,78,51,"handleEntries"],[90,85,78,64],[90,86,78,65],[91,6,80,4],[91,10,80,8,"po"],[91,12,80,10],[91,14,80,12],[92,8,81,6,"report"],[92,14,81,12],[92,17,81,15],[92,21,81,15,"bindReporter"],[92,39,81,27],[92,40,81,27,"bindReporter"],[92,52,81,27],[92,54,81,28,"onReport"],[92,62,81,36],[92,64,81,38,"metric"],[92,70,81,44],[92,72,81,46,"LCPThresholds"],[92,85,81,59],[92,87,81,61,"opts"],[92,91,81,65],[92,92,81,66,"reportAllChanges"],[92,108,81,82],[92,109,81,83],[94,8,83,6],[95,8,84,6],[96,8,85,6],[96,14,85,12,"stopListening"],[96,27,85,25],[96,30,85,28],[96,34,85,28,"runOnce"],[96,47,85,35],[96,48,85,35,"runOnce"],[96,55,85,35],[96,57,85,36],[96,63,85,42],[97,10,86,8,"handleEntries"],[97,23,86,21],[97,24,86,22,"po"],[97,26,86,24],[97,27,86,25,"takeRecords"],[97,38,86,36],[97,39,86,37],[97,40,86,39],[97,41,86,40],[98,10,87,8,"po"],[98,12,87,10],[98,13,87,11,"disconnect"],[98,23,87,21],[98,24,87,22],[98,25,87,23],[99,10,88,8,"report"],[99,16,88,14],[99,17,88,15],[99,21,88,19],[99,22,88,20],[100,8,89,6],[100,9,89,7],[100,10,89,8],[102,8,91,6],[103,8,92,6],[104,8,93,6],[105,8,94,6],[106,8,95,6],[106,13,95,11],[106,19,95,17,"type"],[106,23,95,21],[106,27,95,25],[106,28,95,26],[106,37,95,35],[106,39,95,37],[106,46,95,44],[106,48,95,46],[106,66,95,64],[106,67,95,65],[106,69,95,67],[107,10,96,8],[108,10,97,8],[109,10,98,8],[110,10,99,8],[110,14,99,12,"WINDOW"],[110,22,99,18],[110,23,99,18,"WINDOW"],[110,29,99,18],[110,30,99,19,"document"],[110,38,99,27],[110,40,99,29],[111,12,100,10,"addEventListener"],[111,28,100,26],[111,29,100,27,"type"],[111,33,100,31],[111,35,100,33],[111,41,100,39],[111,45,100,39,"whenIdleOrHidden"],[111,67,100,55],[111,68,100,55,"whenIdleOrHidden"],[111,84,100,55],[111,86,100,56,"stopListening"],[111,99,100,69],[111,100,100,70],[111,102,100,72],[112,14,101,12,"capture"],[112,21,101,19],[112,23,101,21],[112,27,101,25],[113,14,102,12,"once"],[113,18,102,16],[113,20,102,18],[114,12,103,10],[114,13,103,11],[114,14,103,12],[115,10,104,8],[116,8,105,6],[117,6,106,4],[118,4,107,2],[118,5,107,3],[118,6,107,4],[119,2,108,0],[119,3,108,1],[120,0,108,2],[120,3]],"functionMap":{"names":["<global>","onLCP","whenActivated$argument_0","handleEntries","runOnce$argument_0","addEventListener$argument_1"],"mappings":"AAA;cC2C;gBCC;0BCO;KDwB;oCES;OFI;iCGW,qCH;GDO;CDC"},"hasCjsExports":false},"type":"js/module"}]}