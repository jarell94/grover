{"dependencies":[{"name":"./worldwide.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":44,"index":44}}],"key":"LZlrQCVO4H3zUFIdbw1eEy4GKGE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"browserPerformanceTimeOrigin\", {\n    enumerable: true,\n    get: function () {\n      return browserPerformanceTimeOrigin;\n    }\n  });\n  Object.defineProperty(exports, \"dateTimestampInSeconds\", {\n    enumerable: true,\n    get: function () {\n      return dateTimestampInSeconds;\n    }\n  });\n  Object.defineProperty(exports, \"timestampInSeconds\", {\n    enumerable: true,\n    get: function () {\n      return timestampInSeconds;\n    }\n  });\n  var _worldwideJs = require(_dependencyMap[0], \"./worldwide.js\");\n  const ONE_SECOND_IN_MS = 1000;\n\n  /**\n   * A partial definition of the [Performance Web API]{@link https://developer.mozilla.org/en-US/docs/Web/API/Performance}\n   * for accessing a high-resolution monotonic clock.\n   */\n\n  /**\n   * Returns a timestamp in seconds since the UNIX epoch using the Date API.\n   */\n  function dateTimestampInSeconds() {\n    return Date.now() / ONE_SECOND_IN_MS;\n  }\n\n  /**\n   * Returns a wrapper around the native Performance API browser implementation, or undefined for browsers that do not\n   * support the API.\n   *\n   * Wrapping the native API works around differences in behavior from different browsers.\n   */\n  function createUnixTimestampInSecondsFunc() {\n    const {\n      performance\n    } = _worldwideJs.GLOBAL_OBJ;\n    // Some browser and environments don't have a performance or timeOrigin, so we fallback to\n    // using Date.now() to compute the starting time.\n    if (!performance?.now || !performance.timeOrigin) {\n      return dateTimestampInSeconds;\n    }\n    const timeOrigin = performance.timeOrigin;\n\n    // performance.now() is a monotonic clock, which means it starts at 0 when the process begins. To get the current\n    // wall clock time (actual UNIX timestamp), we need to add the starting time origin and the current time elapsed.\n    //\n    // TODO: This does not account for the case where the monotonic clock that powers performance.now() drifts from the\n    // wall clock time, which causes the returned timestamp to be inaccurate. We should investigate how to detect and\n    // correct for this.\n    // See: https://github.com/getsentry/sentry-javascript/issues/2590\n    // See: https://github.com/mdn/content/issues/4713\n    // See: https://dev.to/noamr/when-a-millisecond-is-not-a-millisecond-3h6\n    return () => {\n      return (timeOrigin + performance.now()) / ONE_SECOND_IN_MS;\n    };\n  }\n  let _cachedTimestampInSeconds;\n\n  /**\n   * Returns a timestamp in seconds since the UNIX epoch using either the Performance or Date APIs, depending on the\n   * availability of the Performance API.\n   *\n   * BUG: Note that because of how browsers implement the Performance API, the clock might stop when the computer is\n   * asleep. This creates a skew between `dateTimestampInSeconds` and `timestampInSeconds`. The\n   * skew can grow to arbitrary amounts like days, weeks or months.\n   * See https://github.com/getsentry/sentry-javascript/issues/2590.\n   */\n  function timestampInSeconds() {\n    // We store this in a closure so that we don't have to create a new function every time this is called.\n    const func = _cachedTimestampInSeconds ?? (_cachedTimestampInSeconds = createUnixTimestampInSecondsFunc());\n    return func();\n  }\n\n  /**\n   * Cached result of getBrowserTimeOrigin.\n   */\n  let cachedTimeOrigin;\n\n  /**\n   * Gets the time origin and the mode used to determine it.\n   */\n  function getBrowserTimeOrigin() {\n    // Unfortunately browsers may report an inaccurate time origin data, through either performance.timeOrigin or\n    // performance.timing.navigationStart, which results in poor results in performance data. We only treat time origin\n    // data as reliable if they are within a reasonable threshold of the current time.\n\n    const {\n      performance\n    } = _worldwideJs.GLOBAL_OBJ;\n    if (!performance?.now) {\n      return [undefined, 'none'];\n    }\n    const threshold = 3600 * 1000;\n    const performanceNow = performance.now();\n    const dateNow = Date.now();\n\n    // if timeOrigin isn't available set delta to threshold so it isn't used\n    const timeOriginDelta = performance.timeOrigin ? Math.abs(performance.timeOrigin + performanceNow - dateNow) : threshold;\n    const timeOriginIsReliable = timeOriginDelta < threshold;\n\n    // While performance.timing.navigationStart is deprecated in favor of performance.timeOrigin, performance.timeOrigin\n    // is not as widely supported. Namely, performance.timeOrigin is undefined in Safari as of writing.\n    // Also as of writing, performance.timing is not available in Web Workers in mainstream browsers, so it is not always\n    // a valid fallback. In the absence of an initial time provided by the browser, fallback to the current time from the\n    // Date API.\n    // eslint-disable-next-line deprecation/deprecation\n    const navigationStart = performance.timing?.navigationStart;\n    const hasNavigationStart = typeof navigationStart === 'number';\n    // if navigationStart isn't available set delta to threshold so it isn't used\n    const navigationStartDelta = hasNavigationStart ? Math.abs(navigationStart + performanceNow - dateNow) : threshold;\n    const navigationStartIsReliable = navigationStartDelta < threshold;\n    if (timeOriginIsReliable || navigationStartIsReliable) {\n      // Use the more reliable time origin\n      if (timeOriginDelta <= navigationStartDelta) {\n        return [performance.timeOrigin, 'timeOrigin'];\n      } else {\n        return [navigationStart, 'navigationStart'];\n      }\n    }\n\n    // Either both timeOrigin and navigationStart are skewed or neither is available, fallback to Date.\n    return [dateNow, 'dateNow'];\n  }\n\n  /**\n   * The number of milliseconds since the UNIX epoch. This value is only usable in a browser, and only when the\n   * performance API is available.\n   */\n  function browserPerformanceTimeOrigin() {\n    if (!cachedTimeOrigin) {\n      cachedTimeOrigin = getBrowserTimeOrigin();\n    }\n    return cachedTimeOrigin[0];\n  }\n});","lineCount":148,"map":[[7,2,129,0,"Object"],[7,8,129,0],[7,9,129,0,"defineProperty"],[7,23,129,0],[7,24,129,0,"exports"],[7,31,129,0],[8,4,129,0,"enumerable"],[8,14,129,0],[9,4,129,0,"get"],[9,7,129,0],[9,18,129,0,"get"],[9,19,129,0],[10,6,129,0],[10,13,129,9,"browserPerformanceTimeOrigin"],[10,41,129,37],[11,4,129,37],[12,2,129,37],[13,2,129,0,"Object"],[13,8,129,0],[13,9,129,0,"defineProperty"],[13,23,129,0],[13,24,129,0,"exports"],[13,31,129,0],[14,4,129,0,"enumerable"],[14,14,129,0],[15,4,129,0,"get"],[15,7,129,0],[15,18,129,0,"get"],[15,19,129,0],[16,6,129,0],[16,13,129,39,"dateTimestampInSeconds"],[16,35,129,61],[17,4,129,61],[18,2,129,61],[19,2,129,0,"Object"],[19,8,129,0],[19,9,129,0,"defineProperty"],[19,23,129,0],[19,24,129,0,"exports"],[19,31,129,0],[20,4,129,0,"enumerable"],[20,14,129,0],[21,4,129,0,"get"],[21,7,129,0],[21,18,129,0,"get"],[21,19,129,0],[22,6,129,0],[22,13,129,63,"timestampInSeconds"],[22,31,129,81],[23,4,129,81],[24,2,129,81],[25,2,1,0],[25,6,1,0,"_worldwideJs"],[25,18,1,0],[25,21,1,0,"require"],[25,28,1,0],[25,29,1,0,"_dependencyMap"],[25,43,1,0],[26,2,3,0],[26,8,3,6,"ONE_SECOND_IN_MS"],[26,24,3,22],[26,27,3,25],[26,31,3,29],[28,2,5,0],[29,0,6,0],[30,0,7,0],[31,0,8,0],[33,2,10,0],[34,0,11,0],[35,0,12,0],[36,2,13,0],[36,11,13,9,"dateTimestampInSeconds"],[36,33,13,31,"dateTimestampInSeconds"],[36,34,13,31],[36,36,13,34],[37,4,14,2],[37,11,14,9,"Date"],[37,15,14,13],[37,16,14,14,"now"],[37,19,14,17],[37,20,14,18],[37,21,14,19],[37,24,14,22,"ONE_SECOND_IN_MS"],[37,40,14,38],[38,2,15,0],[40,2,17,0],[41,0,18,0],[42,0,19,0],[43,0,20,0],[44,0,21,0],[45,0,22,0],[46,2,23,0],[46,11,23,9,"createUnixTimestampInSecondsFunc"],[46,43,23,41,"createUnixTimestampInSecondsFunc"],[46,44,23,41],[46,46,23,44],[47,4,24,2],[47,10,24,8],[48,6,24,10,"performance"],[49,4,24,22],[49,5,24,23],[49,8,24,26,"GLOBAL_OBJ"],[49,20,24,36],[49,21,24,36,"GLOBAL_OBJ"],[49,31,24,36],[50,4,25,2],[51,4,26,2],[52,4,27,2],[52,8,27,6],[52,9,27,7,"performance"],[52,20,27,18],[52,22,27,20,"now"],[52,25,27,23],[52,29,27,27],[52,30,27,28,"performance"],[52,41,27,39],[52,42,27,40,"timeOrigin"],[52,52,27,50],[52,54,27,52],[53,6,28,4],[53,13,28,11,"dateTimestampInSeconds"],[53,35,28,33],[54,4,29,2],[55,4,31,2],[55,10,31,8,"timeOrigin"],[55,20,31,18],[55,23,31,21,"performance"],[55,34,31,32],[55,35,31,33,"timeOrigin"],[55,45,31,43],[57,4,33,2],[58,4,34,2],[59,4,35,2],[60,4,36,2],[61,4,37,2],[62,4,38,2],[63,4,39,2],[64,4,40,2],[65,4,41,2],[66,4,42,2],[66,11,42,9],[66,17,42,15],[67,6,43,4],[67,13,43,11],[67,14,43,12,"timeOrigin"],[67,24,43,22],[67,27,43,25,"performance"],[67,38,43,36],[67,39,43,37,"now"],[67,42,43,40],[67,43,43,41],[67,44,43,42],[67,48,43,46,"ONE_SECOND_IN_MS"],[67,64,43,62],[68,4,44,2],[68,5,44,3],[69,2,45,0],[70,2,47,0],[70,6,47,4,"_cachedTimestampInSeconds"],[70,31,47,29],[72,2,49,0],[73,0,50,0],[74,0,51,0],[75,0,52,0],[76,0,53,0],[77,0,54,0],[78,0,55,0],[79,0,56,0],[80,0,57,0],[81,2,58,0],[81,11,58,9,"timestampInSeconds"],[81,29,58,27,"timestampInSeconds"],[81,30,58,27],[81,32,58,30],[82,4,59,2],[83,4,60,2],[83,10,60,8,"func"],[83,14,60,12],[83,17,60,15,"_cachedTimestampInSeconds"],[83,42,60,40],[83,47,60,45,"_cachedTimestampInSeconds"],[83,72,60,70],[83,75,60,73,"createUnixTimestampInSecondsFunc"],[83,107,60,105],[83,108,60,106],[83,109,60,107],[83,110,60,108],[84,4,61,2],[84,11,61,9,"func"],[84,15,61,13],[84,16,61,14],[84,17,61,15],[85,2,62,0],[87,2,64,0],[88,0,65,0],[89,0,66,0],[90,2,67,0],[90,6,67,4,"cachedTimeOrigin"],[90,22,67,20],[92,2,69,0],[93,0,70,0],[94,0,71,0],[95,2,72,0],[95,11,72,9,"getBrowserTimeOrigin"],[95,31,72,29,"getBrowserTimeOrigin"],[95,32,72,29],[95,34,72,32],[96,4,73,2],[97,4,74,2],[98,4,75,2],[100,4,77,2],[100,10,77,8],[101,6,77,10,"performance"],[102,4,77,22],[102,5,77,23],[102,8,77,26,"GLOBAL_OBJ"],[102,20,77,36],[102,21,77,36,"GLOBAL_OBJ"],[102,31,77,36],[103,4,78,2],[103,8,78,6],[103,9,78,7,"performance"],[103,20,78,18],[103,22,78,20,"now"],[103,25,78,23],[103,27,78,25],[104,6,79,4],[104,13,79,11],[104,14,79,12,"undefined"],[104,23,79,21],[104,25,79,23],[104,31,79,29],[104,32,79,30],[105,4,80,2],[106,4,82,2],[106,10,82,8,"threshold"],[106,19,82,17],[106,22,82,20],[106,26,82,24],[106,29,82,27],[106,33,82,31],[107,4,83,2],[107,10,83,8,"performanceNow"],[107,24,83,22],[107,27,83,25,"performance"],[107,38,83,36],[107,39,83,37,"now"],[107,42,83,40],[107,43,83,41],[107,44,83,42],[108,4,84,2],[108,10,84,8,"dateNow"],[108,17,84,15],[108,20,84,18,"Date"],[108,24,84,22],[108,25,84,23,"now"],[108,28,84,26],[108,29,84,27],[108,30,84,28],[110,4,86,2],[111,4,87,2],[111,10,87,8,"timeOriginDelta"],[111,25,87,23],[111,28,87,26,"performance"],[111,39,87,37],[111,40,87,38,"timeOrigin"],[111,50,87,48],[111,53,88,6,"Math"],[111,57,88,10],[111,58,88,11,"abs"],[111,61,88,14],[111,62,88,15,"performance"],[111,73,88,26],[111,74,88,27,"timeOrigin"],[111,84,88,37],[111,87,88,40,"performanceNow"],[111,101,88,54],[111,104,88,57,"dateNow"],[111,111,88,64],[111,112,88,65],[111,115,89,6,"threshold"],[111,124,89,15],[112,4,90,2],[112,10,90,8,"timeOriginIsReliable"],[112,30,90,28],[112,33,90,31,"timeOriginDelta"],[112,48,90,46],[112,51,90,49,"threshold"],[112,60,90,58],[114,4,92,2],[115,4,93,2],[116,4,94,2],[117,4,95,2],[118,4,96,2],[119,4,97,2],[120,4,98,2],[120,10,98,8,"navigationStart"],[120,25,98,23],[120,28,98,26,"performance"],[120,39,98,37],[120,40,98,38,"timing"],[120,46,98,44],[120,48,98,46,"navigationStart"],[120,63,98,61],[121,4,99,2],[121,10,99,8,"hasNavigationStart"],[121,28,99,26],[121,31,99,29],[121,38,99,36,"navigationStart"],[121,53,99,51],[121,58,99,56],[121,66,99,64],[122,4,100,2],[123,4,101,2],[123,10,101,8,"navigationStartDelta"],[123,30,101,28],[123,33,101,31,"hasNavigationStart"],[123,51,101,49],[123,54,101,52,"Math"],[123,58,101,56],[123,59,101,57,"abs"],[123,62,101,60],[123,63,101,61,"navigationStart"],[123,78,101,76],[123,81,101,79,"performanceNow"],[123,95,101,93],[123,98,101,96,"dateNow"],[123,105,101,103],[123,106,101,104],[123,109,101,107,"threshold"],[123,118,101,116],[124,4,102,2],[124,10,102,8,"navigationStartIsReliable"],[124,35,102,33],[124,38,102,36,"navigationStartDelta"],[124,58,102,56],[124,61,102,59,"threshold"],[124,70,102,68],[125,4,104,2],[125,8,104,6,"timeOriginIsReliable"],[125,28,104,26],[125,32,104,30,"navigationStartIsReliable"],[125,57,104,55],[125,59,104,57],[126,6,105,4],[127,6,106,4],[127,10,106,8,"timeOriginDelta"],[127,25,106,23],[127,29,106,27,"navigationStartDelta"],[127,49,106,47],[127,51,106,49],[128,8,107,6],[128,15,107,13],[128,16,107,14,"performance"],[128,27,107,25],[128,28,107,26,"timeOrigin"],[128,38,107,36],[128,40,107,38],[128,52,107,50],[128,53,107,51],[129,6,108,4],[129,7,108,5],[129,13,108,11],[130,8,109,6],[130,15,109,13],[130,16,109,14,"navigationStart"],[130,31,109,29],[130,33,109,31],[130,50,109,48],[130,51,109,49],[131,6,110,4],[132,4,111,2],[134,4,113,2],[135,4,114,2],[135,11,114,9],[135,12,114,10,"dateNow"],[135,19,114,17],[135,21,114,19],[135,30,114,28],[135,31,114,29],[136,2,115,0],[138,2,117,0],[139,0,118,0],[140,0,119,0],[141,0,120,0],[142,2,121,0],[142,11,121,9,"browserPerformanceTimeOrigin"],[142,39,121,37,"browserPerformanceTimeOrigin"],[142,40,121,37],[142,42,121,40],[143,4,122,2],[143,8,122,6],[143,9,122,7,"cachedTimeOrigin"],[143,25,122,23],[143,27,122,25],[144,6,123,4,"cachedTimeOrigin"],[144,22,123,20],[144,25,123,23,"getBrowserTimeOrigin"],[144,45,123,43],[144,46,123,44],[144,47,123,45],[145,4,124,2],[146,4,126,2],[146,11,126,9,"cachedTimeOrigin"],[146,27,126,25],[146,28,126,26],[146,29,126,27],[146,30,126,28],[147,2,127,0],[148,0,127,1],[148,3]],"functionMap":{"names":["<global>","dateTimestampInSeconds","createUnixTimestampInSecondsFunc","<anonymous>","timestampInSeconds","getBrowserTimeOrigin","browserPerformanceTimeOrigin"],"mappings":"AAA;ACY;CDE;AEQ;SCmB;GDE;CFC;AIa;CJI;AKU;CL2C;AMM;CNM"},"hasCjsExports":false},"type":"js/module"}]}