{"dependencies":[{"name":"./node-stack-trace.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":56,"index":56}}],"key":"I4HuW3JMH4XPRKx+RMlbO8AEW38=","exportNames":["*"],"imports":1}},{"name":"./stacktrace.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":57},"end":{"line":2,"column":51,"index":108}}],"key":"aMpe18tuIEoMpnkxgMUgt39EQuk=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"callFrameToStackFrame\", {\n    enumerable: true,\n    get: function () {\n      return callFrameToStackFrame;\n    }\n  });\n  Object.defineProperty(exports, \"watchdogTimer\", {\n    enumerable: true,\n    get: function () {\n      return watchdogTimer;\n    }\n  });\n  var _nodeStackTraceJs = require(_dependencyMap[0], \"./node-stack-trace.js\");\n  var _stacktraceJs = require(_dependencyMap[1], \"./stacktrace.js\");\n  /**\n   * A node.js watchdog timer\n   * @param pollInterval The interval that we expect to get polled at\n   * @param anrThreshold The threshold for when we consider ANR\n   * @param callback The callback to call for ANR\n   * @returns An object with `poll` and `enabled` functions {@link WatchdogReturn}\n   */\n  function watchdogTimer(createTimer, pollInterval, anrThreshold, callback) {\n    const timer = createTimer();\n    let triggered = false;\n    let enabled = true;\n    setInterval(() => {\n      const diffMs = timer.getTimeMs();\n      if (triggered === false && diffMs > pollInterval + anrThreshold) {\n        triggered = true;\n        if (enabled) {\n          callback();\n        }\n      }\n      if (diffMs < pollInterval + anrThreshold) {\n        triggered = false;\n      }\n    }, 20);\n    return {\n      poll: () => {\n        timer.reset();\n      },\n      enabled: state => {\n        enabled = state;\n      }\n    };\n  }\n\n  // types copied from inspector.d.ts\n\n  /**\n   * Converts Debugger.CallFrame to Sentry StackFrame\n   */\n  function callFrameToStackFrame(frame, url, getModuleFromFilename) {\n    const filename = url ? url.replace(/^file:\\/\\//, '') : undefined;\n\n    // CallFrame row/col are 0 based, whereas StackFrame are 1 based\n    const colno = frame.location.columnNumber ? frame.location.columnNumber + 1 : undefined;\n    const lineno = frame.location.lineNumber ? frame.location.lineNumber + 1 : undefined;\n    return {\n      filename,\n      module: getModuleFromFilename(filename),\n      function: frame.functionName || _stacktraceJs.UNKNOWN_FUNCTION,\n      colno,\n      lineno,\n      in_app: filename ? (0, _nodeStackTraceJs.filenameIsInApp)(filename) : undefined\n    };\n  }\n});","lineCount":74,"map":[[7,2,72,0,"Object"],[7,8,72,0],[7,9,72,0,"defineProperty"],[7,23,72,0],[7,24,72,0,"exports"],[7,31,72,0],[8,4,72,0,"enumerable"],[8,14,72,0],[9,4,72,0,"get"],[9,7,72,0],[9,18,72,0,"get"],[9,19,72,0],[10,6,72,0],[10,13,72,9,"callFrameToStackFrame"],[10,34,72,30],[11,4,72,30],[12,2,72,30],[13,2,72,0,"Object"],[13,8,72,0],[13,9,72,0,"defineProperty"],[13,23,72,0],[13,24,72,0,"exports"],[13,31,72,0],[14,4,72,0,"enumerable"],[14,14,72,0],[15,4,72,0,"get"],[15,7,72,0],[15,18,72,0,"get"],[15,19,72,0],[16,6,72,0],[16,13,72,32,"watchdogTimer"],[16,26,72,45],[17,4,72,45],[18,2,72,45],[19,2,1,0],[19,6,1,0,"_nodeStackTraceJs"],[19,23,1,0],[19,26,1,0,"require"],[19,33,1,0],[19,34,1,0,"_dependencyMap"],[19,48,1,0],[20,2,2,0],[20,6,2,0,"_stacktraceJs"],[20,19,2,0],[20,22,2,0,"require"],[20,29,2,0],[20,30,2,0,"_dependencyMap"],[20,44,2,0],[21,2,4,0],[22,0,5,0],[23,0,6,0],[24,0,7,0],[25,0,8,0],[26,0,9,0],[27,0,10,0],[28,2,11,0],[28,11,11,9,"watchdogTimer"],[28,24,11,22,"watchdogTimer"],[28,25,12,2,"createTimer"],[28,36,12,13],[28,38,13,2,"pollInterval"],[28,50,13,14],[28,52,14,2,"anrThreshold"],[28,64,14,14],[28,66,15,2,"callback"],[28,74,15,10],[28,76,16,2],[29,4,17,2],[29,10,17,8,"timer"],[29,15,17,13],[29,18,17,16,"createTimer"],[29,29,17,27],[29,30,17,28],[29,31,17,29],[30,4,18,2],[30,8,18,6,"triggered"],[30,17,18,15],[30,20,18,18],[30,25,18,23],[31,4,19,2],[31,8,19,6,"enabled"],[31,15,19,13],[31,18,19,16],[31,22,19,20],[32,4,21,2,"setInterval"],[32,15,21,13],[32,16,21,14],[32,22,21,20],[33,6,22,4],[33,12,22,10,"diffMs"],[33,18,22,16],[33,21,22,19,"timer"],[33,26,22,24],[33,27,22,25,"getTimeMs"],[33,36,22,34],[33,37,22,35],[33,38,22,36],[34,6,24,4],[34,10,24,8,"triggered"],[34,19,24,17],[34,24,24,22],[34,29,24,27],[34,33,24,31,"diffMs"],[34,39,24,37],[34,42,24,40,"pollInterval"],[34,54,24,52],[34,57,24,55,"anrThreshold"],[34,69,24,67],[34,71,24,69],[35,8,25,6,"triggered"],[35,17,25,15],[35,20,25,18],[35,24,25,22],[36,8,26,6],[36,12,26,10,"enabled"],[36,19,26,17],[36,21,26,19],[37,10,27,8,"callback"],[37,18,27,16],[37,19,27,17],[37,20,27,18],[38,8,28,6],[39,6,29,4],[40,6,31,4],[40,10,31,8,"diffMs"],[40,16,31,14],[40,19,31,17,"pollInterval"],[40,31,31,29],[40,34,31,32,"anrThreshold"],[40,46,31,44],[40,48,31,46],[41,8,32,6,"triggered"],[41,17,32,15],[41,20,32,18],[41,25,32,23],[42,6,33,4],[43,4,34,2],[43,5,34,3],[43,7,34,5],[43,9,34,7],[43,10,34,8],[44,4,36,2],[44,11,36,9],[45,6,37,4,"poll"],[45,10,37,8],[45,12,37,10,"poll"],[45,13,37,10],[45,18,37,16],[46,8,38,6,"timer"],[46,13,38,11],[46,14,38,12,"reset"],[46,19,38,17],[46,20,38,18],[46,21,38,19],[47,6,39,4],[47,7,39,5],[48,6,40,4,"enabled"],[48,13,40,11],[48,15,40,14,"state"],[48,20,40,19],[48,24,40,24],[49,8,41,6,"enabled"],[49,15,41,13],[49,18,41,16,"state"],[49,23,41,21],[50,6,42,4],[51,4,43,2],[51,5,43,3],[52,2,44,0],[54,2,46,0],[56,2,48,0],[57,0,49,0],[58,0,50,0],[59,2,51,0],[59,11,51,9,"callFrameToStackFrame"],[59,32,51,30,"callFrameToStackFrame"],[59,33,52,2,"frame"],[59,38,52,7],[59,40,53,2,"url"],[59,43,53,5],[59,45,54,2,"getModuleFromFilename"],[59,66,54,23],[59,68,55,2],[60,4,56,2],[60,10,56,8,"filename"],[60,18,56,16],[60,21,56,19,"url"],[60,24,56,22],[60,27,56,25,"url"],[60,30,56,28],[60,31,56,29,"replace"],[60,38,56,36],[60,39,56,37],[60,51,56,49],[60,53,56,51],[60,55,56,53],[60,56,56,54],[60,59,56,57,"undefined"],[60,68,56,66],[62,4,58,2],[63,4,59,2],[63,10,59,8,"colno"],[63,15,59,13],[63,18,59,16,"frame"],[63,23,59,21],[63,24,59,22,"location"],[63,32,59,30],[63,33,59,31,"columnNumber"],[63,45,59,43],[63,48,59,46,"frame"],[63,53,59,51],[63,54,59,52,"location"],[63,62,59,60],[63,63,59,61,"columnNumber"],[63,75,59,73],[63,78,59,76],[63,79,59,77],[63,82,59,80,"undefined"],[63,91,59,89],[64,4,60,2],[64,10,60,8,"lineno"],[64,16,60,14],[64,19,60,17,"frame"],[64,24,60,22],[64,25,60,23,"location"],[64,33,60,31],[64,34,60,32,"lineNumber"],[64,44,60,42],[64,47,60,45,"frame"],[64,52,60,50],[64,53,60,51,"location"],[64,61,60,59],[64,62,60,60,"lineNumber"],[64,72,60,70],[64,75,60,73],[64,76,60,74],[64,79,60,77,"undefined"],[64,88,60,86],[65,4,62,2],[65,11,62,9],[66,6,63,4,"filename"],[66,14,63,12],[67,6,64,4,"module"],[67,12,64,10],[67,14,64,12,"getModuleFromFilename"],[67,35,64,33],[67,36,64,34,"filename"],[67,44,64,42],[67,45,64,43],[68,6,65,4,"function"],[68,14,65,12],[68,16,65,14,"frame"],[68,21,65,19],[68,22,65,20,"functionName"],[68,34,65,32],[68,38,65,36,"UNKNOWN_FUNCTION"],[68,51,65,52],[68,52,65,52,"UNKNOWN_FUNCTION"],[68,68,65,52],[69,6,66,4,"colno"],[69,11,66,9],[70,6,67,4,"lineno"],[70,12,67,10],[71,6,68,4,"in_app"],[71,12,68,10],[71,14,68,12,"filename"],[71,22,68,20],[71,25,68,23],[71,29,68,23,"filenameIsInApp"],[71,46,68,38],[71,47,68,38,"filenameIsInApp"],[71,62,68,38],[71,64,68,39,"filename"],[71,72,68,47],[71,73,68,48],[71,76,68,51,"undefined"],[72,4,69,2],[72,5,69,3],[73,2,70,0],[74,0,70,1],[74,3]],"functionMap":{"names":["<global>","watchdogTimer","setInterval$argument_0","poll","enabled","callFrameToStackFrame"],"mappings":"AAA;ACU;cCU;GDa;UEG;KFE;aGC;KHE;CDE;AKO;CLmB"},"hasCjsExports":false},"type":"js/module"}]}