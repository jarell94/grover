{"dependencies":[{"name":"./asyncContext/index.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":66,"index":66}}],"key":"UuQ32QVz1TZHuuFfjsuiZDUPZlQ=","exportNames":["*"],"imports":1}},{"name":"./carrier.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":67},"end":{"line":2,"column":66,"index":133}}],"key":"6pp/3IpieqS3/vnZmp/pHWp2vlc=","exportNames":["*"],"imports":1}},{"name":"./scope.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":134},"end":{"line":3,"column":35,"index":169}}],"key":"asFjrgTIWdvglBac91WvmgCtKdM=","exportNames":["*"],"imports":1}},{"name":"./utils/propagationContext.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":170},"end":{"line":4,"column":63,"index":233}}],"key":"A+CCGmas654FEDhE3lMkwoufVoc=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"getClient\", {\n    enumerable: true,\n    get: function () {\n      return getClient;\n    }\n  });\n  Object.defineProperty(exports, \"getCurrentScope\", {\n    enumerable: true,\n    get: function () {\n      return getCurrentScope;\n    }\n  });\n  Object.defineProperty(exports, \"getGlobalScope\", {\n    enumerable: true,\n    get: function () {\n      return getGlobalScope;\n    }\n  });\n  Object.defineProperty(exports, \"getIsolationScope\", {\n    enumerable: true,\n    get: function () {\n      return getIsolationScope;\n    }\n  });\n  Object.defineProperty(exports, \"getTraceContextFromScope\", {\n    enumerable: true,\n    get: function () {\n      return getTraceContextFromScope;\n    }\n  });\n  Object.defineProperty(exports, \"withIsolationScope\", {\n    enumerable: true,\n    get: function () {\n      return withIsolationScope;\n    }\n  });\n  Object.defineProperty(exports, \"withScope\", {\n    enumerable: true,\n    get: function () {\n      return withScope;\n    }\n  });\n  var _asyncContextIndexJs = require(_dependencyMap[0], \"./asyncContext/index.js\");\n  var _carrierJs = require(_dependencyMap[1], \"./carrier.js\");\n  var _scopeJs = require(_dependencyMap[2], \"./scope.js\");\n  var _utilsPropagationContextJs = require(_dependencyMap[3], \"./utils/propagationContext.js\");\n  /**\n   * Get the currently active scope.\n   */\n  function getCurrentScope() {\n    const carrier = (0, _carrierJs.getMainCarrier)();\n    const acs = (0, _asyncContextIndexJs.getAsyncContextStrategy)(carrier);\n    return acs.getCurrentScope();\n  }\n\n  /**\n   * Get the currently active isolation scope.\n   * The isolation scope is active for the current execution context.\n   */\n  function getIsolationScope() {\n    const carrier = (0, _carrierJs.getMainCarrier)();\n    const acs = (0, _asyncContextIndexJs.getAsyncContextStrategy)(carrier);\n    return acs.getIsolationScope();\n  }\n\n  /**\n   * Get the global scope.\n   * This scope is applied to _all_ events.\n   */\n  function getGlobalScope() {\n    return (0, _carrierJs.getGlobalSingleton)('globalScope', () => new _scopeJs.Scope());\n  }\n\n  /**\n   * Creates a new scope with and executes the given operation within.\n   * The scope is automatically removed once the operation\n   * finishes or throws.\n   */\n\n  /**\n   * Either creates a new active scope, or sets the given scope as active scope in the given callback.\n   */\n  function withScope(...rest) {\n    const carrier = (0, _carrierJs.getMainCarrier)();\n    const acs = (0, _asyncContextIndexJs.getAsyncContextStrategy)(carrier);\n\n    // If a scope is defined, we want to make this the active scope instead of the default one\n    if (rest.length === 2) {\n      const [scope, callback] = rest;\n      if (!scope) {\n        return acs.withScope(callback);\n      }\n      return acs.withSetScope(scope, callback);\n    }\n    return acs.withScope(rest[0]);\n  }\n\n  /**\n   * Attempts to fork the current isolation scope and the current scope based on the current async context strategy. If no\n   * async context strategy is set, the isolation scope and the current scope will not be forked (this is currently the\n   * case, for example, in the browser).\n   *\n   * Usage of this function in environments without async context strategy is discouraged and may lead to unexpected behaviour.\n   *\n   * This function is intended for Sentry SDK and SDK integration development. It is not recommended to be used in \"normal\"\n   * applications directly because it comes with pitfalls. Use at your own risk!\n   */\n\n  /**\n   * Either creates a new active isolation scope, or sets the given isolation scope as active scope in the given callback.\n   */\n  function withIsolationScope(...rest) {\n    const carrier = (0, _carrierJs.getMainCarrier)();\n    const acs = (0, _asyncContextIndexJs.getAsyncContextStrategy)(carrier);\n\n    // If a scope is defined, we want to make this the active scope instead of the default one\n    if (rest.length === 2) {\n      const [isolationScope, callback] = rest;\n      if (!isolationScope) {\n        return acs.withIsolationScope(callback);\n      }\n      return acs.withSetIsolationScope(isolationScope, callback);\n    }\n    return acs.withIsolationScope(rest[0]);\n  }\n\n  /**\n   * Get the currently active client.\n   */\n  function getClient() {\n    return getCurrentScope().getClient();\n  }\n\n  /**\n   * Get a trace context for the given scope.\n   */\n  function getTraceContextFromScope(scope) {\n    const propagationContext = scope.getPropagationContext();\n    const {\n      traceId,\n      parentSpanId,\n      propagationSpanId\n    } = propagationContext;\n    const traceContext = {\n      trace_id: traceId,\n      span_id: propagationSpanId || (0, _utilsPropagationContextJs.generateSpanId)()\n    };\n    if (parentSpanId) {\n      traceContext.parent_span_id = parentSpanId;\n    }\n    return traceContext;\n  }\n});","lineCount":159,"map":[[7,2,124,0,"Object"],[7,8,124,0],[7,9,124,0,"defineProperty"],[7,23,124,0],[7,24,124,0,"exports"],[7,31,124,0],[8,4,124,0,"enumerable"],[8,14,124,0],[9,4,124,0,"get"],[9,7,124,0],[9,18,124,0,"get"],[9,19,124,0],[10,6,124,0],[10,13,124,9,"getClient"],[10,22,124,18],[11,4,124,18],[12,2,124,18],[13,2,124,0,"Object"],[13,8,124,0],[13,9,124,0,"defineProperty"],[13,23,124,0],[13,24,124,0,"exports"],[13,31,124,0],[14,4,124,0,"enumerable"],[14,14,124,0],[15,4,124,0,"get"],[15,7,124,0],[15,18,124,0,"get"],[15,19,124,0],[16,6,124,0],[16,13,124,20,"getCurrentScope"],[16,28,124,35],[17,4,124,35],[18,2,124,35],[19,2,124,0,"Object"],[19,8,124,0],[19,9,124,0,"defineProperty"],[19,23,124,0],[19,24,124,0,"exports"],[19,31,124,0],[20,4,124,0,"enumerable"],[20,14,124,0],[21,4,124,0,"get"],[21,7,124,0],[21,18,124,0,"get"],[21,19,124,0],[22,6,124,0],[22,13,124,37,"getGlobalScope"],[22,27,124,51],[23,4,124,51],[24,2,124,51],[25,2,124,0,"Object"],[25,8,124,0],[25,9,124,0,"defineProperty"],[25,23,124,0],[25,24,124,0,"exports"],[25,31,124,0],[26,4,124,0,"enumerable"],[26,14,124,0],[27,4,124,0,"get"],[27,7,124,0],[27,18,124,0,"get"],[27,19,124,0],[28,6,124,0],[28,13,124,53,"getIsolationScope"],[28,30,124,70],[29,4,124,70],[30,2,124,70],[31,2,124,0,"Object"],[31,8,124,0],[31,9,124,0,"defineProperty"],[31,23,124,0],[31,24,124,0,"exports"],[31,31,124,0],[32,4,124,0,"enumerable"],[32,14,124,0],[33,4,124,0,"get"],[33,7,124,0],[33,18,124,0,"get"],[33,19,124,0],[34,6,124,0],[34,13,124,72,"getTraceContextFromScope"],[34,37,124,96],[35,4,124,96],[36,2,124,96],[37,2,124,0,"Object"],[37,8,124,0],[37,9,124,0,"defineProperty"],[37,23,124,0],[37,24,124,0,"exports"],[37,31,124,0],[38,4,124,0,"enumerable"],[38,14,124,0],[39,4,124,0,"get"],[39,7,124,0],[39,18,124,0,"get"],[39,19,124,0],[40,6,124,0],[40,13,124,98,"withIsolationScope"],[40,31,124,116],[41,4,124,116],[42,2,124,116],[43,2,124,0,"Object"],[43,8,124,0],[43,9,124,0,"defineProperty"],[43,23,124,0],[43,24,124,0,"exports"],[43,31,124,0],[44,4,124,0,"enumerable"],[44,14,124,0],[45,4,124,0,"get"],[45,7,124,0],[45,18,124,0,"get"],[45,19,124,0],[46,6,124,0],[46,13,124,118,"withScope"],[46,22,124,127],[47,4,124,127],[48,2,124,127],[49,2,1,0],[49,6,1,0,"_asyncContextIndexJs"],[49,26,1,0],[49,29,1,0,"require"],[49,36,1,0],[49,37,1,0,"_dependencyMap"],[49,51,1,0],[50,2,2,0],[50,6,2,0,"_carrierJs"],[50,16,2,0],[50,19,2,0,"require"],[50,26,2,0],[50,27,2,0,"_dependencyMap"],[50,41,2,0],[51,2,3,0],[51,6,3,0,"_scopeJs"],[51,14,3,0],[51,17,3,0,"require"],[51,24,3,0],[51,25,3,0,"_dependencyMap"],[51,39,3,0],[52,2,4,0],[52,6,4,0,"_utilsPropagationContextJs"],[52,32,4,0],[52,35,4,0,"require"],[52,42,4,0],[52,43,4,0,"_dependencyMap"],[52,57,4,0],[53,2,6,0],[54,0,7,0],[55,0,8,0],[56,2,9,0],[56,11,9,9,"getCurrentScope"],[56,26,9,24,"getCurrentScope"],[56,27,9,24],[56,29,9,27],[57,4,10,2],[57,10,10,8,"carrier"],[57,17,10,15],[57,20,10,18],[57,24,10,18,"getMainCarrier"],[57,34,10,32],[57,35,10,32,"getMainCarrier"],[57,49,10,32],[57,51,10,33],[57,52,10,34],[58,4,11,2],[58,10,11,8,"acs"],[58,13,11,11],[58,16,11,14],[58,20,11,14,"getAsyncContextStrategy"],[58,40,11,37],[58,41,11,37,"getAsyncContextStrategy"],[58,64,11,37],[58,66,11,38,"carrier"],[58,73,11,45],[58,74,11,46],[59,4,12,2],[59,11,12,9,"acs"],[59,14,12,12],[59,15,12,13,"getCurrentScope"],[59,30,12,28],[59,31,12,29],[59,32,12,30],[60,2,13,0],[62,2,15,0],[63,0,16,0],[64,0,17,0],[65,0,18,0],[66,2,19,0],[66,11,19,9,"getIsolationScope"],[66,28,19,26,"getIsolationScope"],[66,29,19,26],[66,31,19,29],[67,4,20,2],[67,10,20,8,"carrier"],[67,17,20,15],[67,20,20,18],[67,24,20,18,"getMainCarrier"],[67,34,20,32],[67,35,20,32,"getMainCarrier"],[67,49,20,32],[67,51,20,33],[67,52,20,34],[68,4,21,2],[68,10,21,8,"acs"],[68,13,21,11],[68,16,21,14],[68,20,21,14,"getAsyncContextStrategy"],[68,40,21,37],[68,41,21,37,"getAsyncContextStrategy"],[68,64,21,37],[68,66,21,38,"carrier"],[68,73,21,45],[68,74,21,46],[69,4,22,2],[69,11,22,9,"acs"],[69,14,22,12],[69,15,22,13,"getIsolationScope"],[69,32,22,30],[69,33,22,31],[69,34,22,32],[70,2,23,0],[72,2,25,0],[73,0,26,0],[74,0,27,0],[75,0,28,0],[76,2,29,0],[76,11,29,9,"getGlobalScope"],[76,25,29,23,"getGlobalScope"],[76,26,29,23],[76,28,29,26],[77,4,30,2],[77,11,30,9],[77,15,30,9,"getGlobalSingleton"],[77,25,30,27],[77,26,30,27,"getGlobalSingleton"],[77,44,30,27],[77,46,30,28],[77,59,30,41],[77,61,30,43],[77,67,30,49],[77,71,30,53,"Scope"],[77,79,30,58],[77,80,30,58,"Scope"],[77,85,30,58],[77,86,30,59],[77,87,30,60],[77,88,30,61],[78,2,31,0],[80,2,33,0],[81,0,34,0],[82,0,35,0],[83,0,36,0],[84,0,37,0],[86,2,39,0],[87,0,40,0],[88,0,41,0],[89,2,42,0],[89,11,42,9,"withScope"],[89,20,42,18,"withScope"],[89,21,43,2],[89,24,43,5,"rest"],[89,28,43,9],[89,30,44,2],[90,4,45,2],[90,10,45,8,"carrier"],[90,17,45,15],[90,20,45,18],[90,24,45,18,"getMainCarrier"],[90,34,45,32],[90,35,45,32,"getMainCarrier"],[90,49,45,32],[90,51,45,33],[90,52,45,34],[91,4,46,2],[91,10,46,8,"acs"],[91,13,46,11],[91,16,46,14],[91,20,46,14,"getAsyncContextStrategy"],[91,40,46,37],[91,41,46,37,"getAsyncContextStrategy"],[91,64,46,37],[91,66,46,38,"carrier"],[91,73,46,45],[91,74,46,46],[93,4,48,2],[94,4,49,2],[94,8,49,6,"rest"],[94,12,49,10],[94,13,49,11,"length"],[94,19,49,17],[94,24,49,22],[94,25,49,23],[94,27,49,25],[95,6,50,4],[95,12,50,10],[95,13,50,11,"scope"],[95,18,50,16],[95,20,50,18,"callback"],[95,28,50,26],[95,29,50,27],[95,32,50,30,"rest"],[95,36,50,34],[96,6,52,4],[96,10,52,8],[96,11,52,9,"scope"],[96,16,52,14],[96,18,52,16],[97,8,53,6],[97,15,53,13,"acs"],[97,18,53,16],[97,19,53,17,"withScope"],[97,28,53,26],[97,29,53,27,"callback"],[97,37,53,35],[97,38,53,36],[98,6,54,4],[99,6,56,4],[99,13,56,11,"acs"],[99,16,56,14],[99,17,56,15,"withSetScope"],[99,29,56,27],[99,30,56,28,"scope"],[99,35,56,33],[99,37,56,35,"callback"],[99,45,56,43],[99,46,56,44],[100,4,57,2],[101,4,59,2],[101,11,59,9,"acs"],[101,14,59,12],[101,15,59,13,"withScope"],[101,24,59,22],[101,25,59,23,"rest"],[101,29,59,27],[101,30,59,28],[101,31,59,29],[101,32,59,30],[101,33,59,31],[102,2,60,0],[104,2,62,0],[105,0,63,0],[106,0,64,0],[107,0,65,0],[108,0,66,0],[109,0,67,0],[110,0,68,0],[111,0,69,0],[112,0,70,0],[113,0,71,0],[115,2,73,0],[116,0,74,0],[117,0,75,0],[118,2,76,0],[118,11,76,9,"withIsolationScope"],[118,29,76,27,"withIsolationScope"],[118,30,77,2],[118,33,77,5,"rest"],[118,37,77,9],[118,39,79,2],[119,4,80,2],[119,10,80,8,"carrier"],[119,17,80,15],[119,20,80,18],[119,24,80,18,"getMainCarrier"],[119,34,80,32],[119,35,80,32,"getMainCarrier"],[119,49,80,32],[119,51,80,33],[119,52,80,34],[120,4,81,2],[120,10,81,8,"acs"],[120,13,81,11],[120,16,81,14],[120,20,81,14,"getAsyncContextStrategy"],[120,40,81,37],[120,41,81,37,"getAsyncContextStrategy"],[120,64,81,37],[120,66,81,38,"carrier"],[120,73,81,45],[120,74,81,46],[122,4,83,2],[123,4,84,2],[123,8,84,6,"rest"],[123,12,84,10],[123,13,84,11,"length"],[123,19,84,17],[123,24,84,22],[123,25,84,23],[123,27,84,25],[124,6,85,4],[124,12,85,10],[124,13,85,11,"isolationScope"],[124,27,85,25],[124,29,85,27,"callback"],[124,37,85,35],[124,38,85,36],[124,41,85,39,"rest"],[124,45,85,43],[125,6,87,4],[125,10,87,8],[125,11,87,9,"isolationScope"],[125,25,87,23],[125,27,87,25],[126,8,88,6],[126,15,88,13,"acs"],[126,18,88,16],[126,19,88,17,"withIsolationScope"],[126,37,88,35],[126,38,88,36,"callback"],[126,46,88,44],[126,47,88,45],[127,6,89,4],[128,6,91,4],[128,13,91,11,"acs"],[128,16,91,14],[128,17,91,15,"withSetIsolationScope"],[128,38,91,36],[128,39,91,37,"isolationScope"],[128,53,91,51],[128,55,91,53,"callback"],[128,63,91,61],[128,64,91,62],[129,4,92,2],[130,4,94,2],[130,11,94,9,"acs"],[130,14,94,12],[130,15,94,13,"withIsolationScope"],[130,33,94,31],[130,34,94,32,"rest"],[130,38,94,36],[130,39,94,37],[130,40,94,38],[130,41,94,39],[130,42,94,40],[131,2,95,0],[133,2,97,0],[134,0,98,0],[135,0,99,0],[136,2,100,0],[136,11,100,9,"getClient"],[136,20,100,18,"getClient"],[136,21,100,18],[136,23,100,21],[137,4,101,2],[137,11,101,9,"getCurrentScope"],[137,26,101,24],[137,27,101,25],[137,28,101,26],[137,29,101,27,"getClient"],[137,38,101,36],[137,39,101,37],[137,40,101,38],[138,2,102,0],[140,2,104,0],[141,0,105,0],[142,0,106,0],[143,2,107,0],[143,11,107,9,"getTraceContextFromScope"],[143,35,107,33,"getTraceContextFromScope"],[143,36,107,34,"scope"],[143,41,107,39],[143,43,107,41],[144,4,108,2],[144,10,108,8,"propagationContext"],[144,28,108,26],[144,31,108,29,"scope"],[144,36,108,34],[144,37,108,35,"getPropagationContext"],[144,58,108,56],[144,59,108,57],[144,60,108,58],[145,4,110,2],[145,10,110,8],[146,6,110,10,"traceId"],[146,13,110,17],[147,6,110,19,"parentSpanId"],[147,18,110,31],[148,6,110,33,"propagationSpanId"],[149,4,110,51],[149,5,110,52],[149,8,110,55,"propagationContext"],[149,26,110,73],[150,4,112,2],[150,10,112,8,"traceContext"],[150,22,112,20],[150,25,112,23],[151,6,113,4,"trace_id"],[151,14,113,12],[151,16,113,14,"traceId"],[151,23,113,21],[152,6,114,4,"span_id"],[152,13,114,11],[152,15,114,13,"propagationSpanId"],[152,32,114,30],[152,36,114,34],[152,40,114,34,"generateSpanId"],[152,66,114,48],[152,67,114,48,"generateSpanId"],[152,81,114,48],[152,83,114,49],[153,4,115,2],[153,5,115,3],[154,4,117,2],[154,8,117,6,"parentSpanId"],[154,20,117,18],[154,22,117,20],[155,6,118,4,"traceContext"],[155,18,118,16],[155,19,118,17,"parent_span_id"],[155,33,118,31],[155,36,118,34,"parentSpanId"],[155,48,118,46],[156,4,119,2],[157,4,121,2],[157,11,121,9,"traceContext"],[157,23,121,21],[158,2,122,0],[159,0,122,1],[159,3]],"functionMap":{"names":["<global>","getCurrentScope","getIsolationScope","getGlobalScope","getGlobalSingleton$argument_1","withScope","withIsolationScope","getClient","getTraceContextFromScope"],"mappings":"AAA;ACQ;CDI;AEM;CFI;AGM;2CCC,iBD;CHC;AKW;CLkB;AMgB;CNmB;AOK;CPE;AQK;CRe"},"hasCjsExports":false},"type":"js/module"}]}