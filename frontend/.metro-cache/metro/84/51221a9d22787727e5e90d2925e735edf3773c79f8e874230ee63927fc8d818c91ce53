{"dependencies":[{"name":"@sentry/browser","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":136,"index":136}}],"key":"v/L5aEun9KHJcPUBAUY+UgyCfuU=","exportNames":["*"],"imports":1}},{"name":"@sentry/core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":137},"end":{"line":2,"column":128,"index":265}}],"key":"/o+dASQcHF2bB25icdsM0E4TExc=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"tanstackRouterBrowserTracingIntegration\", {\n    enumerable: true,\n    get: function () {\n      return tanstackRouterBrowserTracingIntegration;\n    }\n  });\n  var _sentryBrowser = require(_dependencyMap[0], \"@sentry/browser\");\n  var _sentryCore = require(_dependencyMap[1], \"@sentry/core\");\n  /**\n   * A custom browser tracing integration for TanStack Router.\n   *\n   * The minimum compatible version of `@tanstack/react-router` is `1.64.0`.\n   *\n   * @param router A TanStack Router `Router` instance that should be used for routing instrumentation.\n   * @param options Sentry browser tracing configuration.\n   */\n  function tanstackRouterBrowserTracingIntegration(\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  router,\n  // This is `any` because we don't want any type mismatches if TanStack Router changes their types\n  options = {}) {\n    const castRouterInstance = router;\n    const browserTracingIntegrationInstance = (0, _sentryBrowser.browserTracingIntegration)({\n      ...options,\n      instrumentNavigation: false,\n      instrumentPageLoad: false\n    });\n    const {\n      instrumentPageLoad = true,\n      instrumentNavigation = true\n    } = options;\n    return {\n      ...browserTracingIntegrationInstance,\n      afterAllSetup(client) {\n        browserTracingIntegrationInstance.afterAllSetup(client);\n        const initialWindowLocation = _sentryBrowser.WINDOW.location;\n        if (instrumentPageLoad && initialWindowLocation) {\n          const matchedRoutes = castRouterInstance.matchRoutes(initialWindowLocation.pathname, castRouterInstance.options.parseSearch(initialWindowLocation.search), {\n            preload: false,\n            throwOnError: false\n          });\n          const lastMatch = matchedRoutes[matchedRoutes.length - 1];\n          (0, _sentryBrowser.startBrowserTracingPageLoadSpan)(client, {\n            name: lastMatch ? lastMatch.routeId : initialWindowLocation.pathname,\n            attributes: {\n              [_sentryCore.SEMANTIC_ATTRIBUTE_SENTRY_OP]: 'pageload',\n              [_sentryCore.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]: 'auto.pageload.react.tanstack_router',\n              [_sentryCore.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]: lastMatch ? 'route' : 'url',\n              ...routeMatchToParamSpanAttributes(lastMatch)\n            }\n          });\n        }\n        if (instrumentNavigation) {\n          // The onBeforeNavigate hook is called at the very beginning of a navigation and is only called once per navigation, even when the user is redirected\n          castRouterInstance.subscribe('onBeforeNavigate', onBeforeNavigateArgs => {\n            // onBeforeNavigate is called during pageloads. We can avoid creating navigation spans by comparing the states of the to and from arguments.\n            if (onBeforeNavigateArgs.toLocation.state === onBeforeNavigateArgs.fromLocation?.state) {\n              return;\n            }\n            const onResolvedMatchedRoutes = castRouterInstance.matchRoutes(onBeforeNavigateArgs.toLocation.pathname, onBeforeNavigateArgs.toLocation.search, {\n              preload: false,\n              throwOnError: false\n            });\n            const onBeforeNavigateLastMatch = onResolvedMatchedRoutes[onResolvedMatchedRoutes.length - 1];\n            const navigationLocation = _sentryBrowser.WINDOW.location;\n            const navigationSpan = (0, _sentryBrowser.startBrowserTracingNavigationSpan)(client, {\n              name: onBeforeNavigateLastMatch ? onBeforeNavigateLastMatch.routeId : navigationLocation.pathname,\n              attributes: {\n                [_sentryCore.SEMANTIC_ATTRIBUTE_SENTRY_OP]: 'navigation',\n                [_sentryCore.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]: 'auto.navigation.react.tanstack_router',\n                [_sentryCore.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]: onBeforeNavigateLastMatch ? 'route' : 'url'\n              }\n            });\n\n            // In case the user is redirected during navigation we want to update the span with the right value.\n            const unsubscribeOnResolved = castRouterInstance.subscribe('onResolved', onResolvedArgs => {\n              unsubscribeOnResolved();\n              if (navigationSpan) {\n                const onResolvedMatchedRoutes = castRouterInstance.matchRoutes(onResolvedArgs.toLocation.pathname, onResolvedArgs.toLocation.search, {\n                  preload: false,\n                  throwOnError: false\n                });\n                const onResolvedLastMatch = onResolvedMatchedRoutes[onResolvedMatchedRoutes.length - 1];\n                if (onResolvedLastMatch) {\n                  navigationSpan.updateName(onResolvedLastMatch.routeId);\n                  navigationSpan.setAttribute(_sentryCore.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE, 'route');\n                  navigationSpan.setAttributes(routeMatchToParamSpanAttributes(onResolvedLastMatch));\n                }\n              }\n            });\n          });\n        }\n      }\n    };\n  }\n  function routeMatchToParamSpanAttributes(match) {\n    if (!match) {\n      return {};\n    }\n    const paramAttributes = {};\n    Object.entries(match.params).forEach(([key, value]) => {\n      paramAttributes[`url.path.params.${key}`] = value; // TODO(v11): remove attribute which does not adhere to Sentry's semantic convention\n      paramAttributes[`url.path.parameter.${key}`] = value;\n      paramAttributes[`params.${key}`] = value; // params.[key] is an alias\n    });\n    return paramAttributes;\n  }\n});","lineCount":114,"map":[[7,2,119,0,"Object"],[7,8,119,0],[7,9,119,0,"defineProperty"],[7,23,119,0],[7,24,119,0,"exports"],[7,31,119,0],[8,4,119,0,"enumerable"],[8,14,119,0],[9,4,119,0,"get"],[9,7,119,0],[9,18,119,0,"get"],[9,19,119,0],[10,6,119,0],[10,13,119,9,"tanstackRouterBrowserTracingIntegration"],[10,52,119,48],[11,4,119,48],[12,2,119,48],[13,2,1,0],[13,6,1,0,"_sentryBrowser"],[13,20,1,0],[13,23,1,0,"require"],[13,30,1,0],[13,31,1,0,"_dependencyMap"],[13,45,1,0],[14,2,2,0],[14,6,2,0,"_sentryCore"],[14,17,2,0],[14,20,2,0,"require"],[14,27,2,0],[14,28,2,0,"_dependencyMap"],[14,42,2,0],[15,2,4,0],[16,0,5,0],[17,0,6,0],[18,0,7,0],[19,0,8,0],[20,0,9,0],[21,0,10,0],[22,0,11,0],[23,2,12,0],[23,11,12,9,"tanstackRouterBrowserTracingIntegration"],[23,50,12,48,"tanstackRouterBrowserTracingIntegration"],[24,2,13,2],[25,2,14,2,"router"],[25,8,14,8],[26,2,14,10],[27,2,15,2,"options"],[27,9,15,9],[27,12,15,12],[27,13,15,13],[27,14,15,14],[27,16,16,2],[28,4,17,2],[28,10,17,8,"castRouterInstance"],[28,28,17,26],[28,31,17,29,"router"],[28,37,17,35],[29,4,19,2],[29,10,19,8,"browserTracingIntegrationInstance"],[29,43,19,41],[29,46,19,44],[29,50,19,44,"browserTracingIntegration"],[29,64,19,69],[29,65,19,69,"browserTracingIntegration"],[29,90,19,69],[29,92,19,70],[30,6,20,4],[30,9,20,7,"options"],[30,16,20,14],[31,6,21,4,"instrumentNavigation"],[31,26,21,24],[31,28,21,26],[31,33,21,31],[32,6,22,4,"instrumentPageLoad"],[32,24,22,22],[32,26,22,24],[33,4,23,2],[33,5,23,3],[33,6,23,4],[34,4,25,2],[34,10,25,8],[35,6,25,10,"instrumentPageLoad"],[35,24,25,28],[35,27,25,31],[35,31,25,35],[36,6,25,37,"instrumentNavigation"],[36,26,25,57],[36,29,25,60],[37,4,25,65],[37,5,25,66],[37,8,25,69,"options"],[37,15,25,76],[38,4,27,2],[38,11,27,9],[39,6,28,4],[39,9,28,7,"browserTracingIntegrationInstance"],[39,42,28,40],[40,6,29,4,"afterAllSetup"],[40,19,29,17,"afterAllSetup"],[40,20,29,18,"client"],[40,26,29,24],[40,28,29,26],[41,8,30,6,"browserTracingIntegrationInstance"],[41,41,30,39],[41,42,30,40,"afterAllSetup"],[41,55,30,53],[41,56,30,54,"client"],[41,62,30,60],[41,63,30,61],[42,8,32,6],[42,14,32,12,"initialWindowLocation"],[42,35,32,33],[42,38,32,36,"WINDOW"],[42,52,32,42],[42,53,32,42,"WINDOW"],[42,59,32,42],[42,60,32,43,"location"],[42,68,32,51],[43,8,33,6],[43,12,33,10,"instrumentPageLoad"],[43,30,33,28],[43,34,33,32,"initialWindowLocation"],[43,55,33,53],[43,57,33,55],[44,10,34,8],[44,16,34,14,"matchedRoutes"],[44,29,34,27],[44,32,34,30,"castRouterInstance"],[44,50,34,48],[44,51,34,49,"matchRoutes"],[44,62,34,60],[44,63,35,10,"initialWindowLocation"],[44,84,35,31],[44,85,35,32,"pathname"],[44,93,35,40],[44,95,36,10,"castRouterInstance"],[44,113,36,28],[44,114,36,29,"options"],[44,121,36,36],[44,122,36,37,"parseSearch"],[44,133,36,48],[44,134,36,49,"initialWindowLocation"],[44,155,36,70],[44,156,36,71,"search"],[44,162,36,77],[44,163,36,78],[44,165,37,10],[45,12,37,12,"preload"],[45,19,37,19],[45,21,37,21],[45,26,37,26],[46,12,37,28,"throwOnError"],[46,24,37,40],[46,26,37,42],[47,10,37,48],[47,11,38,8],[47,12,38,9],[48,10,40,8],[48,16,40,14,"lastMatch"],[48,25,40,23],[48,28,40,26,"matchedRoutes"],[48,41,40,39],[48,42,40,40,"matchedRoutes"],[48,55,40,53],[48,56,40,54,"length"],[48,62,40,60],[48,65,40,63],[48,66,40,64],[48,67,40,65],[49,10,42,8],[49,14,42,8,"startBrowserTracingPageLoadSpan"],[49,28,42,39],[49,29,42,39,"startBrowserTracingPageLoadSpan"],[49,60,42,39],[49,62,42,40,"client"],[49,68,42,46],[49,70,42,48],[50,12,43,10,"name"],[50,16,43,14],[50,18,43,16,"lastMatch"],[50,27,43,25],[50,30,43,28,"lastMatch"],[50,39,43,37],[50,40,43,38,"routeId"],[50,47,43,45],[50,50,43,48,"initialWindowLocation"],[50,71,43,69],[50,72,43,70,"pathname"],[50,80,43,78],[51,12,44,10,"attributes"],[51,22,44,20],[51,24,44,22],[52,14,45,12],[52,15,45,13,"SEMANTIC_ATTRIBUTE_SENTRY_OP"],[52,26,45,41],[52,27,45,41,"SEMANTIC_ATTRIBUTE_SENTRY_OP"],[52,55,45,41],[52,58,45,44],[52,68,45,54],[53,14,46,12],[53,15,46,13,"SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN"],[53,26,46,45],[53,27,46,45,"SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN"],[53,59,46,45],[53,62,46,48],[53,99,46,85],[54,14,47,12],[54,15,47,13,"SEMANTIC_ATTRIBUTE_SENTRY_SOURCE"],[54,26,47,45],[54,27,47,45,"SEMANTIC_ATTRIBUTE_SENTRY_SOURCE"],[54,59,47,45],[54,62,47,48,"lastMatch"],[54,71,47,57],[54,74,47,60],[54,81,47,67],[54,84,47,70],[54,89,47,75],[55,14,48,12],[55,17,48,15,"routeMatchToParamSpanAttributes"],[55,48,48,46],[55,49,48,47,"lastMatch"],[55,58,48,56],[56,12,49,10],[57,10,50,8],[57,11,50,9],[57,12,50,10],[58,8,51,6],[59,8,53,6],[59,12,53,10,"instrumentNavigation"],[59,32,53,30],[59,34,53,32],[60,10,54,8],[61,10,55,8,"castRouterInstance"],[61,28,55,26],[61,29,55,27,"subscribe"],[61,38,55,36],[61,39,55,37],[61,57,55,55],[61,59,55,57,"onBeforeNavigateArgs"],[61,79,55,77],[61,83,55,81],[62,12,56,10],[63,12,57,10],[63,16,57,14,"onBeforeNavigateArgs"],[63,36,57,34],[63,37,57,35,"toLocation"],[63,47,57,45],[63,48,57,46,"state"],[63,53,57,51],[63,58,57,56,"onBeforeNavigateArgs"],[63,78,57,76],[63,79,57,77,"fromLocation"],[63,91,57,89],[63,93,57,91,"state"],[63,98,57,96],[63,100,57,98],[64,14,58,12],[65,12,59,10],[66,12,61,10],[66,18,61,16,"onResolvedMatchedRoutes"],[66,41,61,39],[66,44,61,42,"castRouterInstance"],[66,62,61,60],[66,63,61,61,"matchRoutes"],[66,74,61,72],[66,75,62,12,"onBeforeNavigateArgs"],[66,95,62,32],[66,96,62,33,"toLocation"],[66,106,62,43],[66,107,62,44,"pathname"],[66,115,62,52],[66,117,63,12,"onBeforeNavigateArgs"],[66,137,63,32],[66,138,63,33,"toLocation"],[66,148,63,43],[66,149,63,44,"search"],[66,155,63,50],[66,157,64,12],[67,14,64,14,"preload"],[67,21,64,21],[67,23,64,23],[67,28,64,28],[68,14,64,30,"throwOnError"],[68,26,64,42],[68,28,64,44],[69,12,64,50],[69,13,65,10],[69,14,65,11],[70,12,67,10],[70,18,67,16,"onBeforeNavigateLastMatch"],[70,43,67,41],[70,46,67,44,"onResolvedMatchedRoutes"],[70,69,67,67],[70,70,67,68,"onResolvedMatchedRoutes"],[70,93,67,91],[70,94,67,92,"length"],[70,100,67,98],[70,103,67,101],[70,104,67,102],[70,105,67,103],[71,12,69,10],[71,18,69,16,"navigationLocation"],[71,36,69,34],[71,39,69,37,"WINDOW"],[71,53,69,43],[71,54,69,43,"WINDOW"],[71,60,69,43],[71,61,69,44,"location"],[71,69,69,52],[72,12,70,10],[72,18,70,16,"navigationSpan"],[72,32,70,30],[72,35,70,33],[72,39,70,33,"startBrowserTracingNavigationSpan"],[72,53,70,66],[72,54,70,66,"startBrowserTracingNavigationSpan"],[72,87,70,66],[72,89,70,67,"client"],[72,95,70,73],[72,97,70,75],[73,14,71,12,"name"],[73,18,71,16],[73,20,71,18,"onBeforeNavigateLastMatch"],[73,45,71,43],[73,48,71,46,"onBeforeNavigateLastMatch"],[73,73,71,71],[73,74,71,72,"routeId"],[73,81,71,79],[73,84,71,82,"navigationLocation"],[73,102,71,100],[73,103,71,101,"pathname"],[73,111,71,109],[74,14,72,12,"attributes"],[74,24,72,22],[74,26,72,24],[75,16,73,14],[75,17,73,15,"SEMANTIC_ATTRIBUTE_SENTRY_OP"],[75,28,73,43],[75,29,73,43,"SEMANTIC_ATTRIBUTE_SENTRY_OP"],[75,57,73,43],[75,60,73,46],[75,72,73,58],[76,16,74,14],[76,17,74,15,"SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN"],[76,28,74,47],[76,29,74,47,"SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN"],[76,61,74,47],[76,64,74,50],[76,103,74,89],[77,16,75,14],[77,17,75,15,"SEMANTIC_ATTRIBUTE_SENTRY_SOURCE"],[77,28,75,47],[77,29,75,47,"SEMANTIC_ATTRIBUTE_SENTRY_SOURCE"],[77,61,75,47],[77,64,75,50,"onBeforeNavigateLastMatch"],[77,89,75,75],[77,92,75,78],[77,99,75,85],[77,102,75,88],[78,14,76,12],[79,12,77,10],[79,13,77,11],[79,14,77,12],[81,12,79,10],[82,12,80,10],[82,18,80,16,"unsubscribeOnResolved"],[82,39,80,37],[82,42,80,40,"castRouterInstance"],[82,60,80,58],[82,61,80,59,"subscribe"],[82,70,80,68],[82,71,80,69],[82,83,80,81],[82,85,80,83,"onResolvedArgs"],[82,99,80,97],[82,103,80,101],[83,14,81,12,"unsubscribeOnResolved"],[83,35,81,33],[83,36,81,34],[83,37,81,35],[84,14,82,12],[84,18,82,16,"navigationSpan"],[84,32,82,30],[84,34,82,32],[85,16,83,14],[85,22,83,20,"onResolvedMatchedRoutes"],[85,45,83,43],[85,48,83,46,"castRouterInstance"],[85,66,83,64],[85,67,83,65,"matchRoutes"],[85,78,83,76],[85,79,84,16,"onResolvedArgs"],[85,93,84,30],[85,94,84,31,"toLocation"],[85,104,84,41],[85,105,84,42,"pathname"],[85,113,84,50],[85,115,85,16,"onResolvedArgs"],[85,129,85,30],[85,130,85,31,"toLocation"],[85,140,85,41],[85,141,85,42,"search"],[85,147,85,48],[85,149,86,16],[86,18,86,18,"preload"],[86,25,86,25],[86,27,86,27],[86,32,86,32],[87,18,86,34,"throwOnError"],[87,30,86,46],[87,32,86,48],[88,16,86,54],[88,17,87,14],[88,18,87,15],[89,16,89,14],[89,22,89,20,"onResolvedLastMatch"],[89,41,89,39],[89,44,89,42,"onResolvedMatchedRoutes"],[89,67,89,65],[89,68,89,66,"onResolvedMatchedRoutes"],[89,91,89,89],[89,92,89,90,"length"],[89,98,89,96],[89,101,89,99],[89,102,89,100],[89,103,89,101],[90,16,91,14],[90,20,91,18,"onResolvedLastMatch"],[90,39,91,37],[90,41,91,39],[91,18,92,16,"navigationSpan"],[91,32,92,30],[91,33,92,31,"updateName"],[91,43,92,41],[91,44,92,42,"onResolvedLastMatch"],[91,63,92,61],[91,64,92,62,"routeId"],[91,71,92,69],[91,72,92,70],[92,18,93,16,"navigationSpan"],[92,32,93,30],[92,33,93,31,"setAttribute"],[92,45,93,43],[92,46,93,44,"SEMANTIC_ATTRIBUTE_SENTRY_SOURCE"],[92,57,93,76],[92,58,93,76,"SEMANTIC_ATTRIBUTE_SENTRY_SOURCE"],[92,90,93,76],[92,92,93,78],[92,99,93,85],[92,100,93,86],[93,18,94,16,"navigationSpan"],[93,32,94,30],[93,33,94,31,"setAttributes"],[93,46,94,44],[93,47,94,45,"routeMatchToParamSpanAttributes"],[93,78,94,76],[93,79,94,77,"onResolvedLastMatch"],[93,98,94,96],[93,99,94,97],[93,100,94,98],[94,16,95,14],[95,14,96,12],[96,12,97,10],[96,13,97,11],[96,14,97,12],[97,10,98,8],[97,11,98,9],[97,12,98,10],[98,8,99,6],[99,6,100,4],[100,4,101,2],[100,5,101,3],[101,2,102,0],[102,2,104,0],[102,11,104,9,"routeMatchToParamSpanAttributes"],[102,42,104,40,"routeMatchToParamSpanAttributes"],[102,43,104,41,"match"],[102,48,104,46],[102,50,104,48],[103,4,105,2],[103,8,105,6],[103,9,105,7,"match"],[103,14,105,12],[103,16,105,14],[104,6,106,4],[104,13,106,11],[104,14,106,12],[104,15,106,13],[105,4,107,2],[106,4,109,2],[106,10,109,8,"paramAttributes"],[106,25,109,23],[106,28,109,26],[106,29,109,27],[106,30,109,28],[107,4,110,2,"Object"],[107,10,110,8],[107,11,110,9,"entries"],[107,18,110,16],[107,19,110,17,"match"],[107,24,110,22],[107,25,110,23,"params"],[107,31,110,29],[107,32,110,30],[107,33,110,31,"forEach"],[107,40,110,38],[107,41,110,39],[107,42,110,40],[107,43,110,41,"key"],[107,46,110,44],[107,48,110,46,"value"],[107,53,110,51],[107,54,110,52],[107,59,110,57],[108,6,111,4,"paramAttributes"],[108,21,111,19],[108,22,111,20],[108,41,111,39,"key"],[108,44,111,42],[108,46,111,44],[108,47,111,45],[108,50,111,48,"value"],[108,55,111,53],[108,56,111,54],[108,57,111,55],[109,6,112,4,"paramAttributes"],[109,21,112,19],[109,22,112,20],[109,44,112,42,"key"],[109,47,112,45],[109,49,112,47],[109,50,112,48],[109,53,112,51,"value"],[109,58,112,56],[110,6,113,4,"paramAttributes"],[110,21,113,19],[110,22,113,20],[110,32,113,30,"key"],[110,35,113,33],[110,37,113,35],[110,38,113,36],[110,41,113,39,"value"],[110,46,113,44],[110,47,113,45],[110,48,113,46],[111,4,114,2],[111,5,114,3],[111,6,114,4],[112,4,116,2],[112,11,116,9,"paramAttributes"],[112,26,116,24],[113,2,117,0],[114,0,117,1],[114,3]],"functionMap":{"names":["<global>","tanstackRouterBrowserTracingIntegration","afterAllSetup","castRouterInstance.subscribe$argument_1","routeMatchToParamSpanAttributes","Object.entries.forEach$argument_0"],"mappings":"AAA;ACW;ICiB;yDC0B;SD2C;KDE;CDE;AIE;uCCM;GDI;CJG"},"hasCjsExports":false},"type":"js/module"}]}