{"dependencies":[{"name":"@sentry/core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":96,"index":96}}],"key":"/o+dASQcHF2bB25icdsM0E4TExc=","exportNames":["*"],"imports":1}},{"name":"../debug-build.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":97},"end":{"line":2,"column":48,"index":145}}],"key":"rfhktnzi6PvZxT1xtyHWbBktN/w=","exportNames":["*"],"imports":1}},{"name":"../helpers.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":146},"end":{"line":3,"column":39,"index":185}}],"key":"xGB1RU1bemGAHq3E44EIR7oSA2c=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"registerBackgroundTabDetection\", {\n    enumerable: true,\n    get: function () {\n      return registerBackgroundTabDetection;\n    }\n  });\n  var _sentryCore = require(_dependencyMap[0], \"@sentry/core\");\n  var _debugBuildJs = require(_dependencyMap[1], \"../debug-build.js\");\n  var _helpersJs = require(_dependencyMap[2], \"../helpers.js\");\n  /**\n   * Add a listener that cancels and finishes a transaction when the global\n   * document is hidden.\n   */\n  function registerBackgroundTabDetection() {\n    if (_helpersJs.WINDOW.document) {\n      _helpersJs.WINDOW.document.addEventListener('visibilitychange', () => {\n        const activeSpan = (0, _sentryCore.getActiveSpan)();\n        if (!activeSpan) {\n          return;\n        }\n        const rootSpan = (0, _sentryCore.getRootSpan)(activeSpan);\n        if (_helpersJs.WINDOW.document.hidden && rootSpan) {\n          const cancelledStatus = 'cancelled';\n          const {\n            op,\n            status\n          } = (0, _sentryCore.spanToJSON)(rootSpan);\n          if (_debugBuildJs.DEBUG_BUILD) {\n            _sentryCore.debug.log(`[Tracing] Transaction: ${cancelledStatus} -> since tab moved to the background, op: ${op}`);\n          }\n\n          // We should not set status if it is already set, this prevent important statuses like\n          // error or data loss from being overwritten on transaction.\n          if (!status) {\n            rootSpan.setStatus({\n              code: _sentryCore.SPAN_STATUS_ERROR,\n              message: cancelledStatus\n            });\n          }\n          rootSpan.setAttribute('sentry.cancellation_reason', 'document.hidden');\n          rootSpan.end();\n        }\n      });\n    } else {\n      _debugBuildJs.DEBUG_BUILD && _sentryCore.debug.warn('[Tracing] Could not set up background tab detection due to lack of global document');\n    }\n  }\n});","lineCount":54,"map":[[7,2,43,0,"Object"],[7,8,43,0],[7,9,43,0,"defineProperty"],[7,23,43,0],[7,24,43,0,"exports"],[7,31,43,0],[8,4,43,0,"enumerable"],[8,14,43,0],[9,4,43,0,"get"],[9,7,43,0],[9,18,43,0,"get"],[9,19,43,0],[10,6,43,0],[10,13,43,9,"registerBackgroundTabDetection"],[10,43,43,39],[11,4,43,39],[12,2,43,39],[13,2,1,0],[13,6,1,0,"_sentryCore"],[13,17,1,0],[13,20,1,0,"require"],[13,27,1,0],[13,28,1,0,"_dependencyMap"],[13,42,1,0],[14,2,2,0],[14,6,2,0,"_debugBuildJs"],[14,19,2,0],[14,22,2,0,"require"],[14,29,2,0],[14,30,2,0,"_dependencyMap"],[14,44,2,0],[15,2,3,0],[15,6,3,0,"_helpersJs"],[15,16,3,0],[15,19,3,0,"require"],[15,26,3,0],[15,27,3,0,"_dependencyMap"],[15,41,3,0],[16,2,5,0],[17,0,6,0],[18,0,7,0],[19,0,8,0],[20,2,9,0],[20,11,9,9,"registerBackgroundTabDetection"],[20,41,9,39,"registerBackgroundTabDetection"],[20,42,9,39],[20,44,9,42],[21,4,10,2],[21,8,10,6,"WINDOW"],[21,18,10,12],[21,19,10,12,"WINDOW"],[21,25,10,12],[21,26,10,13,"document"],[21,34,10,21],[21,36,10,23],[22,6,11,4,"WINDOW"],[22,16,11,10],[22,17,11,10,"WINDOW"],[22,23,11,10],[22,24,11,11,"document"],[22,32,11,19],[22,33,11,20,"addEventListener"],[22,49,11,36],[22,50,11,37],[22,68,11,55],[22,70,11,57],[22,76,11,63],[23,8,12,6],[23,14,12,12,"activeSpan"],[23,24,12,22],[23,27,12,25],[23,31,12,25,"getActiveSpan"],[23,42,12,38],[23,43,12,38,"getActiveSpan"],[23,56,12,38],[23,58,12,39],[23,59,12,40],[24,8,13,6],[24,12,13,10],[24,13,13,11,"activeSpan"],[24,23,13,21],[24,25,13,23],[25,10,14,8],[26,8,15,6],[27,8,17,6],[27,14,17,12,"rootSpan"],[27,22,17,20],[27,25,17,23],[27,29,17,23,"getRootSpan"],[27,40,17,34],[27,41,17,34,"getRootSpan"],[27,52,17,34],[27,54,17,35,"activeSpan"],[27,64,17,45],[27,65,17,46],[28,8,19,6],[28,12,19,10,"WINDOW"],[28,22,19,16],[28,23,19,16,"WINDOW"],[28,29,19,16],[28,30,19,17,"document"],[28,38,19,25],[28,39,19,26,"hidden"],[28,45,19,32],[28,49,19,36,"rootSpan"],[28,57,19,44],[28,59,19,46],[29,10,20,8],[29,16,20,14,"cancelledStatus"],[29,31,20,29],[29,34,20,32],[29,45,20,43],[30,10,22,8],[30,16,22,14],[31,12,22,16,"op"],[31,14,22,18],[32,12,22,20,"status"],[33,10,22,27],[33,11,22,28],[33,14,22,31],[33,18,22,31,"spanToJSON"],[33,29,22,41],[33,30,22,41,"spanToJSON"],[33,40,22,41],[33,42,22,42,"rootSpan"],[33,50,22,50],[33,51,22,51],[34,10,24,8],[34,14,24,12,"DEBUG_BUILD"],[34,27,24,23],[34,28,24,23,"DEBUG_BUILD"],[34,39,24,23],[34,41,24,25],[35,12,25,10,"debug"],[35,23,25,15],[35,24,25,15,"debug"],[35,29,25,15],[35,30,25,16,"log"],[35,33,25,19],[35,34,25,20],[35,60,25,46,"cancelledStatus"],[35,75,25,61],[35,121,25,107,"op"],[35,123,25,109],[35,125,25,111],[35,126,25,112],[36,10,26,8],[38,10,28,8],[39,10,29,8],[40,10,30,8],[40,14,30,12],[40,15,30,13,"status"],[40,21,30,19],[40,23,30,21],[41,12,31,10,"rootSpan"],[41,20,31,18],[41,21,31,19,"setStatus"],[41,30,31,28],[41,31,31,29],[42,14,31,31,"code"],[42,18,31,35],[42,20,31,37,"SPAN_STATUS_ERROR"],[42,31,31,54],[42,32,31,54,"SPAN_STATUS_ERROR"],[42,49,31,54],[43,14,31,56,"message"],[43,21,31,63],[43,23,31,65,"cancelledStatus"],[44,12,31,81],[44,13,31,82],[44,14,31,83],[45,10,32,8],[46,10,34,8,"rootSpan"],[46,18,34,16],[46,19,34,17,"setAttribute"],[46,31,34,29],[46,32,34,30],[46,60,34,58],[46,62,34,60],[46,79,34,77],[46,80,34,78],[47,10,35,8,"rootSpan"],[47,18,35,16],[47,19,35,17,"end"],[47,22,35,20],[47,23,35,21],[47,24,35,22],[48,8,36,6],[49,6,37,4],[49,7,37,5],[49,8,37,6],[50,4,38,2],[50,5,38,3],[50,11,38,9],[51,6,39,4,"DEBUG_BUILD"],[51,19,39,15],[51,20,39,15,"DEBUG_BUILD"],[51,31,39,15],[51,35,39,19,"debug"],[51,46,39,24],[51,47,39,24,"debug"],[51,52,39,24],[51,53,39,25,"warn"],[51,57,39,29],[51,58,39,30],[51,142,39,114],[51,143,39,115],[52,4,40,2],[53,2,41,0],[54,0,41,1],[54,3]],"functionMap":{"names":["<global>","registerBackgroundTabDetection","WINDOW.document.addEventListener$argument_1"],"mappings":"AAA;ACQ;yDCE;KD0B;CDI"},"hasCjsExports":false},"type":"js/module"}]}