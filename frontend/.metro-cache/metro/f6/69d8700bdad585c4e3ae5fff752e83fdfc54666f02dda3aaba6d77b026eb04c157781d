{"dependencies":[{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.buildPostFormData = buildPostFormData;\n  exports.buildProductFormData = buildProductFormData;\n  exports.buildStoryFormData = buildStoryFormData;\n  exports.buildProfilePictureFormData = buildProfilePictureFormData;\n  exports.buildMessageMediaFormData = buildMessageMediaFormData;\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[0], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  // FormData builders for uploads\n\n  // Use the picker result shape instead of guessing from uri\n\n  /**\n   * Append a file to FormData with proper cross-platform handling\n   */\n  async function appendFileToFormData(formData, field, file, fallbackName = `upload_${Date.now()}`) {\n    const name = file.fileName || file.name || fallbackName;\n    const type = file.mimeType || file.type || \"application/octet-stream\";\n    if (Platform.default.OS === \"web\") {\n      // Web requires Blob/File, not {uri, name, type}\n      const res = await fetch(file.uri);\n      const blob = await res.blob();\n      formData.append(field, blob, name);\n      return;\n    }\n\n    // Native (iOS/Android)\n    formData.append(field, {\n      uri: file.uri,\n      name,\n      type\n    });\n  }\n\n  /**\n   * Build FormData for creating a post\n   */\n  async function buildPostFormData(options) {\n    const formData = new FormData();\n    formData.append(\"content\", options.content.trim() || \"\");\n    if (options.taggedUsers?.trim()) formData.append(\"tagged_users\", options.taggedUsers.trim());\n    if (options.location?.trim()) formData.append(\"location\", options.location.trim());\n    if (options.pollQuestion?.trim()) {\n      formData.append(\"poll_question\", options.pollQuestion.trim());\n      if (options.pollOptions) formData.append(\"poll_options\", JSON.stringify(options.pollOptions.filter(o => o.trim())));\n      if (options.pollDurationHours) formData.append(\"poll_duration_hours\", String(options.pollDurationHours));\n    }\n    if (options.media?.uri) {\n      await appendFileToFormData(formData, \"media\", options.media, \"media_upload\");\n    }\n    return formData;\n  }\n\n  /**\n   * Build FormData for creating a product\n   */\n  async function buildProductFormData(options) {\n    const formData = new FormData();\n    formData.append(\"name\", options.name);\n    formData.append(\"description\", options.description);\n    formData.append(\"price\", options.price);\n    if (options.productType) formData.append(\"product_type\", options.productType);\n    if (options.serviceDuration) formData.append(\"service_duration\", String(options.serviceDuration));\n    if (options.digitalFileUrl) formData.append(\"digital_file_url\", options.digitalFileUrl);\n    if (options.image?.uri) {\n      await appendFileToFormData(formData, \"image\", options.image, \"product_image\");\n    }\n    return formData;\n  }\n\n  /**\n   * Build FormData for creating a story\n   */\n  async function buildStoryFormData(options) {\n    const formData = new FormData();\n    if (options.caption?.trim()) formData.append(\"caption\", options.caption.trim());\n    await appendFileToFormData(formData, \"media\", options.media, \"story_media\");\n\n    // Tell backend media_type based on mimeType\n    const mt = (options.media.mimeType || options.media.type || \"\").toLowerCase();\n    const mediaType = mt.startsWith(\"video/\") ? \"video\" : mt.startsWith(\"audio/\") ? \"audio\" : \"image\";\n    formData.append(\"media_type\", mediaType);\n    return formData;\n  }\n\n  /**\n   * Build FormData for profile picture upload\n   */\n  async function buildProfilePictureFormData(options) {\n    const formData = new FormData();\n    await appendFileToFormData(formData, \"profile_picture\", options.image, \"profile_picture\");\n    return formData;\n  }\n\n  /**\n   * Build FormData for voice/video message\n   */\n  async function buildMessageMediaFormData(options) {\n    const formData = new FormData();\n    formData.append(\"conversation_id\", options.conversationId);\n    const mt = (options.media.mimeType || \"\").toLowerCase();\n    const messageType = mt.startsWith(\"video/\") ? \"video\" : mt.startsWith(\"audio/\") ? \"voice\" : \"file\";\n    formData.append(\"message_type\", messageType);\n    await appendFileToFormData(formData, \"media\", options.media, `${messageType}_message`);\n    return formData;\n  }\n});","lineCount":117,"map":[[12,2,43,0,"exports"],[12,9,43,0],[12,10,43,0,"buildPostFormData"],[12,27,43,0],[12,30,43,0,"buildPostFormData"],[12,47,43,0],[13,2,75,0,"exports"],[13,9,75,0],[13,10,75,0,"buildProductFormData"],[13,30,75,0],[13,33,75,0,"buildProductFormData"],[13,53,75,0],[14,2,104,0,"exports"],[14,9,104,0],[14,10,104,0,"buildStoryFormData"],[14,28,104,0],[14,31,104,0,"buildStoryFormData"],[14,49,104,0],[15,2,129,0,"exports"],[15,9,129,0],[15,10,129,0,"buildProfilePictureFormData"],[15,37,129,0],[15,40,129,0,"buildProfilePictureFormData"],[15,67,129,0],[16,2,142,0,"exports"],[16,9,142,0],[16,10,142,0,"buildMessageMediaFormData"],[16,35,142,0],[16,38,142,0,"buildMessageMediaFormData"],[16,63,142,0],[17,2,161,1],[17,6,161,1,"_reactNativeWebDistExportsPlatform"],[17,40,161,1],[17,43,161,1,"require"],[17,50,161,1],[17,51,161,1,"_dependencyMap"],[17,65,161,1],[18,2,161,1],[18,6,161,1,"Platform"],[18,14,161,1],[18,17,161,1,"_interopDefault"],[18,32,161,1],[18,33,161,1,"_reactNativeWebDistExportsPlatform"],[18,67,161,1],[19,2,1,0],[21,2,4,0],[23,2,12,0],[24,0,13,0],[25,0,14,0],[26,2,15,0],[26,17,15,15,"appendFileToFormData"],[26,37,15,35,"appendFileToFormData"],[26,38,16,2,"formData"],[26,46,16,20],[26,48,17,2,"field"],[26,53,17,15],[26,55,18,2,"file"],[26,59,18,17],[26,61,19,2,"fallbackName"],[26,73,19,14],[26,76,19,17],[26,86,19,27,"Date"],[26,90,19,31],[26,91,19,32,"now"],[26,94,19,35],[26,95,19,36],[26,96,19,37],[26,98,19,39],[26,100,20,2],[27,4,21,2],[27,10,21,8,"name"],[27,14,21,12],[27,17,21,15,"file"],[27,21,21,19],[27,22,21,20,"fileName"],[27,30,21,28],[27,34,21,33,"file"],[27,38,21,37],[27,39,21,46,"name"],[27,43,21,50],[27,47,21,54,"fallbackName"],[27,59,21,66],[28,4,22,2],[28,10,22,8,"type"],[28,14,22,12],[28,17,22,15,"file"],[28,21,22,19],[28,22,22,20,"mimeType"],[28,30,22,28],[28,34,22,33,"file"],[28,38,22,37],[28,39,22,46,"type"],[28,43,22,50],[28,47,22,54],[28,73,22,80],[29,4,24,2],[29,8,24,6,"Platform"],[29,16,24,14],[29,17,24,14,"default"],[29,24,24,14],[29,25,24,15,"OS"],[29,27,24,17],[29,32,24,22],[29,37,24,27],[29,39,24,29],[30,6,25,4],[31,6,26,4],[31,12,26,10,"res"],[31,15,26,13],[31,18,26,16],[31,24,26,22,"fetch"],[31,29,26,27],[31,30,26,28,"file"],[31,34,26,32],[31,35,26,33,"uri"],[31,38,26,36],[31,39,26,37],[32,6,27,4],[32,12,27,10,"blob"],[32,16,27,14],[32,19,27,17],[32,25,27,23,"res"],[32,28,27,26],[32,29,27,27,"blob"],[32,33,27,31],[32,34,27,32],[32,35,27,33],[33,6,28,4,"formData"],[33,14,28,12],[33,15,28,13,"append"],[33,21,28,19],[33,22,28,20,"field"],[33,27,28,25],[33,29,28,27,"blob"],[33,33,28,31],[33,35,28,40,"name"],[33,39,28,44],[33,40,28,45],[34,6,29,4],[35,4,30,2],[37,4,32,2],[38,4,33,2,"formData"],[38,12,33,10],[38,13,33,11,"append"],[38,19,33,17],[38,20,33,18,"field"],[38,25,33,23],[38,27,33,25],[39,6,34,4,"uri"],[39,9,34,7],[39,11,34,9,"file"],[39,15,34,13],[39,16,34,14,"uri"],[39,19,34,17],[40,6,35,4,"name"],[40,10,35,8],[41,6,36,4,"type"],[42,4,37,2],[42,5,37,10],[42,6,37,11],[43,2,38,0],[45,2,40,0],[46,0,41,0],[47,0,42,0],[48,2,43,7],[48,17,43,22,"buildPostFormData"],[48,34,43,39,"buildPostFormData"],[48,35,43,40,"options"],[48,42,51,1],[48,44,51,22],[49,4,52,2],[49,10,52,8,"formData"],[49,18,52,16],[49,21,52,19],[49,25,52,23,"FormData"],[49,33,52,31],[49,34,52,32],[49,35,52,33],[50,4,54,2,"formData"],[50,12,54,10],[50,13,54,11,"append"],[50,19,54,17],[50,20,54,18],[50,29,54,27],[50,31,54,29,"options"],[50,38,54,36],[50,39,54,37,"content"],[50,46,54,44],[50,47,54,45,"trim"],[50,51,54,49],[50,52,54,50],[50,53,54,51],[50,57,54,55],[50,59,54,57],[50,60,54,58],[51,4,56,2],[51,8,56,6,"options"],[51,15,56,13],[51,16,56,14,"taggedUsers"],[51,27,56,25],[51,29,56,27,"trim"],[51,33,56,31],[51,34,56,32],[51,35,56,33],[51,37,56,35,"formData"],[51,45,56,43],[51,46,56,44,"append"],[51,52,56,50],[51,53,56,51],[51,67,56,65],[51,69,56,67,"options"],[51,76,56,74],[51,77,56,75,"taggedUsers"],[51,88,56,86],[51,89,56,87,"trim"],[51,93,56,91],[51,94,56,92],[51,95,56,93],[51,96,56,94],[52,4,57,2],[52,8,57,6,"options"],[52,15,57,13],[52,16,57,14,"location"],[52,24,57,22],[52,26,57,24,"trim"],[52,30,57,28],[52,31,57,29],[52,32,57,30],[52,34,57,32,"formData"],[52,42,57,40],[52,43,57,41,"append"],[52,49,57,47],[52,50,57,48],[52,60,57,58],[52,62,57,60,"options"],[52,69,57,67],[52,70,57,68,"location"],[52,78,57,76],[52,79,57,77,"trim"],[52,83,57,81],[52,84,57,82],[52,85,57,83],[52,86,57,84],[53,4,59,2],[53,8,59,6,"options"],[53,15,59,13],[53,16,59,14,"pollQuestion"],[53,28,59,26],[53,30,59,28,"trim"],[53,34,59,32],[53,35,59,33],[53,36,59,34],[53,38,59,36],[54,6,60,4,"formData"],[54,14,60,12],[54,15,60,13,"append"],[54,21,60,19],[54,22,60,20],[54,37,60,35],[54,39,60,37,"options"],[54,46,60,44],[54,47,60,45,"pollQuestion"],[54,59,60,57],[54,60,60,58,"trim"],[54,64,60,62],[54,65,60,63],[54,66,60,64],[54,67,60,65],[55,6,61,4],[55,10,61,8,"options"],[55,17,61,15],[55,18,61,16,"pollOptions"],[55,29,61,27],[55,31,61,29,"formData"],[55,39,61,37],[55,40,61,38,"append"],[55,46,61,44],[55,47,61,45],[55,61,61,59],[55,63,61,61,"JSON"],[55,67,61,65],[55,68,61,66,"stringify"],[55,77,61,75],[55,78,61,76,"options"],[55,85,61,83],[55,86,61,84,"pollOptions"],[55,97,61,95],[55,98,61,96,"filter"],[55,104,61,102],[55,105,61,103,"o"],[55,106,61,104],[55,110,61,108,"o"],[55,111,61,109],[55,112,61,110,"trim"],[55,116,61,114],[55,117,61,115],[55,118,61,116],[55,119,61,117],[55,120,61,118],[55,121,61,119],[56,6,62,4],[56,10,62,8,"options"],[56,17,62,15],[56,18,62,16,"pollDurationHours"],[56,35,62,33],[56,37,62,35,"formData"],[56,45,62,43],[56,46,62,44,"append"],[56,52,62,50],[56,53,62,51],[56,74,62,72],[56,76,62,74,"String"],[56,82,62,80],[56,83,62,81,"options"],[56,90,62,88],[56,91,62,89,"pollDurationHours"],[56,108,62,106],[56,109,62,107],[56,110,62,108],[57,4,63,2],[58,4,65,2],[58,8,65,6,"options"],[58,15,65,13],[58,16,65,14,"media"],[58,21,65,19],[58,23,65,21,"uri"],[58,26,65,24],[58,28,65,26],[59,6,66,4],[59,12,66,10,"appendFileToFormData"],[59,32,66,30],[59,33,66,31,"formData"],[59,41,66,39],[59,43,66,41],[59,50,66,48],[59,52,66,50,"options"],[59,59,66,57],[59,60,66,58,"media"],[59,65,66,63],[59,67,66,65],[59,81,66,79],[59,82,66,80],[60,4,67,2],[61,4,69,2],[61,11,69,9,"formData"],[61,19,69,17],[62,2,70,0],[64,2,72,0],[65,0,73,0],[66,0,74,0],[67,2,75,7],[67,17,75,22,"buildProductFormData"],[67,37,75,42,"buildProductFormData"],[67,38,75,43,"options"],[67,45,83,1],[67,47,83,22],[68,4,84,2],[68,10,84,8,"formData"],[68,18,84,16],[68,21,84,19],[68,25,84,23,"FormData"],[68,33,84,31],[68,34,84,32],[68,35,84,33],[69,4,86,2,"formData"],[69,12,86,10],[69,13,86,11,"append"],[69,19,86,17],[69,20,86,18],[69,26,86,24],[69,28,86,26,"options"],[69,35,86,33],[69,36,86,34,"name"],[69,40,86,38],[69,41,86,39],[70,4,87,2,"formData"],[70,12,87,10],[70,13,87,11,"append"],[70,19,87,17],[70,20,87,18],[70,33,87,31],[70,35,87,33,"options"],[70,42,87,40],[70,43,87,41,"description"],[70,54,87,52],[70,55,87,53],[71,4,88,2,"formData"],[71,12,88,10],[71,13,88,11,"append"],[71,19,88,17],[71,20,88,18],[71,27,88,25],[71,29,88,27,"options"],[71,36,88,34],[71,37,88,35,"price"],[71,42,88,40],[71,43,88,41],[72,4,90,2],[72,8,90,6,"options"],[72,15,90,13],[72,16,90,14,"productType"],[72,27,90,25],[72,29,90,27,"formData"],[72,37,90,35],[72,38,90,36,"append"],[72,44,90,42],[72,45,90,43],[72,59,90,57],[72,61,90,59,"options"],[72,68,90,66],[72,69,90,67,"productType"],[72,80,90,78],[72,81,90,79],[73,4,91,2],[73,8,91,6,"options"],[73,15,91,13],[73,16,91,14,"serviceDuration"],[73,31,91,29],[73,33,91,31,"formData"],[73,41,91,39],[73,42,91,40,"append"],[73,48,91,46],[73,49,91,47],[73,67,91,65],[73,69,91,67,"String"],[73,75,91,73],[73,76,91,74,"options"],[73,83,91,81],[73,84,91,82,"serviceDuration"],[73,99,91,97],[73,100,91,98],[73,101,91,99],[74,4,92,2],[74,8,92,6,"options"],[74,15,92,13],[74,16,92,14,"digitalFileUrl"],[74,30,92,28],[74,32,92,30,"formData"],[74,40,92,38],[74,41,92,39,"append"],[74,47,92,45],[74,48,92,46],[74,66,92,64],[74,68,92,66,"options"],[74,75,92,73],[74,76,92,74,"digitalFileUrl"],[74,90,92,88],[74,91,92,89],[75,4,94,2],[75,8,94,6,"options"],[75,15,94,13],[75,16,94,14,"image"],[75,21,94,19],[75,23,94,21,"uri"],[75,26,94,24],[75,28,94,26],[76,6,95,4],[76,12,95,10,"appendFileToFormData"],[76,32,95,30],[76,33,95,31,"formData"],[76,41,95,39],[76,43,95,41],[76,50,95,48],[76,52,95,50,"options"],[76,59,95,57],[76,60,95,58,"image"],[76,65,95,63],[76,67,95,65],[76,82,95,80],[76,83,95,81],[77,4,96,2],[78,4,98,2],[78,11,98,9,"formData"],[78,19,98,17],[79,2,99,0],[81,2,101,0],[82,0,102,0],[83,0,103,0],[84,2,104,7],[84,17,104,22,"buildStoryFormData"],[84,35,104,40,"buildStoryFormData"],[84,36,104,41,"options"],[84,43,107,1],[84,45,107,22],[85,4,108,2],[85,10,108,8,"formData"],[85,18,108,16],[85,21,108,19],[85,25,108,23,"FormData"],[85,33,108,31],[85,34,108,32],[85,35,108,33],[86,4,110,2],[86,8,110,6,"options"],[86,15,110,13],[86,16,110,14,"caption"],[86,23,110,21],[86,25,110,23,"trim"],[86,29,110,27],[86,30,110,28],[86,31,110,29],[86,33,110,31,"formData"],[86,41,110,39],[86,42,110,40,"append"],[86,48,110,46],[86,49,110,47],[86,58,110,56],[86,60,110,58,"options"],[86,67,110,65],[86,68,110,66,"caption"],[86,75,110,73],[86,76,110,74,"trim"],[86,80,110,78],[86,81,110,79],[86,82,110,80],[86,83,110,81],[87,4,112,2],[87,10,112,8,"appendFileToFormData"],[87,30,112,28],[87,31,112,29,"formData"],[87,39,112,37],[87,41,112,39],[87,48,112,46],[87,50,112,48,"options"],[87,57,112,55],[87,58,112,56,"media"],[87,63,112,61],[87,65,112,63],[87,78,112,76],[87,79,112,77],[89,4,114,2],[90,4,115,2],[90,10,115,8,"mt"],[90,12,115,10],[90,15,115,13],[90,16,115,14,"options"],[90,23,115,21],[90,24,115,22,"media"],[90,29,115,27],[90,30,115,28,"mimeType"],[90,38,115,36],[90,42,115,41,"options"],[90,49,115,48],[90,50,115,49,"media"],[90,55,115,54],[90,56,115,63,"type"],[90,60,115,67],[90,64,115,71],[90,66,115,73],[90,68,115,75,"toLowerCase"],[90,79,115,86],[90,80,115,87],[90,81,115,88],[91,4,116,2],[91,10,116,8,"mediaType"],[91,19,116,17],[91,22,117,4,"mt"],[91,24,117,6],[91,25,117,7,"startsWith"],[91,35,117,17],[91,36,117,18],[91,44,117,26],[91,45,117,27],[91,48,117,30],[91,55,117,37],[91,58,118,4,"mt"],[91,60,118,6],[91,61,118,7,"startsWith"],[91,71,118,17],[91,72,118,18],[91,80,118,26],[91,81,118,27],[91,84,118,30],[91,91,118,37],[91,94,119,4],[91,101,119,11],[92,4,121,2,"formData"],[92,12,121,10],[92,13,121,11,"append"],[92,19,121,17],[92,20,121,18],[92,32,121,30],[92,34,121,32,"mediaType"],[92,43,121,41],[92,44,121,42],[93,4,123,2],[93,11,123,9,"formData"],[93,19,123,17],[94,2,124,0],[96,2,126,0],[97,0,127,0],[98,0,128,0],[99,2,129,7],[99,17,129,22,"buildProfilePictureFormData"],[99,44,129,49,"buildProfilePictureFormData"],[99,45,129,50,"options"],[99,52,131,1],[99,54,131,22],[100,4,132,2],[100,10,132,8,"formData"],[100,18,132,16],[100,21,132,19],[100,25,132,23,"FormData"],[100,33,132,31],[100,34,132,32],[100,35,132,33],[101,4,134,2],[101,10,134,8,"appendFileToFormData"],[101,30,134,28],[101,31,134,29,"formData"],[101,39,134,37],[101,41,134,39],[101,58,134,56],[101,60,134,58,"options"],[101,67,134,65],[101,68,134,66,"image"],[101,73,134,71],[101,75,134,73],[101,92,134,90],[101,93,134,91],[102,4,136,2],[102,11,136,9,"formData"],[102,19,136,17],[103,2,137,0],[105,2,139,0],[106,0,140,0],[107,0,141,0],[108,2,142,7],[108,17,142,22,"buildMessageMediaFormData"],[108,42,142,47,"buildMessageMediaFormData"],[108,43,142,48,"options"],[108,50,145,1],[108,52,145,22],[109,4,146,2],[109,10,146,8,"formData"],[109,18,146,16],[109,21,146,19],[109,25,146,23,"FormData"],[109,33,146,31],[109,34,146,32],[109,35,146,33],[110,4,148,2,"formData"],[110,12,148,10],[110,13,148,11,"append"],[110,19,148,17],[110,20,148,18],[110,37,148,35],[110,39,148,37,"options"],[110,46,148,44],[110,47,148,45,"conversationId"],[110,61,148,59],[110,62,148,60],[111,4,150,2],[111,10,150,8,"mt"],[111,12,150,10],[111,15,150,13],[111,16,150,14,"options"],[111,23,150,21],[111,24,150,22,"media"],[111,29,150,27],[111,30,150,28,"mimeType"],[111,38,150,36],[111,42,150,40],[111,44,150,42],[111,46,150,44,"toLowerCase"],[111,57,150,55],[111,58,150,56],[111,59,150,57],[112,4,151,2],[112,10,151,8,"messageType"],[112,21,151,19],[112,24,152,4,"mt"],[112,26,152,6],[112,27,152,7,"startsWith"],[112,37,152,17],[112,38,152,18],[112,46,152,26],[112,47,152,27],[112,50,152,30],[112,57,152,37],[112,60,153,4,"mt"],[112,62,153,6],[112,63,153,7,"startsWith"],[112,73,153,17],[112,74,153,18],[112,82,153,26],[112,83,153,27],[112,86,153,30],[112,93,153,37],[112,96,154,4],[112,102,154,10],[113,4,156,2,"formData"],[113,12,156,10],[113,13,156,11,"append"],[113,19,156,17],[113,20,156,18],[113,34,156,32],[113,36,156,34,"messageType"],[113,47,156,45],[113,48,156,46],[114,4,158,2],[114,10,158,8,"appendFileToFormData"],[114,30,158,28],[114,31,158,29,"formData"],[114,39,158,37],[114,41,158,39],[114,48,158,46],[114,50,158,48,"options"],[114,57,158,55],[114,58,158,56,"media"],[114,63,158,61],[114,65,158,63],[114,68,158,66,"messageType"],[114,79,158,77],[114,89,158,87],[114,90,158,88],[115,4,160,2],[115,11,160,9,"formData"],[115,19,160,17],[116,2,161,0],[117,0,161,1],[117,3]],"functionMap":{"names":["<global>","appendFileToFormData","buildPostFormData","options.pollOptions.filter$argument_0","buildProductFormData","buildStoryFormData","buildProfilePictureFormData","buildMessageMediaFormData"],"mappings":"AAA;ACc;CDuB;OEK;uGCkB,aD;CFS;OIK;CJwB;OKK;CLoB;OMK;CNQ;OOK;CPmB"},"hasCjsExports":false},"type":"js/module"}]}