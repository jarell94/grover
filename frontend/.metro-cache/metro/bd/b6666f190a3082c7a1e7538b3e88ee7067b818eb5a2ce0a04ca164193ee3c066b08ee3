{"dependencies":[{"name":"@sentry/core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":49,"index":49}}],"key":"/o+dASQcHF2bB25icdsM0E4TExc=","exportNames":["*"],"imports":1}},{"name":"./networkUtils","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":50},"end":{"line":2,"column":71,"index":121}}],"key":"K0r0jGDN3xnnNoM2ekIGGvtUzBQ=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.enrichXhrBreadcrumbsForMobileReplay = enrichXhrBreadcrumbsForMobileReplay;\n  var _sentryCore = require(_dependencyMap[0], \"@sentry/core\");\n  var _networkUtils = require(_dependencyMap[1], \"./networkUtils\");\n  /**\n   * Enrich an XHR breadcrumb with additional data for Mobile Replay network tab.\n   */\n  function enrichXhrBreadcrumbsForMobileReplay(breadcrumb, hint) {\n    if (breadcrumb.category !== 'xhr' || !hint) {\n      return;\n    }\n    const xhrHint = hint;\n    if (!xhrHint.xhr) {\n      return;\n    }\n    const now = Date.now();\n    const {\n      startTimestamp = now,\n      endTimestamp = now,\n      input,\n      xhr\n    } = xhrHint;\n    const reqSize = (0, _networkUtils.getBodySize)(input);\n    const resSize = xhr.getResponseHeader('content-length') ? (0, _networkUtils.parseContentLengthHeader)(xhr.getResponseHeader('content-length')) : _getBodySize(xhr.response, xhr.responseType);\n    breadcrumb.data = (0, _sentryCore.dropUndefinedKeys)(Object.assign({\n      start_timestamp: startTimestamp,\n      end_timestamp: endTimestamp,\n      request_body_size: reqSize,\n      response_body_size: resSize\n    }, breadcrumb.data));\n  }\n  function _getBodySize(body, responseType) {\n    try {\n      const bodyStr = responseType === 'json' && body && typeof body === 'object' ? JSON.stringify(body) : body;\n      return (0, _networkUtils.getBodySize)(bodyStr);\n    } catch (_a) {\n      return undefined;\n    }\n  }\n});","lineCount":45,"map":[[7,2,6,0,"exports"],[7,9,6,0],[7,10,6,0,"enrichXhrBreadcrumbsForMobileReplay"],[7,45,6,0],[7,48,6,0,"enrichXhrBreadcrumbsForMobileReplay"],[7,83,6,0],[8,2,1,0],[8,6,1,0,"_sentryCore"],[8,17,1,0],[8,20,1,0,"require"],[8,27,1,0],[8,28,1,0,"_dependencyMap"],[8,42,1,0],[9,2,2,0],[9,6,2,0,"_networkUtils"],[9,19,2,0],[9,22,2,0,"require"],[9,29,2,0],[9,30,2,0,"_dependencyMap"],[9,44,2,0],[10,2,3,0],[11,0,4,0],[12,0,5,0],[13,2,6,7],[13,11,6,16,"enrichXhrBreadcrumbsForMobileReplay"],[13,46,6,51,"enrichXhrBreadcrumbsForMobileReplay"],[13,47,6,52,"breadcrumb"],[13,57,6,62],[13,59,6,64,"hint"],[13,63,6,68],[13,65,6,70],[14,4,7,4],[14,8,7,8,"breadcrumb"],[14,18,7,18],[14,19,7,19,"category"],[14,27,7,27],[14,32,7,32],[14,37,7,37],[14,41,7,41],[14,42,7,42,"hint"],[14,46,7,46],[14,48,7,48],[15,6,8,8],[16,4,9,4],[17,4,10,4],[17,10,10,10,"xhrHint"],[17,17,10,17],[17,20,10,20,"hint"],[17,24,10,24],[18,4,11,4],[18,8,11,8],[18,9,11,9,"xhrHint"],[18,16,11,16],[18,17,11,17,"xhr"],[18,20,11,20],[18,22,11,22],[19,6,12,8],[20,4,13,4],[21,4,14,4],[21,10,14,10,"now"],[21,13,14,13],[21,16,14,16,"Date"],[21,20,14,20],[21,21,14,21,"now"],[21,24,14,24],[21,25,14,25],[21,26,14,26],[22,4,15,4],[22,10,15,10],[23,6,15,12,"startTimestamp"],[23,20,15,26],[23,23,15,29,"now"],[23,26,15,32],[24,6,15,34,"endTimestamp"],[24,18,15,46],[24,21,15,49,"now"],[24,24,15,52],[25,6,15,54,"input"],[25,11,15,59],[26,6,15,61,"xhr"],[27,4,15,65],[27,5,15,66],[27,8,15,69,"xhrHint"],[27,15,15,76],[28,4,16,4],[28,10,16,10,"reqSize"],[28,17,16,17],[28,20,16,20],[28,24,16,20,"getBodySize"],[28,37,16,31],[28,38,16,31,"getBodySize"],[28,49,16,31],[28,51,16,32,"input"],[28,56,16,37],[28,57,16,38],[29,4,17,4],[29,10,17,10,"resSize"],[29,17,17,17],[29,20,17,20,"xhr"],[29,23,17,23],[29,24,17,24,"getResponseHeader"],[29,41,17,41],[29,42,17,42],[29,58,17,58],[29,59,17,59],[29,62,18,10],[29,66,18,10,"parseContentLengthHeader"],[29,79,18,34],[29,80,18,34,"parseContentLengthHeader"],[29,104,18,34],[29,106,18,35,"xhr"],[29,109,18,38],[29,110,18,39,"getResponseHeader"],[29,127,18,56],[29,128,18,57],[29,144,18,73],[29,145,18,74],[29,146,18,75],[29,149,19,10,"_getBodySize"],[29,161,19,22],[29,162,19,23,"xhr"],[29,165,19,26],[29,166,19,27,"response"],[29,174,19,35],[29,176,19,37,"xhr"],[29,179,19,40],[29,180,19,41,"responseType"],[29,192,19,53],[29,193,19,54],[30,4,20,4,"breadcrumb"],[30,14,20,14],[30,15,20,15,"data"],[30,19,20,19],[30,22,20,22],[30,26,20,22,"dropUndefinedKeys"],[30,37,20,39],[30,38,20,39,"dropUndefinedKeys"],[30,55,20,39],[30,57,20,40,"Object"],[30,63,20,46],[30,64,20,47,"assign"],[30,70,20,53],[30,71,20,54],[31,6,20,56,"start_timestamp"],[31,21,20,71],[31,23,20,73,"startTimestamp"],[31,37,20,87],[32,6,20,89,"end_timestamp"],[32,19,20,102],[32,21,20,104,"endTimestamp"],[32,33,20,116],[33,6,20,118,"request_body_size"],[33,23,20,135],[33,25,20,137,"reqSize"],[33,32,20,144],[34,6,20,146,"response_body_size"],[34,24,20,164],[34,26,20,166,"resSize"],[35,4,20,174],[35,5,20,175],[35,7,20,177,"breadcrumb"],[35,17,20,187],[35,18,20,188,"data"],[35,22,20,192],[35,23,20,193],[35,24,20,194],[36,2,21,0],[37,2,22,0],[37,11,22,9,"_getBodySize"],[37,23,22,21,"_getBodySize"],[37,24,22,22,"body"],[37,28,22,26],[37,30,22,28,"responseType"],[37,42,22,40],[37,44,22,42],[38,4,23,4],[38,8,23,8],[39,6,24,8],[39,12,24,14,"bodyStr"],[39,19,24,21],[39,22,24,24,"responseType"],[39,34,24,36],[39,39,24,41],[39,45,24,47],[39,49,24,51,"body"],[39,53,24,55],[39,57,24,59],[39,64,24,66,"body"],[39,68,24,70],[39,73,24,75],[39,81,24,83],[39,84,24,86,"JSON"],[39,88,24,90],[39,89,24,91,"stringify"],[39,98,24,100],[39,99,24,101,"body"],[39,103,24,105],[39,104,24,106],[39,107,24,109,"body"],[39,111,24,113],[40,6,25,8],[40,13,25,15],[40,17,25,15,"getBodySize"],[40,30,25,26],[40,31,25,26,"getBodySize"],[40,42,25,26],[40,44,25,27,"bodyStr"],[40,51,25,34],[40,52,25,35],[41,4,26,4],[41,5,26,5],[41,6,27,4],[41,13,27,11,"_a"],[41,15,27,13],[41,17,27,15],[42,6,28,8],[42,13,28,15,"undefined"],[42,22,28,24],[43,4,29,4],[44,2,30,0],[45,0,30,1],[45,3]],"functionMap":{"names":["<global>","enrichXhrBreadcrumbsForMobileReplay","_getBodySize"],"mappings":"AAA;OCK;CDe;AEC;CFQ"},"hasCjsExports":false},"type":"js/module"}]}