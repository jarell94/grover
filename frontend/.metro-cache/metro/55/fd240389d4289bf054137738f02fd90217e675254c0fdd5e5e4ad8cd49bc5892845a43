{"dependencies":[{"name":"@sentry/core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":166,"index":166}}],"key":"/o+dASQcHF2bB25icdsM0E4TExc=","exportNames":["*"],"imports":1}},{"name":"../../../debug-build.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":167},"end":{"line":2,"column":54,"index":221}}],"key":"ICtV6jFYCSAzqvGpRIHaV/Jobv0=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"unleashIntegration\", {\n    enumerable: true,\n    get: function () {\n      return unleashIntegration;\n    }\n  });\n  var _sentryCore = require(_dependencyMap[0], \"@sentry/core\");\n  var _debugBuildJs = require(_dependencyMap[1], \"../../../debug-build.js\");\n  /**\n   * Sentry integration for capturing feature flag evaluations from the Unleash SDK.\n   *\n   * See the [feature flag documentation](https://develop.sentry.dev/sdk/expected-features/#feature-flags) for more information.\n   *\n   * @example\n   * ```\n   * import { UnleashClient } from 'unleash-proxy-client';\n   * import * as Sentry from '@sentry/browser';\n   *\n   * Sentry.init({\n   *   dsn: '___PUBLIC_DSN___',\n   *   integrations: [Sentry.unleashIntegration({featureFlagClientClass: UnleashClient})],\n   * });\n   *\n   * const unleash = new UnleashClient(...);\n   * unleash.start();\n   *\n   * unleash.isEnabled('my-feature');\n   * Sentry.captureException(new Error('something went wrong'));\n   * ```\n   */\n  const unleashIntegration = (0, _sentryCore.defineIntegration)(({\n    featureFlagClientClass: unleashClientClass\n  }) => {\n    return {\n      name: 'Unleash',\n      setupOnce() {\n        const unleashClientPrototype = unleashClientClass.prototype;\n        (0, _sentryCore.fill)(unleashClientPrototype, 'isEnabled', _wrappedIsEnabled);\n      },\n      processEvent(event, _hint, _client) {\n        return (0, _sentryCore._INTERNAL_copyFlagsFromScopeToEvent)(event);\n      }\n    };\n  });\n\n  /**\n   * Wraps the UnleashClient.isEnabled method to capture feature flag evaluations. Its only side effect is writing to Sentry scope.\n   *\n   * This wrapper is safe for all isEnabled signatures. If the signature does not match (this: UnleashClient, toggleName: string, ...args: unknown[]) => boolean,\n   * we log an error and return the original result.\n   *\n   * @param original - The original method.\n   * @returns Wrapped method. Results should match the original.\n   */\n  function _wrappedIsEnabled(original) {\n    return function (...args) {\n      const toggleName = args[0];\n      const result = original.apply(this, args);\n      if (typeof toggleName === 'string' && typeof result === 'boolean') {\n        (0, _sentryCore._INTERNAL_insertFlagToScope)(toggleName, result);\n        (0, _sentryCore._INTERNAL_addFeatureFlagToActiveSpan)(toggleName, result);\n      } else if (_debugBuildJs.DEBUG_BUILD) {\n        _sentryCore.debug.error(`[Feature Flags] UnleashClient.isEnabled does not match expected signature. arg0: ${toggleName} (${typeof toggleName}), result: ${result} (${typeof result})`);\n      }\n      return result;\n    };\n  }\n});","lineCount":74,"map":[[7,2,71,0,"Object"],[7,8,71,0],[7,9,71,0,"defineProperty"],[7,23,71,0],[7,24,71,0,"exports"],[7,31,71,0],[8,4,71,0,"enumerable"],[8,14,71,0],[9,4,71,0,"get"],[9,7,71,0],[9,18,71,0,"get"],[9,19,71,0],[10,6,71,0],[10,13,71,9,"unleashIntegration"],[10,31,71,27],[11,4,71,27],[12,2,71,27],[13,2,1,0],[13,6,1,0,"_sentryCore"],[13,17,1,0],[13,20,1,0,"require"],[13,27,1,0],[13,28,1,0,"_dependencyMap"],[13,42,1,0],[14,2,2,0],[14,6,2,0,"_debugBuildJs"],[14,19,2,0],[14,22,2,0,"require"],[14,29,2,0],[14,30,2,0,"_dependencyMap"],[14,44,2,0],[15,2,4,0],[16,0,5,0],[17,0,6,0],[18,0,7,0],[19,0,8,0],[20,0,9,0],[21,0,10,0],[22,0,11,0],[23,0,12,0],[24,0,13,0],[25,0,14,0],[26,0,15,0],[27,0,16,0],[28,0,17,0],[29,0,18,0],[30,0,19,0],[31,0,20,0],[32,0,21,0],[33,0,22,0],[34,0,23,0],[35,0,24,0],[36,0,25,0],[37,2,26,0],[37,8,26,6,"unleashIntegration"],[37,26,26,24],[37,29,26,27],[37,33,26,27,"defineIntegration"],[37,44,26,44],[37,45,26,44,"defineIntegration"],[37,62,26,44],[37,64,27,2],[37,65,27,3],[38,4,27,5,"featureFlagClientClass"],[38,26,27,27],[38,28,27,29,"unleashClientClass"],[39,2,27,48],[39,3,27,49],[39,8,27,54],[40,4,28,4],[40,11,28,11],[41,6,29,6,"name"],[41,10,29,10],[41,12,29,12],[41,21,29,21],[42,6,31,6,"setupOnce"],[42,15,31,15,"setupOnce"],[42,16,31,15],[42,18,31,18],[43,8,32,8],[43,14,32,14,"unleashClientPrototype"],[43,36,32,36],[43,39,32,39,"unleashClientClass"],[43,57,32,57],[43,58,32,58,"prototype"],[43,67,32,67],[44,8,33,8],[44,12,33,8,"fill"],[44,23,33,12],[44,24,33,12,"fill"],[44,28,33,12],[44,30,33,13,"unleashClientPrototype"],[44,52,33,35],[44,54,33,37],[44,65,33,48],[44,67,33,50,"_wrappedIsEnabled"],[44,84,33,67],[44,85,33,68],[45,6,34,6],[45,7,34,7],[46,6,36,6,"processEvent"],[46,18,36,18,"processEvent"],[46,19,36,19,"event"],[46,24,36,24],[46,26,36,26,"_hint"],[46,31,36,31],[46,33,36,33,"_client"],[46,40,36,40],[46,42,36,42],[47,8,37,8],[47,15,37,15],[47,19,37,15,"_INTERNAL_copyFlagsFromScopeToEvent"],[47,30,37,50],[47,31,37,50,"_INTERNAL_copyFlagsFromScopeToEvent"],[47,66,37,50],[47,68,37,51,"event"],[47,73,37,56],[47,74,37,57],[48,6,38,6],[49,4,39,4],[49,5,39,5],[50,2,40,2],[50,3,41,0],[50,4,41,1],[52,2,43,0],[53,0,44,0],[54,0,45,0],[55,0,46,0],[56,0,47,0],[57,0,48,0],[58,0,49,0],[59,0,50,0],[60,0,51,0],[61,2,52,0],[61,11,52,9,"_wrappedIsEnabled"],[61,28,52,26,"_wrappedIsEnabled"],[61,29,53,2,"original"],[61,37,53,10],[61,39,54,2],[62,4,55,2],[62,11,55,9],[62,21,55,20],[62,24,55,23,"args"],[62,28,55,27],[62,30,55,29],[63,6,56,4],[63,12,56,10,"toggleName"],[63,22,56,20],[63,25,56,23,"args"],[63,29,56,27],[63,30,56,28],[63,31,56,29],[63,32,56,30],[64,6,57,4],[64,12,57,10,"result"],[64,18,57,16],[64,21,57,19,"original"],[64,29,57,27],[64,30,57,28,"apply"],[64,35,57,33],[64,36,57,34],[64,40,57,38],[64,42,57,40,"args"],[64,46,57,44],[64,47,57,45],[65,6,59,4],[65,10,59,8],[65,17,59,15,"toggleName"],[65,27,59,25],[65,32,59,30],[65,40,59,38],[65,44,59,42],[65,51,59,49,"result"],[65,57,59,55],[65,62,59,60],[65,71,59,69],[65,73,59,71],[66,8,60,6],[66,12,60,6,"_INTERNAL_insertFlagToScope"],[66,23,60,33],[66,24,60,33,"_INTERNAL_insertFlagToScope"],[66,51,60,33],[66,53,60,34,"toggleName"],[66,63,60,44],[66,65,60,46,"result"],[66,71,60,52],[66,72,60,53],[67,8,61,6],[67,12,61,6,"_INTERNAL_addFeatureFlagToActiveSpan"],[67,23,61,42],[67,24,61,42,"_INTERNAL_addFeatureFlagToActiveSpan"],[67,60,61,42],[67,62,61,43,"toggleName"],[67,72,61,53],[67,74,61,55,"result"],[67,80,61,61],[67,81,61,62],[68,6,62,4],[68,7,62,5],[68,13,62,11],[68,17,62,15,"DEBUG_BUILD"],[68,30,62,26],[68,31,62,26,"DEBUG_BUILD"],[68,42,62,26],[68,44,62,28],[69,8,63,6,"debug"],[69,19,63,11],[69,20,63,11,"debug"],[69,25,63,11],[69,26,63,12,"error"],[69,31,63,17],[69,32,64,8],[69,116,64,92,"toggleName"],[69,126,64,102],[69,131,64,107],[69,138,64,114,"toggleName"],[69,148,64,124],[69,162,64,138,"result"],[69,168,64,144],[69,173,64,149],[69,180,64,156,"result"],[69,186,64,162],[69,189,65,6],[69,190,65,7],[70,6,66,4],[71,6,67,4],[71,13,67,11,"result"],[71,19,67,17],[72,4,68,2],[72,5,68,3],[73,2,69,0],[74,0,69,1],[74,3]],"functionMap":{"names":["<global>","defineIntegration$argument_0","setupOnce","processEvent","_wrappedIsEnabled","<anonymous>"],"mappings":"AAA;EC0B;MCI;ODG;MEE;OFE;GDE;AIY;SCG;GDa;CJC"},"hasCjsExports":false},"type":"js/module"}]}