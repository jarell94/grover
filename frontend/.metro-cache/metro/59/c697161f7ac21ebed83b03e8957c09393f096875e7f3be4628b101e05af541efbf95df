{"dependencies":[{"name":"./is.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":37,"index":37}}],"key":"C6fLnEQPNIdj7xXbougAJ0zoinA=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"SyncPromise\", {\n    enumerable: true,\n    get: function () {\n      return SyncPromise;\n    }\n  });\n  Object.defineProperty(exports, \"rejectedSyncPromise\", {\n    enumerable: true,\n    get: function () {\n      return rejectedSyncPromise;\n    }\n  });\n  Object.defineProperty(exports, \"resolvedSyncPromise\", {\n    enumerable: true,\n    get: function () {\n      return resolvedSyncPromise;\n    }\n  });\n  var _isJs = require(_dependencyMap[0], \"./is.js\");\n  /* eslint-disable @typescript-eslint/no-explicit-any */\n\n  /** SyncPromise internal states */\n  const STATE_PENDING = 0;\n  const STATE_RESOLVED = 1;\n  const STATE_REJECTED = 2;\n\n  /**\n   * Creates a resolved sync promise.\n   *\n   * @param value the value to resolve the promise with\n   * @returns the resolved sync promise\n   */\n  function resolvedSyncPromise(value) {\n    return new SyncPromise(resolve => {\n      resolve(value);\n    });\n  }\n\n  /**\n   * Creates a rejected sync promise.\n   *\n   * @param value the value to reject the promise with\n   * @returns the rejected sync promise\n   */\n  function rejectedSyncPromise(reason) {\n    return new SyncPromise((_, reject) => {\n      reject(reason);\n    });\n  }\n\n  /**\n   * Thenable class that behaves like a Promise and follows it's interface\n   * but is not async internally\n   */\n  class SyncPromise {\n    constructor(executor) {\n      this._state = STATE_PENDING;\n      this._handlers = [];\n      this._runExecutor(executor);\n    }\n\n    /** @inheritdoc */\n    then(onfulfilled, onrejected) {\n      return new SyncPromise((resolve, reject) => {\n        this._handlers.push([false, result => {\n          if (!onfulfilled) {\n            // TODO: ¯\\_(ツ)_/¯\n            // TODO: FIXME\n            resolve(result);\n          } else {\n            try {\n              resolve(onfulfilled(result));\n            } catch (e) {\n              reject(e);\n            }\n          }\n        }, reason => {\n          if (!onrejected) {\n            reject(reason);\n          } else {\n            try {\n              resolve(onrejected(reason));\n            } catch (e) {\n              reject(e);\n            }\n          }\n        }]);\n        this._executeHandlers();\n      });\n    }\n\n    /** @inheritdoc */\n    catch(onrejected) {\n      return this.then(val => val, onrejected);\n    }\n\n    /** @inheritdoc */\n    finally(onfinally) {\n      return new SyncPromise((resolve, reject) => {\n        let val;\n        let isRejected;\n        return this.then(value => {\n          isRejected = false;\n          val = value;\n          if (onfinally) {\n            onfinally();\n          }\n        }, reason => {\n          isRejected = true;\n          val = reason;\n          if (onfinally) {\n            onfinally();\n          }\n        }).then(() => {\n          if (isRejected) {\n            reject(val);\n            return;\n          }\n          resolve(val);\n        });\n      });\n    }\n\n    /** Excute the resolve/reject handlers. */\n    _executeHandlers() {\n      if (this._state === STATE_PENDING) {\n        return;\n      }\n      const cachedHandlers = this._handlers.slice();\n      this._handlers = [];\n      cachedHandlers.forEach(handler => {\n        if (handler[0]) {\n          return;\n        }\n        if (this._state === STATE_RESOLVED) {\n          handler[1](this._value);\n        }\n        if (this._state === STATE_REJECTED) {\n          handler[2](this._value);\n        }\n        handler[0] = true;\n      });\n    }\n\n    /** Run the executor for the SyncPromise. */\n    _runExecutor(executor) {\n      const setResult = (state, value) => {\n        if (this._state !== STATE_PENDING) {\n          return;\n        }\n        if ((0, _isJs.isThenable)(value)) {\n          void value.then(resolve, reject);\n          return;\n        }\n        this._state = state;\n        this._value = value;\n        this._executeHandlers();\n      };\n      const resolve = value => {\n        setResult(STATE_RESOLVED, value);\n      };\n      const reject = reason => {\n        setResult(STATE_REJECTED, reason);\n      };\n      try {\n        executor(resolve, reject);\n      } catch (e) {\n        reject(e);\n      }\n    }\n  }\n});","lineCount":178,"map":[[7,2,183,0,"Object"],[7,8,183,0],[7,9,183,0,"defineProperty"],[7,23,183,0],[7,24,183,0,"exports"],[7,31,183,0],[8,4,183,0,"enumerable"],[8,14,183,0],[9,4,183,0,"get"],[9,7,183,0],[9,18,183,0,"get"],[9,19,183,0],[10,6,183,0],[10,13,183,9,"SyncPromise"],[10,24,183,20],[11,4,183,20],[12,2,183,20],[13,2,183,0,"Object"],[13,8,183,0],[13,9,183,0,"defineProperty"],[13,23,183,0],[13,24,183,0,"exports"],[13,31,183,0],[14,4,183,0,"enumerable"],[14,14,183,0],[15,4,183,0,"get"],[15,7,183,0],[15,18,183,0,"get"],[15,19,183,0],[16,6,183,0],[16,13,183,22,"rejectedSyncPromise"],[16,32,183,41],[17,4,183,41],[18,2,183,41],[19,2,183,0,"Object"],[19,8,183,0],[19,9,183,0,"defineProperty"],[19,23,183,0],[19,24,183,0,"exports"],[19,31,183,0],[20,4,183,0,"enumerable"],[20,14,183,0],[21,4,183,0,"get"],[21,7,183,0],[21,18,183,0,"get"],[21,19,183,0],[22,6,183,0],[22,13,183,43,"resolvedSyncPromise"],[22,32,183,62],[23,4,183,62],[24,2,183,62],[25,2,1,0],[25,6,1,0,"_isJs"],[25,11,1,0],[25,14,1,0,"require"],[25,21,1,0],[25,22,1,0,"_dependencyMap"],[25,36,1,0],[26,2,3,0],[28,2,5,0],[29,2,6,0],[29,8,6,6,"STATE_PENDING"],[29,21,6,19],[29,24,6,22],[29,25,6,23],[30,2,7,0],[30,8,7,6,"STATE_RESOLVED"],[30,22,7,20],[30,25,7,23],[30,26,7,24],[31,2,8,0],[31,8,8,6,"STATE_REJECTED"],[31,22,8,20],[31,25,8,23],[31,26,8,24],[33,2,10,0],[34,0,11,0],[35,0,12,0],[36,0,13,0],[37,0,14,0],[38,0,15,0],[39,2,16,0],[39,11,16,9,"resolvedSyncPromise"],[39,30,16,28,"resolvedSyncPromise"],[39,31,16,29,"value"],[39,36,16,34],[39,38,16,36],[40,4,17,2],[40,11,17,9],[40,15,17,13,"SyncPromise"],[40,26,17,24],[40,27,17,25,"resolve"],[40,34,17,32],[40,38,17,36],[41,6,18,4,"resolve"],[41,13,18,11],[41,14,18,12,"value"],[41,19,18,17],[41,20,18,18],[42,4,19,2],[42,5,19,3],[42,6,19,4],[43,2,20,0],[45,2,22,0],[46,0,23,0],[47,0,24,0],[48,0,25,0],[49,0,26,0],[50,0,27,0],[51,2,28,0],[51,11,28,9,"rejectedSyncPromise"],[51,30,28,28,"rejectedSyncPromise"],[51,31,28,29,"reason"],[51,37,28,35],[51,39,28,37],[52,4,29,2],[52,11,29,9],[52,15,29,13,"SyncPromise"],[52,26,29,24],[52,27,29,25],[52,28,29,26,"_"],[52,29,29,27],[52,31,29,29,"reject"],[52,37,29,35],[52,42,29,40],[53,6,30,4,"reject"],[53,12,30,10],[53,13,30,11,"reason"],[53,19,30,17],[53,20,30,18],[54,4,31,2],[54,5,31,3],[54,6,31,4],[55,2,32,0],[57,2,34,0],[58,0,35,0],[59,0,36,0],[60,0,37,0],[61,2,38,0],[61,8,38,6,"SyncPromise"],[61,19,38,17],[61,20,38,18],[62,4,40,3,"constructor"],[62,15,40,14,"constructor"],[62,16,40,15,"executor"],[62,24,40,23],[62,26,40,25],[63,6,41,4],[63,10,41,8],[63,11,41,9,"_state"],[63,17,41,15],[63,20,41,18,"STATE_PENDING"],[63,33,41,31],[64,6,42,4],[64,10,42,8],[64,11,42,9,"_handlers"],[64,20,42,18],[64,23,42,21],[64,25,42,23],[65,6,44,4],[65,10,44,8],[65,11,44,9,"_runExecutor"],[65,23,44,21],[65,24,44,22,"executor"],[65,32,44,30],[65,33,44,31],[66,4,45,2],[68,4,47,2],[69,4,48,3,"then"],[69,8,48,7,"then"],[69,9,49,4,"onfulfilled"],[69,20,49,15],[69,22,50,4,"onrejected"],[69,32,50,14],[69,34,51,4],[70,6,52,4],[70,13,52,11],[70,17,52,15,"SyncPromise"],[70,28,52,26],[70,29,52,27],[70,30,52,28,"resolve"],[70,37,52,35],[70,39,52,37,"reject"],[70,45,52,43],[70,50,52,48],[71,8,53,6],[71,12,53,10],[71,13,53,11,"_handlers"],[71,22,53,20],[71,23,53,21,"push"],[71,27,53,25],[71,28,53,26],[71,29,54,8],[71,34,54,13],[71,36,55,8,"result"],[71,42,55,14],[71,46,55,18],[72,10,56,10],[72,14,56,14],[72,15,56,15,"onfulfilled"],[72,26,56,26],[72,28,56,28],[73,12,57,12],[74,12,58,12],[75,12,59,12,"resolve"],[75,19,59,19],[75,20,59,20,"result"],[75,26,59,27],[75,27,59,28],[76,10,60,10],[76,11,60,11],[76,17,60,17],[77,12,61,12],[77,16,61,16],[78,14,62,14,"resolve"],[78,21,62,21],[78,22,62,22,"onfulfilled"],[78,33,62,33],[78,34,62,34,"result"],[78,40,62,40],[78,41,62,41],[78,42,62,42],[79,12,63,12],[79,13,63,13],[79,14,63,14],[79,21,63,21,"e"],[79,22,63,22],[79,24,63,24],[80,14,64,14,"reject"],[80,20,64,20],[80,21,64,21,"e"],[80,22,64,22],[80,23,64,23],[81,12,65,12],[82,10,66,10],[83,8,67,8],[83,9,67,9],[83,11,68,8,"reason"],[83,17,68,14],[83,21,68,18],[84,10,69,10],[84,14,69,14],[84,15,69,15,"onrejected"],[84,25,69,25],[84,27,69,27],[85,12,70,12,"reject"],[85,18,70,18],[85,19,70,19,"reason"],[85,25,70,25],[85,26,70,26],[86,10,71,10],[86,11,71,11],[86,17,71,17],[87,12,72,12],[87,16,72,16],[88,14,73,14,"resolve"],[88,21,73,21],[88,22,73,22,"onrejected"],[88,32,73,32],[88,33,73,33,"reason"],[88,39,73,39],[88,40,73,40],[88,41,73,41],[89,12,74,12],[89,13,74,13],[89,14,74,14],[89,21,74,21,"e"],[89,22,74,22],[89,24,74,24],[90,14,75,14,"reject"],[90,20,75,20],[90,21,75,21,"e"],[90,22,75,22],[90,23,75,23],[91,12,76,12],[92,10,77,10],[93,8,78,8],[93,9,78,9],[93,10,79,7],[93,11,79,8],[94,8,80,6],[94,12,80,10],[94,13,80,11,"_executeHandlers"],[94,29,80,27],[94,30,80,28],[94,31,80,29],[95,6,81,4],[95,7,81,5],[95,8,81,6],[96,4,82,2],[98,4,84,2],[99,4,85,3,"catch"],[99,9,85,8,"catch"],[99,10,86,4,"onrejected"],[99,20,86,14],[99,22,87,4],[100,6,88,4],[100,13,88,11],[100,17,88,15],[100,18,88,16,"then"],[100,22,88,20],[100,23,88,21,"val"],[100,26,88,24],[100,30,88,28,"val"],[100,33,88,31],[100,35,88,33,"onrejected"],[100,45,88,43],[100,46,88,44],[101,4,89,2],[103,4,91,2],[104,4,92,3,"finally"],[104,11,92,10,"finally"],[104,12,92,11,"onfinally"],[104,21,92,20],[104,23,92,22],[105,6,93,4],[105,13,93,11],[105,17,93,15,"SyncPromise"],[105,28,93,26],[105,29,93,27],[105,30,93,28,"resolve"],[105,37,93,35],[105,39,93,37,"reject"],[105,45,93,43],[105,50,93,48],[106,8,94,6],[106,12,94,10,"val"],[106,15,94,13],[107,8,95,6],[107,12,95,10,"isRejected"],[107,22,95,20],[108,8,97,6],[108,15,97,13],[108,19,97,17],[108,20,97,18,"then"],[108,24,97,22],[108,25,98,8,"value"],[108,30,98,13],[108,34,98,17],[109,10,99,10,"isRejected"],[109,20,99,20],[109,23,99,23],[109,28,99,28],[110,10,100,10,"val"],[110,13,100,13],[110,16,100,16,"value"],[110,21,100,21],[111,10,101,10],[111,14,101,14,"onfinally"],[111,23,101,23],[111,25,101,25],[112,12,102,12,"onfinally"],[112,21,102,21],[112,22,102,22],[112,23,102,23],[113,10,103,10],[114,8,104,8],[114,9,104,9],[114,11,105,8,"reason"],[114,17,105,14],[114,21,105,18],[115,10,106,10,"isRejected"],[115,20,106,20],[115,23,106,23],[115,27,106,27],[116,10,107,10,"val"],[116,13,107,13],[116,16,107,16,"reason"],[116,22,107,22],[117,10,108,10],[117,14,108,14,"onfinally"],[117,23,108,23],[117,25,108,25],[118,12,109,12,"onfinally"],[118,21,109,21],[118,22,109,22],[118,23,109,23],[119,10,110,10],[120,8,111,8],[120,9,112,6],[120,10,112,7],[120,11,112,8,"then"],[120,15,112,12],[120,16,112,13],[120,22,112,19],[121,10,113,8],[121,14,113,12,"isRejected"],[121,24,113,22],[121,26,113,24],[122,12,114,10,"reject"],[122,18,114,16],[122,19,114,17,"val"],[122,22,114,20],[122,23,114,21],[123,12,115,10],[124,10,116,8],[125,10,118,8,"resolve"],[125,17,118,15],[125,18,118,16,"val"],[125,21,118,20],[125,22,118,21],[126,8,119,6],[126,9,119,7],[126,10,119,8],[127,6,120,4],[127,7,120,5],[127,8,120,6],[128,4,121,2],[130,4,123,2],[131,4,124,3,"_executeHandlers"],[131,20,124,19,"_executeHandlers"],[131,21,124,19],[131,23,124,22],[132,6,125,4],[132,10,125,8],[132,14,125,12],[132,15,125,13,"_state"],[132,21,125,19],[132,26,125,24,"STATE_PENDING"],[132,39,125,37],[132,41,125,39],[133,8,126,6],[134,6,127,4],[135,6,129,4],[135,12,129,10,"cachedHandlers"],[135,26,129,24],[135,29,129,27],[135,33,129,31],[135,34,129,32,"_handlers"],[135,43,129,41],[135,44,129,42,"slice"],[135,49,129,47],[135,50,129,48],[135,51,129,49],[136,6,130,4],[136,10,130,8],[136,11,130,9,"_handlers"],[136,20,130,18],[136,23,130,21],[136,25,130,23],[137,6,132,4,"cachedHandlers"],[137,20,132,18],[137,21,132,19,"forEach"],[137,28,132,26],[137,29,132,27,"handler"],[137,36,132,34],[137,40,132,38],[138,8,133,6],[138,12,133,10,"handler"],[138,19,133,17],[138,20,133,18],[138,21,133,19],[138,22,133,20],[138,24,133,22],[139,10,134,8],[140,8,135,6],[141,8,137,6],[141,12,137,10],[141,16,137,14],[141,17,137,15,"_state"],[141,23,137,21],[141,28,137,26,"STATE_RESOLVED"],[141,42,137,40],[141,44,137,42],[142,10,138,8,"handler"],[142,17,138,15],[142,18,138,16],[142,19,138,17],[142,20,138,18],[142,21,138,19],[142,25,138,23],[142,26,138,24,"_value"],[142,32,138,31],[142,33,138,32],[143,8,139,6],[144,8,141,6],[144,12,141,10],[144,16,141,14],[144,17,141,15,"_state"],[144,23,141,21],[144,28,141,26,"STATE_REJECTED"],[144,42,141,40],[144,44,141,42],[145,10,142,8,"handler"],[145,17,142,15],[145,18,142,16],[145,19,142,17],[145,20,142,18],[145,21,142,19],[145,25,142,23],[145,26,142,24,"_value"],[145,32,142,30],[145,33,142,31],[146,8,143,6],[147,8,145,6,"handler"],[147,15,145,13],[147,16,145,14],[147,17,145,15],[147,18,145,16],[147,21,145,19],[147,25,145,23],[148,6,146,4],[148,7,146,5],[148,8,146,6],[149,4,147,2],[151,4,149,2],[152,4,150,3,"_runExecutor"],[152,16,150,15,"_runExecutor"],[152,17,150,16,"executor"],[152,25,150,24],[152,27,150,26],[153,6,151,4],[153,12,151,10,"setResult"],[153,21,151,19],[153,24,151,22,"setResult"],[153,25,151,23,"state"],[153,30,151,28],[153,32,151,30,"value"],[153,37,151,35],[153,42,151,40],[154,8,152,6],[154,12,152,10],[154,16,152,14],[154,17,152,15,"_state"],[154,23,152,21],[154,28,152,26,"STATE_PENDING"],[154,41,152,39],[154,43,152,41],[155,10,153,8],[156,8,154,6],[157,8,156,6],[157,12,156,10],[157,16,156,10,"isThenable"],[157,21,156,20],[157,22,156,20,"isThenable"],[157,32,156,20],[157,34,156,21,"value"],[157,39,156,26],[157,40,156,27],[157,42,156,29],[158,10,157,8],[158,15,157,14,"value"],[158,20,157,19],[158,21,157,22,"then"],[158,25,157,26],[158,26,157,27,"resolve"],[158,33,157,34],[158,35,157,36,"reject"],[158,41,157,42],[158,42,157,43],[159,10,158,8],[160,8,159,6],[161,8,161,6],[161,12,161,10],[161,13,161,11,"_state"],[161,19,161,17],[161,22,161,20,"state"],[161,27,161,25],[162,8,162,6],[162,12,162,10],[162,13,162,11,"_value"],[162,19,162,17],[162,22,162,20,"value"],[162,27,162,25],[163,8,164,6],[163,12,164,10],[163,13,164,11,"_executeHandlers"],[163,29,164,27],[163,30,164,28],[163,31,164,29],[164,6,165,4],[164,7,165,5],[165,6,167,4],[165,12,167,10,"resolve"],[165,19,167,17],[165,22,167,21,"value"],[165,27,167,26],[165,31,167,31],[166,8,168,6,"setResult"],[166,17,168,15],[166,18,168,16,"STATE_RESOLVED"],[166,32,168,30],[166,34,168,32,"value"],[166,39,168,37],[166,40,168,38],[167,6,169,4],[167,7,169,5],[168,6,171,4],[168,12,171,10,"reject"],[168,18,171,16],[168,21,171,20,"reason"],[168,27,171,26],[168,31,171,31],[169,8,172,6,"setResult"],[169,17,172,15],[169,18,172,16,"STATE_REJECTED"],[169,32,172,30],[169,34,172,32,"reason"],[169,40,172,38],[169,41,172,39],[170,6,173,4],[170,7,173,5],[171,6,175,4],[171,10,175,8],[172,8,176,6,"executor"],[172,16,176,14],[172,17,176,15,"resolve"],[172,24,176,22],[172,26,176,24,"reject"],[172,32,176,30],[172,33,176,31],[173,6,177,4],[173,7,177,5],[173,8,177,6],[173,15,177,13,"e"],[173,16,177,14],[173,18,177,16],[174,8,178,6,"reject"],[174,14,178,12],[174,15,178,13,"e"],[174,16,178,14],[174,17,178,15],[175,6,179,4],[176,4,180,2],[177,2,181,0],[178,0,181,1],[178,3]],"functionMap":{"names":["<global>","resolvedSyncPromise","SyncPromise$argument_0","rejectedSyncPromise","SyncPromise","SyncPromise#constructor","SyncPromise#then","<anonymous>","SyncPromise#_catch","then$argument_0","SyncPromise#_finally","then$argument_1","then.then$argument_0","SyncPromise#_executeHandlers","cachedHandlers.forEach$argument_0","SyncPromise#_runExecutor","setResult","resolve","reject"],"mappings":"AAA;ACe;yBCC;GDE;CDC;AGQ;yBDC;GCE;CHC;AIM;GCE;GDK;GEG;2BJI;QKG;SLY;QKC;SLU;KIG;GFC;GIG;qBCG,UD;GJC;GMG;2BRC;QOK;SPM;QSC;STM;aUC;OVO;KQC;GNC;GSG;2BCQ;KDc;GTC;GWG;sBCC;KDc;oBEE;KFE;mBGE;KHE;GXO;CJC"},"hasCjsExports":false},"type":"js/module"}]}