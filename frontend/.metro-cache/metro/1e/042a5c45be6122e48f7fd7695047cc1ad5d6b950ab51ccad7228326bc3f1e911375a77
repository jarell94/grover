{"dependencies":[{"name":"../integration.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":54,"index":54}}],"key":"B8aKvpmafw58aWtupuC7GWTMiwo=","exportNames":["*"],"imports":1}},{"name":"../utils/path.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":55},"end":{"line":2,"column":54,"index":109}}],"key":"Sa82m734Od8MEqL/BO7LVp0/eR0=","exportNames":["*"],"imports":1}},{"name":"../utils/worldwide.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":110},"end":{"line":3,"column":51,"index":161}}],"key":"P+UFfr1ne09dGLmc90iZCFaYonQ=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"generateIteratee\", {\n    enumerable: true,\n    get: function () {\n      return generateIteratee;\n    }\n  });\n  Object.defineProperty(exports, \"rewriteFramesIntegration\", {\n    enumerable: true,\n    get: function () {\n      return rewriteFramesIntegration;\n    }\n  });\n  var _integrationJs = require(_dependencyMap[0], \"../integration.js\");\n  var _utilsPathJs = require(_dependencyMap[1], \"../utils/path.js\");\n  var _utilsWorldwideJs = require(_dependencyMap[2], \"../utils/worldwide.js\");\n  const INTEGRATION_NAME = 'RewriteFrames';\n\n  /**\n   * Rewrite event frames paths.\n   */\n  const rewriteFramesIntegration = (0, _integrationJs.defineIntegration)((options = {}) => {\n    const root = options.root;\n    const prefix = options.prefix || 'app:///';\n    const isBrowser = 'window' in _utilsWorldwideJs.GLOBAL_OBJ && !!_utilsWorldwideJs.GLOBAL_OBJ.window;\n    const iteratee = options.iteratee || generateIteratee({\n      isBrowser,\n      root,\n      prefix\n    });\n\n    /** Process an exception event. */\n    function _processExceptionsEvent(event) {\n      try {\n        return {\n          ...event,\n          exception: {\n            ...event.exception,\n            // The check for this is performed inside `process` call itself, safe to skip here\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            values: event.exception.values.map(value => ({\n              ...value,\n              ...(value.stacktrace && {\n                stacktrace: _processStacktrace(value.stacktrace)\n              })\n            }))\n          }\n        };\n      } catch {\n        return event;\n      }\n    }\n\n    /** Process a stack trace. */\n    function _processStacktrace(stacktrace) {\n      return {\n        ...stacktrace,\n        frames: stacktrace?.frames?.map(f => iteratee(f))\n      };\n    }\n    return {\n      name: INTEGRATION_NAME,\n      processEvent(originalEvent) {\n        let processedEvent = originalEvent;\n        if (originalEvent.exception && Array.isArray(originalEvent.exception.values)) {\n          processedEvent = _processExceptionsEvent(processedEvent);\n        }\n        return processedEvent;\n      }\n    };\n  });\n\n  /**\n   * Exported only for tests.\n   */\n  function generateIteratee({\n    isBrowser,\n    root,\n    prefix\n  }) {\n    return frame => {\n      if (!frame.filename) {\n        return frame;\n      }\n\n      // Determine if this is a Windows frame by checking for a Windows-style prefix such as `C:\\`\n      const isWindowsFrame = /^[a-zA-Z]:\\\\/.test(frame.filename) ||\n      // or the presence of a backslash without a forward slash (which are not allowed on Windows)\n      frame.filename.includes('\\\\') && !frame.filename.includes('/');\n\n      // Check if the frame filename begins with `/`\n      const startsWithSlash = /^\\//.test(frame.filename);\n      if (isBrowser) {\n        if (root) {\n          const oldFilename = frame.filename;\n          if (oldFilename.indexOf(root) === 0) {\n            frame.filename = oldFilename.replace(root, prefix);\n          }\n        }\n      } else {\n        if (isWindowsFrame || startsWithSlash) {\n          const filename = isWindowsFrame ? frame.filename.replace(/^[a-zA-Z]:/, '') // remove Windows-style prefix\n          .replace(/\\\\/g, '/') // replace all `\\\\` instances with `/`\n          : frame.filename;\n          const base = root ? (0, _utilsPathJs.relative)(root, filename) : (0, _utilsPathJs.basename)(filename);\n          frame.filename = `${prefix}${base}`;\n        }\n      }\n      return frame;\n    };\n  }\n});","lineCount":117,"map":[[7,2,107,0,"Object"],[7,8,107,0],[7,9,107,0,"defineProperty"],[7,23,107,0],[7,24,107,0,"exports"],[7,31,107,0],[8,4,107,0,"enumerable"],[8,14,107,0],[9,4,107,0,"get"],[9,7,107,0],[9,18,107,0,"get"],[9,19,107,0],[10,6,107,0],[10,13,107,9,"generateIteratee"],[10,29,107,25],[11,4,107,25],[12,2,107,25],[13,2,107,0,"Object"],[13,8,107,0],[13,9,107,0,"defineProperty"],[13,23,107,0],[13,24,107,0,"exports"],[13,31,107,0],[14,4,107,0,"enumerable"],[14,14,107,0],[15,4,107,0,"get"],[15,7,107,0],[15,18,107,0,"get"],[15,19,107,0],[16,6,107,0],[16,13,107,27,"rewriteFramesIntegration"],[16,37,107,51],[17,4,107,51],[18,2,107,51],[19,2,1,0],[19,6,1,0,"_integrationJs"],[19,20,1,0],[19,23,1,0,"require"],[19,30,1,0],[19,31,1,0,"_dependencyMap"],[19,45,1,0],[20,2,2,0],[20,6,2,0,"_utilsPathJs"],[20,18,2,0],[20,21,2,0,"require"],[20,28,2,0],[20,29,2,0,"_dependencyMap"],[20,43,2,0],[21,2,3,0],[21,6,3,0,"_utilsWorldwideJs"],[21,23,3,0],[21,26,3,0,"require"],[21,33,3,0],[21,34,3,0,"_dependencyMap"],[21,48,3,0],[22,2,5,0],[22,8,5,6,"INTEGRATION_NAME"],[22,24,5,22],[22,27,5,25],[22,42,5,40],[24,2,7,0],[25,0,8,0],[26,0,9,0],[27,2,10,0],[27,8,10,6,"rewriteFramesIntegration"],[27,32,10,30],[27,35,10,33],[27,39,10,33,"defineIntegration"],[27,53,10,50],[27,54,10,50,"defineIntegration"],[27,71,10,50],[27,73,10,51],[27,74,10,52,"options"],[27,81,10,59],[27,84,10,62],[27,85,10,63],[27,86,10,64],[27,91,10,69],[28,4,11,2],[28,10,11,8,"root"],[28,14,11,12],[28,17,11,15,"options"],[28,24,11,22],[28,25,11,23,"root"],[28,29,11,27],[29,4,12,2],[29,10,12,8,"prefix"],[29,16,12,14],[29,19,12,17,"options"],[29,26,12,24],[29,27,12,25,"prefix"],[29,33,12,31],[29,37,12,35],[29,46,12,44],[30,4,14,2],[30,10,14,8,"isBrowser"],[30,19,14,17],[30,22,14,20],[30,30,14,28],[30,34,14,32,"GLOBAL_OBJ"],[30,51,14,42],[30,52,14,42,"GLOBAL_OBJ"],[30,62,14,42],[30,66,14,46],[30,67,14,47],[30,68,14,48,"GLOBAL_OBJ"],[30,85,14,58],[30,86,14,58,"GLOBAL_OBJ"],[30,96,14,58],[30,97,14,59,"window"],[30,103,14,65],[31,4,16,2],[31,10,16,8,"iteratee"],[31,18,16,16],[31,21,16,19,"options"],[31,28,16,26],[31,29,16,27,"iteratee"],[31,37,16,35],[31,41,16,39,"generateIteratee"],[31,57,16,55],[31,58,16,56],[32,6,16,58,"isBrowser"],[32,15,16,67],[33,6,16,69,"root"],[33,10,16,73],[34,6,16,75,"prefix"],[35,4,16,82],[35,5,16,83],[35,6,16,84],[37,4,18,2],[38,4,19,2],[38,13,19,11,"_processExceptionsEvent"],[38,36,19,34,"_processExceptionsEvent"],[38,37,19,35,"event"],[38,42,19,40],[38,44,19,42],[39,6,20,4],[39,10,20,8],[40,8,21,6],[40,15,21,13],[41,10,22,8],[41,13,22,11,"event"],[41,18,22,16],[42,10,23,8,"exception"],[42,19,23,17],[42,21,23,19],[43,12,24,10],[43,15,24,13,"event"],[43,20,24,18],[43,21,24,19,"exception"],[43,30,24,28],[44,12,25,10],[45,12,26,10],[46,12,27,10,"values"],[46,18,27,16],[46,20,27,18,"event"],[46,25,27,23],[46,26,27,24,"exception"],[46,35,27,33],[46,36,27,34,"values"],[46,42,27,40],[46,43,27,41,"map"],[46,46,27,44],[46,47,27,45,"value"],[46,52,27,50],[46,57,27,55],[47,14,28,12],[47,17,28,15,"value"],[47,22,28,20],[48,14,29,12],[48,18,29,16,"value"],[48,23,29,21],[48,24,29,22,"stacktrace"],[48,34,29,32],[48,38,29,36],[49,16,29,38,"stacktrace"],[49,26,29,48],[49,28,29,50,"_processStacktrace"],[49,46,29,68],[49,47,29,69,"value"],[49,52,29,74],[49,53,29,75,"stacktrace"],[49,63,29,85],[50,14,29,87],[50,15,29,88],[51,12,30,10],[51,13,30,11],[51,14,30,12],[52,10,31,8],[53,8,32,6],[53,9,32,7],[54,6,33,4],[54,7,33,5],[54,8,33,6],[54,14,33,12],[55,8,34,6],[55,15,34,13,"event"],[55,20,34,18],[56,6,35,4],[57,4,36,2],[59,4,38,2],[60,4,39,2],[60,13,39,11,"_processStacktrace"],[60,31,39,29,"_processStacktrace"],[60,32,39,30,"stacktrace"],[60,42,39,40],[60,44,39,42],[61,6,40,4],[61,13,40,11],[62,8,41,6],[62,11,41,9,"stacktrace"],[62,21,41,19],[63,8,42,6,"frames"],[63,14,42,12],[63,16,42,14,"stacktrace"],[63,26,42,24],[63,28,42,26,"frames"],[63,34,42,32],[63,36,42,34,"map"],[63,39,42,37],[63,40,42,38,"f"],[63,41,42,39],[63,45,42,43,"iteratee"],[63,53,42,51],[63,54,42,52,"f"],[63,55,42,53],[63,56,42,54],[64,6,43,4],[64,7,43,5],[65,4,44,2],[66,4,46,2],[66,11,46,9],[67,6,47,4,"name"],[67,10,47,8],[67,12,47,10,"INTEGRATION_NAME"],[67,28,47,26],[68,6,48,4,"processEvent"],[68,18,48,16,"processEvent"],[68,19,48,17,"originalEvent"],[68,32,48,30],[68,34,48,32],[69,8,49,6],[69,12,49,10,"processedEvent"],[69,26,49,24],[69,29,49,27,"originalEvent"],[69,42,49,40],[70,8,51,6],[70,12,51,10,"originalEvent"],[70,25,51,23],[70,26,51,24,"exception"],[70,35,51,33],[70,39,51,37,"Array"],[70,44,51,42],[70,45,51,43,"isArray"],[70,52,51,50],[70,53,51,51,"originalEvent"],[70,66,51,64],[70,67,51,65,"exception"],[70,76,51,74],[70,77,51,75,"values"],[70,83,51,81],[70,84,51,82],[70,86,51,84],[71,10,52,8,"processedEvent"],[71,24,52,22],[71,27,52,25,"_processExceptionsEvent"],[71,50,52,48],[71,51,52,49,"processedEvent"],[71,65,52,63],[71,66,52,64],[72,8,53,6],[73,8,55,6],[73,15,55,13,"processedEvent"],[73,29,55,27],[74,6,56,4],[75,4,57,2],[75,5,57,3],[76,2,58,0],[76,3,58,1],[76,4,58,2],[78,2,60,0],[79,0,61,0],[80,0,62,0],[81,2,63,0],[81,11,63,9,"generateIteratee"],[81,27,63,25,"generateIteratee"],[81,28,63,26],[82,4,64,2,"isBrowser"],[82,13,64,11],[83,4,65,2,"root"],[83,8,65,6],[84,4,66,2,"prefix"],[85,2,67,0],[85,3,67,1],[85,5,69,2],[86,4,70,2],[86,11,70,10,"frame"],[86,16,70,15],[86,20,70,20],[87,6,71,4],[87,10,71,8],[87,11,71,9,"frame"],[87,16,71,14],[87,17,71,15,"filename"],[87,25,71,23],[87,27,71,25],[88,8,72,6],[88,15,72,13,"frame"],[88,20,72,18],[89,6,73,4],[91,6,75,4],[92,6,76,4],[92,12,76,10,"isWindowsFrame"],[92,26,76,24],[92,29,77,6],[92,43,77,20],[92,44,77,21,"test"],[92,48,77,25],[92,49,77,26,"frame"],[92,54,77,31],[92,55,77,32,"filename"],[92,63,77,40],[92,64,77,41],[93,6,78,6],[94,6,79,7,"frame"],[94,11,79,12],[94,12,79,13,"filename"],[94,20,79,21],[94,21,79,22,"includes"],[94,29,79,30],[94,30,79,31],[94,34,79,35],[94,35,79,36],[94,39,79,40],[94,40,79,41,"frame"],[94,45,79,46],[94,46,79,47,"filename"],[94,54,79,55],[94,55,79,56,"includes"],[94,63,79,64],[94,64,79,65],[94,67,79,68],[94,68,79,70],[96,6,81,4],[97,6,82,4],[97,12,82,10,"startsWithSlash"],[97,27,82,25],[97,30,82,28],[97,35,82,33],[97,36,82,34,"test"],[97,40,82,38],[97,41,82,39,"frame"],[97,46,82,44],[97,47,82,45,"filename"],[97,55,82,53],[97,56,82,54],[98,6,84,4],[98,10,84,8,"isBrowser"],[98,19,84,17],[98,21,84,19],[99,8,85,6],[99,12,85,10,"root"],[99,16,85,14],[99,18,85,16],[100,10,86,8],[100,16,86,14,"oldFilename"],[100,27,86,25],[100,30,86,28,"frame"],[100,35,86,33],[100,36,86,34,"filename"],[100,44,86,42],[101,10,87,8],[101,14,87,12,"oldFilename"],[101,25,87,23],[101,26,87,24,"indexOf"],[101,33,87,31],[101,34,87,32,"root"],[101,38,87,36],[101,39,87,37],[101,44,87,42],[101,45,87,43],[101,47,87,45],[102,12,88,10,"frame"],[102,17,88,15],[102,18,88,16,"filename"],[102,26,88,24],[102,29,88,27,"oldFilename"],[102,40,88,38],[102,41,88,39,"replace"],[102,48,88,46],[102,49,88,47,"root"],[102,53,88,51],[102,55,88,53,"prefix"],[102,61,88,59],[102,62,88,60],[103,10,89,8],[104,8,90,6],[105,6,91,4],[105,7,91,5],[105,13,91,11],[106,8,92,6],[106,12,92,10,"isWindowsFrame"],[106,26,92,24],[106,30,92,28,"startsWithSlash"],[106,45,92,43],[106,47,92,45],[107,10,93,8],[107,16,93,14,"filename"],[107,24,93,22],[107,27,93,25,"isWindowsFrame"],[107,41,93,39],[107,44,94,12,"frame"],[107,49,94,17],[107,50,94,18,"filename"],[107,58,94,26],[107,59,95,15,"replace"],[107,66,95,22],[107,67,95,23],[107,79,95,35],[107,81,95,37],[107,83,95,39],[107,84,95,40],[107,85,95,41],[108,10,95,41],[108,11,96,15,"replace"],[108,18,96,22],[108,19,96,23],[108,24,96,28],[108,26,96,30],[108,29,96,33],[108,30,96,34],[108,31,96,35],[109,10,96,35],[109,12,97,12,"frame"],[109,17,97,17],[109,18,97,18,"filename"],[109,26,97,26],[110,10,98,8],[110,16,98,14,"base"],[110,20,98,18],[110,23,98,21,"root"],[110,27,98,25],[110,30,98,28],[110,34,98,28,"relative"],[110,46,98,36],[110,47,98,36,"relative"],[110,55,98,36],[110,57,98,37,"root"],[110,61,98,41],[110,63,98,43,"filename"],[110,71,98,51],[110,72,98,52],[110,75,98,55],[110,79,98,55,"basename"],[110,91,98,63],[110,92,98,63,"basename"],[110,100,98,63],[110,102,98,64,"filename"],[110,110,98,72],[110,111,98,73],[111,10,99,8,"frame"],[111,15,99,13],[111,16,99,14,"filename"],[111,24,99,22],[111,27,99,25],[111,30,99,28,"prefix"],[111,36,99,34],[111,39,99,37,"base"],[111,43,99,41],[111,45,99,43],[112,8,100,6],[113,6,101,4],[114,6,103,4],[114,13,103,11,"frame"],[114,18,103,16],[115,4,104,2],[115,5,104,3],[116,2,105,0],[117,0,105,1],[117,3]],"functionMap":{"names":["<global>","defineIntegration$argument_0","_processExceptionsEvent","event.exception.values.map$argument_0","_processStacktrace","stacktrace.frames.map$argument_0","processEvent","generateIteratee","<anonymous>"],"mappings":"AAA;mDCS;ECS;6CCQ;YDG;GDM;EGG;sCCG,gBD;GHE;IKI;KLQ;CDE;AOK;SCO;GDkC;CPC"},"hasCjsExports":false},"type":"js/module"}]}