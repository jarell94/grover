{"dependencies":[{"name":"../currentScopes.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":48,"index":48}}],"key":"4IMzW1L9FGOQbFYVibN4P3pVG0E=","exportNames":["*"],"imports":1}},{"name":"../integration.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":49},"end":{"line":2,"column":54,"index":103}}],"key":"B8aKvpmafw58aWtupuC7GWTMiwo=","exportNames":["*"],"imports":1}},{"name":"../utils/object.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":104},"end":{"line":3,"column":57,"index":161}}],"key":"C8yMer+b+EwEB0LLb8KqXgEktYc=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"functionToStringIntegration\", {\n    enumerable: true,\n    get: function () {\n      return functionToStringIntegration;\n    }\n  });\n  var _currentScopesJs = require(_dependencyMap[0], \"../currentScopes.js\");\n  var _integrationJs = require(_dependencyMap[1], \"../integration.js\");\n  var _utilsObjectJs = require(_dependencyMap[2], \"../utils/object.js\");\n  let originalFunctionToString;\n  const INTEGRATION_NAME = 'FunctionToString';\n  const SETUP_CLIENTS = new WeakMap();\n  const _functionToStringIntegration = () => {\n    return {\n      name: INTEGRATION_NAME,\n      setupOnce() {\n        // eslint-disable-next-line @typescript-eslint/unbound-method\n        originalFunctionToString = Function.prototype.toString;\n\n        // intrinsics (like Function.prototype) might be immutable in some environments\n        // e.g. Node with --frozen-intrinsics, XS (an embedded JavaScript engine) or SES (a JavaScript proposal)\n        try {\n          Function.prototype.toString = function (...args) {\n            const originalFunction = (0, _utilsObjectJs.getOriginalFunction)(this);\n            const context = SETUP_CLIENTS.has((0, _currentScopesJs.getClient)()) && originalFunction !== undefined ? originalFunction : this;\n            return originalFunctionToString.apply(context, args);\n          };\n        } catch {\n          // ignore errors here, just don't patch this\n        }\n      },\n      setup(client) {\n        SETUP_CLIENTS.set(client, true);\n      }\n    };\n  };\n\n  /**\n   * Patch toString calls to return proper name for wrapped functions.\n   *\n   * ```js\n   * Sentry.init({\n   *   integrations: [\n   *     functionToStringIntegration(),\n   *   ],\n   * });\n   * ```\n   */\n  const functionToStringIntegration = (0, _integrationJs.defineIntegration)(_functionToStringIntegration);\n});","lineCount":56,"map":[[7,2,50,0,"Object"],[7,8,50,0],[7,9,50,0,"defineProperty"],[7,23,50,0],[7,24,50,0,"exports"],[7,31,50,0],[8,4,50,0,"enumerable"],[8,14,50,0],[9,4,50,0,"get"],[9,7,50,0],[9,18,50,0,"get"],[9,19,50,0],[10,6,50,0],[10,13,50,9,"functionToStringIntegration"],[10,40,50,36],[11,4,50,36],[12,2,50,36],[13,2,1,0],[13,6,1,0,"_currentScopesJs"],[13,22,1,0],[13,25,1,0,"require"],[13,32,1,0],[13,33,1,0,"_dependencyMap"],[13,47,1,0],[14,2,2,0],[14,6,2,0,"_integrationJs"],[14,20,2,0],[14,23,2,0,"require"],[14,30,2,0],[14,31,2,0,"_dependencyMap"],[14,45,2,0],[15,2,3,0],[15,6,3,0,"_utilsObjectJs"],[15,20,3,0],[15,23,3,0,"require"],[15,30,3,0],[15,31,3,0,"_dependencyMap"],[15,45,3,0],[16,2,5,0],[16,6,5,4,"originalFunctionToString"],[16,30,5,28],[17,2,7,0],[17,8,7,6,"INTEGRATION_NAME"],[17,24,7,22],[17,27,7,25],[17,45,7,43],[18,2,9,0],[18,8,9,6,"SETUP_CLIENTS"],[18,21,9,19],[18,24,9,22],[18,28,9,26,"WeakMap"],[18,35,9,33],[18,36,9,34],[18,37,9,35],[19,2,11,0],[19,8,11,6,"_functionToStringIntegration"],[19,36,11,34],[19,39,11,38,"_functionToStringIntegration"],[19,40,11,38],[19,45,11,44],[20,4,12,2],[20,11,12,9],[21,6,13,4,"name"],[21,10,13,8],[21,12,13,10,"INTEGRATION_NAME"],[21,28,13,26],[22,6,14,4,"setupOnce"],[22,15,14,13,"setupOnce"],[22,16,14,13],[22,18,14,16],[23,8,15,6],[24,8,16,6,"originalFunctionToString"],[24,32,16,30],[24,35,16,33,"Function"],[24,43,16,41],[24,44,16,42,"prototype"],[24,53,16,51],[24,54,16,52,"toString"],[24,62,16,60],[26,8,18,6],[27,8,19,6],[28,8,20,6],[28,12,20,10],[29,10,21,8,"Function"],[29,18,21,16],[29,19,21,17,"prototype"],[29,28,21,26],[29,29,21,27,"toString"],[29,37,21,35],[29,40,21,38],[29,50,21,49],[29,53,21,52,"args"],[29,57,21,56],[29,59,21,58],[30,12,22,10],[30,18,22,16,"originalFunction"],[30,34,22,32],[30,37,22,35],[30,41,22,35,"getOriginalFunction"],[30,55,22,54],[30,56,22,54,"getOriginalFunction"],[30,75,22,54],[30,77,22,55],[30,81,22,59],[30,82,22,60],[31,12,23,10],[31,18,23,16,"context"],[31,25,23,23],[31,28,24,12,"SETUP_CLIENTS"],[31,41,24,25],[31,42,24,26,"has"],[31,45,24,29],[31,46,24,30],[31,50,24,30,"getClient"],[31,66,24,39],[31,67,24,39,"getClient"],[31,76,24,39],[31,78,24,40],[31,79,24,42],[31,80,24,43],[31,84,24,47,"originalFunction"],[31,100,24,63],[31,105,24,68,"undefined"],[31,114,24,77],[31,117,24,80,"originalFunction"],[31,133,24,96],[31,136,24,99],[31,140,24,103],[32,12,25,10],[32,19,25,17,"originalFunctionToString"],[32,43,25,41],[32,44,25,42,"apply"],[32,49,25,47],[32,50,25,48,"context"],[32,57,25,55],[32,59,25,57,"args"],[32,63,25,61],[32,64,25,62],[33,10,26,8],[33,11,26,9],[34,8,27,6],[34,9,27,7],[34,10,27,8],[34,16,27,14],[35,10,28,8],[36,8,28,8],[37,6,30,4],[37,7,30,5],[38,6,31,4,"setup"],[38,11,31,9,"setup"],[38,12,31,10,"client"],[38,18,31,16],[38,20,31,18],[39,8,32,6,"SETUP_CLIENTS"],[39,21,32,19],[39,22,32,20,"set"],[39,25,32,23],[39,26,32,24,"client"],[39,32,32,30],[39,34,32,32],[39,38,32,36],[39,39,32,37],[40,6,33,4],[41,4,34,2],[41,5,34,3],[42,2,35,0],[42,3,35,2],[44,2,37,0],[45,0,38,0],[46,0,39,0],[47,0,40,0],[48,0,41,0],[49,0,42,0],[50,0,43,0],[51,0,44,0],[52,0,45,0],[53,0,46,0],[54,0,47,0],[55,2,48,0],[55,8,48,6,"functionToStringIntegration"],[55,35,48,33],[55,38,48,36],[55,42,48,36,"defineIntegration"],[55,56,48,53],[55,57,48,53,"defineIntegration"],[55,74,48,53],[55,76,48,54,"_functionToStringIntegration"],[55,104,48,82],[55,105,48,83],[56,0,48,84],[56,3]],"functionMap":{"names":["<global>","_functionToStringIntegration","setupOnce","Function.prototype.toString","setup"],"mappings":"AAA;sCCU;ICG;sCCO;SDK;KDI;IGC;KHE;CDE"},"hasCjsExports":false},"type":"js/module"}]}