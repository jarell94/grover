{"dependencies":[{"name":"@sentry/core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":75,"index":75}}],"key":"/o+dASQcHF2bB25icdsM0E4TExc=","exportNames":["*"],"imports":1}},{"name":"../debug-build.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":76},"end":{"line":2,"column":48,"index":124}}],"key":"rfhktnzi6PvZxT1xtyHWbBktN/w=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"checkRouteForAsyncHandler\", {\n    enumerable: true,\n    get: function () {\n      return checkRouteForAsyncHandler;\n    }\n  });\n  Object.defineProperty(exports, \"createAsyncHandlerProxy\", {\n    enumerable: true,\n    get: function () {\n      return createAsyncHandlerProxy;\n    }\n  });\n  Object.defineProperty(exports, \"handleAsyncHandlerResult\", {\n    enumerable: true,\n    get: function () {\n      return handleAsyncHandlerResult;\n    }\n  });\n  var _sentryCore = require(_dependencyMap[0], \"@sentry/core\");\n  var _debugBuildJs = require(_dependencyMap[1], \"../debug-build.js\");\n  /**\n   * Creates a proxy wrapper for an async handler function.\n   */\n  function createAsyncHandlerProxy(originalFunction, route, handlerKey, processResolvedRoutes) {\n    const proxy = new Proxy(originalFunction, {\n      apply(target, thisArg, argArray) {\n        const result = target.apply(thisArg, argArray);\n        handleAsyncHandlerResult(result, route, handlerKey, processResolvedRoutes);\n        return result;\n      }\n    });\n    (0, _sentryCore.addNonEnumerableProperty)(proxy, '__sentry_proxied__', true);\n    return proxy;\n  }\n\n  /**\n   * Handles the result of an async handler function call.\n   */\n  function handleAsyncHandlerResult(result, route, handlerKey, processResolvedRoutes) {\n    if ((0, _sentryCore.isThenable)(result)) {\n      result.then(resolvedRoutes => {\n        if (Array.isArray(resolvedRoutes)) {\n          processResolvedRoutes(resolvedRoutes, route);\n        }\n      }).catch(e => {\n        _debugBuildJs.DEBUG_BUILD && _sentryCore.debug.warn(`Error resolving async handler '${handlerKey}' for route`, route, e);\n      });\n    } else if (Array.isArray(result)) {\n      processResolvedRoutes(result, route);\n    }\n  }\n\n  /**\n   * Recursively checks a route for async handlers and sets up Proxies to add discovered child routes to allRoutes when called.\n   */\n  function checkRouteForAsyncHandler(route, processResolvedRoutes) {\n    // Set up proxies for any functions in the route's handle\n    if (route.handle && typeof route.handle === 'object') {\n      for (const key of Object.keys(route.handle)) {\n        const maybeFn = route.handle[key];\n        if (typeof maybeFn === 'function' && !maybeFn.__sentry_proxied__) {\n          route.handle[key] = createAsyncHandlerProxy(maybeFn, route, key, processResolvedRoutes);\n        }\n      }\n    }\n\n    // Recursively check child routes\n    if (Array.isArray(route.children)) {\n      for (const child of route.children) {\n        checkRouteForAsyncHandler(child, processResolvedRoutes);\n      }\n    }\n  }\n});","lineCount":80,"map":[[7,2,75,0,"Object"],[7,8,75,0],[7,9,75,0,"defineProperty"],[7,23,75,0],[7,24,75,0,"exports"],[7,31,75,0],[8,4,75,0,"enumerable"],[8,14,75,0],[9,4,75,0,"get"],[9,7,75,0],[9,18,75,0,"get"],[9,19,75,0],[10,6,75,0],[10,13,75,9,"checkRouteForAsyncHandler"],[10,38,75,34],[11,4,75,34],[12,2,75,34],[13,2,75,0,"Object"],[13,8,75,0],[13,9,75,0,"defineProperty"],[13,23,75,0],[13,24,75,0,"exports"],[13,31,75,0],[14,4,75,0,"enumerable"],[14,14,75,0],[15,4,75,0,"get"],[15,7,75,0],[15,18,75,0,"get"],[15,19,75,0],[16,6,75,0],[16,13,75,36,"createAsyncHandlerProxy"],[16,36,75,59],[17,4,75,59],[18,2,75,59],[19,2,75,0,"Object"],[19,8,75,0],[19,9,75,0,"defineProperty"],[19,23,75,0],[19,24,75,0,"exports"],[19,31,75,0],[20,4,75,0,"enumerable"],[20,14,75,0],[21,4,75,0,"get"],[21,7,75,0],[21,18,75,0,"get"],[21,19,75,0],[22,6,75,0],[22,13,75,61,"handleAsyncHandlerResult"],[22,37,75,85],[23,4,75,85],[24,2,75,85],[25,2,1,0],[25,6,1,0,"_sentryCore"],[25,17,1,0],[25,20,1,0,"require"],[25,27,1,0],[25,28,1,0,"_dependencyMap"],[25,42,1,0],[26,2,2,0],[26,6,2,0,"_debugBuildJs"],[26,19,2,0],[26,22,2,0,"require"],[26,29,2,0],[26,30,2,0,"_dependencyMap"],[26,44,2,0],[27,2,4,0],[28,0,5,0],[29,0,6,0],[30,2,7,0],[30,11,7,9,"createAsyncHandlerProxy"],[30,34,7,32,"createAsyncHandlerProxy"],[30,35,8,2,"originalFunction"],[30,51,8,18],[30,53,9,2,"route"],[30,58,9,7],[30,60,10,2,"handlerKey"],[30,70,10,12],[30,72,11,2,"processResolvedRoutes"],[30,93,11,23],[30,95,12,2],[31,4,13,2],[31,10,13,8,"proxy"],[31,15,13,13],[31,18,13,16],[31,22,13,20,"Proxy"],[31,27,13,25],[31,28,13,26,"originalFunction"],[31,44,13,42],[31,46,13,44],[32,6,14,4,"apply"],[32,11,14,9,"apply"],[32,12,14,10,"target"],[32,18,14,16],[32,20,14,18,"thisArg"],[32,27,14,25],[32,29,14,27,"argArray"],[32,37,14,35],[32,39,14,37],[33,8,15,6],[33,14,15,12,"result"],[33,20,15,18],[33,23,15,21,"target"],[33,29,15,27],[33,30,15,28,"apply"],[33,35,15,33],[33,36,15,34,"thisArg"],[33,43,15,41],[33,45,15,43,"argArray"],[33,53,15,51],[33,54,15,52],[34,8,16,6,"handleAsyncHandlerResult"],[34,32,16,30],[34,33,16,31,"result"],[34,39,16,37],[34,41,16,39,"route"],[34,46,16,44],[34,48,16,46,"handlerKey"],[34,58,16,56],[34,60,16,58,"processResolvedRoutes"],[34,81,16,79],[34,82,16,80],[35,8,17,6],[35,15,17,13,"result"],[35,21,17,19],[36,6,18,4],[37,4,19,2],[37,5,19,3],[37,6,19,4],[38,4,21,2],[38,8,21,2,"addNonEnumerableProperty"],[38,19,21,26],[38,20,21,26,"addNonEnumerableProperty"],[38,44,21,26],[38,46,21,27,"proxy"],[38,51,21,32],[38,53,21,34],[38,73,21,54],[38,75,21,56],[38,79,21,60],[38,80,21,61],[39,4,23,2],[39,11,23,9,"proxy"],[39,16,23,14],[40,2,24,0],[42,2,26,0],[43,0,27,0],[44,0,28,0],[45,2,29,0],[45,11,29,9,"handleAsyncHandlerResult"],[45,35,29,33,"handleAsyncHandlerResult"],[45,36,30,2,"result"],[45,42,30,8],[45,44,31,2,"route"],[45,49,31,7],[45,51,32,2,"handlerKey"],[45,61,32,12],[45,63,33,2,"processResolvedRoutes"],[45,84,33,23],[45,86,34,2],[46,4,35,2],[46,8,35,6],[46,12,35,6,"isThenable"],[46,23,35,16],[46,24,35,16,"isThenable"],[46,34,35,16],[46,36,35,17,"result"],[46,42,35,23],[46,43,35,24],[46,45,35,26],[47,6,36,5,"result"],[47,12,36,11],[47,13,37,7,"then"],[47,17,37,11],[47,18,37,13,"resolvedRoutes"],[47,32,37,27],[47,36,37,32],[48,8,38,8],[48,12,38,12,"Array"],[48,17,38,17],[48,18,38,18,"isArray"],[48,25,38,25],[48,26,38,26,"resolvedRoutes"],[48,40,38,40],[48,41,38,41],[48,43,38,43],[49,10,39,10,"processResolvedRoutes"],[49,31,39,31],[49,32,39,32,"resolvedRoutes"],[49,46,39,46],[49,48,39,48,"route"],[49,53,39,53],[49,54,39,54],[50,8,40,8],[51,6,41,6],[51,7,41,7],[51,8,41,8],[51,9,42,7,"catch"],[51,14,42,12],[51,15,42,14,"e"],[51,16,42,15],[51,20,42,20],[52,8,43,8,"DEBUG_BUILD"],[52,21,43,19],[52,22,43,19,"DEBUG_BUILD"],[52,33,43,19],[52,37,43,23,"debug"],[52,48,43,28],[52,49,43,28,"debug"],[52,54,43,28],[52,55,43,29,"warn"],[52,59,43,33],[52,60,43,34],[52,94,43,68,"handlerKey"],[52,104,43,78],[52,117,43,91],[52,119,43,93,"route"],[52,124,43,98],[52,126,43,100,"e"],[52,127,43,101],[52,128,43,102],[53,6,44,6],[53,7,44,7],[53,8,44,8],[54,4,45,2],[54,5,45,3],[54,11,45,9],[54,15,45,13,"Array"],[54,20,45,18],[54,21,45,19,"isArray"],[54,28,45,26],[54,29,45,27,"result"],[54,35,45,33],[54,36,45,34],[54,38,45,36],[55,6,46,4,"processResolvedRoutes"],[55,27,46,25],[55,28,46,26,"result"],[55,34,46,32],[55,36,46,34,"route"],[55,41,46,39],[55,42,46,40],[56,4,47,2],[57,2,48,0],[59,2,50,0],[60,0,51,0],[61,0,52,0],[62,2,53,0],[62,11,53,9,"checkRouteForAsyncHandler"],[62,36,53,34,"checkRouteForAsyncHandler"],[62,37,54,2,"route"],[62,42,54,7],[62,44,55,2,"processResolvedRoutes"],[62,65,55,23],[62,67,56,2],[63,4,57,2],[64,4,58,2],[64,8,58,6,"route"],[64,13,58,11],[64,14,58,12,"handle"],[64,20,58,18],[64,24,58,22],[64,31,58,29,"route"],[64,36,58,34],[64,37,58,35,"handle"],[64,43,58,41],[64,48,58,46],[64,56,58,54],[64,58,58,56],[65,6,59,4],[65,11,59,9],[65,17,59,15,"key"],[65,20,59,18],[65,24,59,22,"Object"],[65,30,59,28],[65,31,59,29,"keys"],[65,35,59,33],[65,36,59,34,"route"],[65,41,59,39],[65,42,59,40,"handle"],[65,48,59,46],[65,49,59,47],[65,51,59,49],[66,8,60,6],[66,14,60,12,"maybeFn"],[66,21,60,19],[66,24,60,22,"route"],[66,29,60,27],[66,30,60,28,"handle"],[66,36,60,34],[66,37,60,35,"key"],[66,40,60,38],[66,41,60,39],[67,8,61,6],[67,12,61,10],[67,19,61,17,"maybeFn"],[67,26,61,24],[67,31,61,29],[67,41,61,39],[67,45,61,43],[67,46,61,45,"maybeFn"],[67,53,61,52],[67,54,61,55,"__sentry_proxied__"],[67,72,61,73],[67,74,61,75],[68,10,62,8,"route"],[68,15,62,13],[68,16,62,14,"handle"],[68,22,62,20],[68,23,62,21,"key"],[68,26,62,24],[68,27,62,25],[68,30,62,28,"createAsyncHandlerProxy"],[68,53,62,51],[68,54,62,52,"maybeFn"],[68,61,62,59],[68,63,62,61,"route"],[68,68,62,66],[68,70,62,68,"key"],[68,73,62,71],[68,75,62,73,"processResolvedRoutes"],[68,96,62,94],[68,97,62,95],[69,8,63,6],[70,6,64,4],[71,4,65,2],[73,4,67,2],[74,4,68,2],[74,8,68,6,"Array"],[74,13,68,11],[74,14,68,12,"isArray"],[74,21,68,19],[74,22,68,20,"route"],[74,27,68,25],[74,28,68,26,"children"],[74,36,68,34],[74,37,68,35],[74,39,68,37],[75,6,69,4],[75,11,69,9],[75,17,69,15,"child"],[75,22,69,20],[75,26,69,24,"route"],[75,31,69,29],[75,32,69,30,"children"],[75,40,69,38],[75,42,69,40],[76,8,70,6,"checkRouteForAsyncHandler"],[76,33,70,31],[76,34,70,32,"child"],[76,39,70,37],[76,41,70,39,"processResolvedRoutes"],[76,62,70,60],[76,63,70,61],[77,6,71,4],[78,4,72,2],[79,2,73,0],[80,0,73,1],[80,3]],"functionMap":{"names":["<global>","createAsyncHandlerProxy","Proxy$argument_1.apply","handleAsyncHandlerResult","result.then$argument_0","result.then._catch$argument_0","checkRouteForAsyncHandler"],"mappings":"AAA;ACM;ICO;KDI;CDM;AGK;YCQ;ODI;aEC;OFE;CHI;AMK;CNoB"},"hasCjsExports":false},"type":"js/module"}]}